define(["jquery","core/modal_factory","core/modal_events"],function(a,b,c){return{init:function(){a("#region-main input:radio").change(function(){a(this).closest("form").submit()}),a("#region-main input:checkbox").change(function(){a(this).closest("form").submit()}),a("#region-main form").on("submit",function(){window.onbeforeunload=null}),a('a[data-action="deleteitem"]').on("click",function(){var d=a(this);b.create({type:b.types.CONFIRM,body:M.util.get_string("deleteruleitemconfirm","assessment")}).then(function(b){b.getRoot().on(c.yes,function(){var b=[],c=a("#rule"+d.data("ruleid")),e=c.find('.ruleparamcontainer a[data-action="deleteitem"]');e.each(function(c,e){a(e).data("itemid")!==d.data("itemid")&&b.push(a(e).data("itemid"))}),a.ajax({url:M.cfg.wwwroot+"/mod/assessment/ajax/editrule.php?sesskey="+M.cfg.sesskey+"&ruleid="+d.data("ruleid")+"&versionid="+d.data("versionid")+"&role="+d.data("role")+"&value="+b,success:function(){location.reload()}})}),b.show()})}),a('a[data-action="delete"]').click(function(){var d=a(this);b.create({type:b.types.CONFIRM,body:M.util.get_string("deleteruleconfirm","assessment")}).then(function(b){b.getRoot().on(c.yes,function(){a.ajax({url:M.cfg.wwwroot+"/mod/assessment/ajax/deleterule.php?sesskey="+M.cfg.sesskey+"&ruleid="+d.data("ruleid"),success:function(){location.reload()}})}),b.show()})})}}});