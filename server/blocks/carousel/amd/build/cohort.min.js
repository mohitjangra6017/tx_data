define(["jquery","core/templates","core/modal_factory","block_carousel/modal_cohort","block_carousel/select2"],function(a,b,c,d,e){return{blockid:null,init:function(b){var c=this;c.blockid=b,c.init_modal(),a(document).on("click","#btn-cohort-config-trigger",function(){c.add_cohort_search_fields()}),a(document).on("click","#save-cohort",function(){c.save_cohort()})},init_modal:function(){var b=a("#btn-cohort-config-trigger");c.create({type:d.TYPE},b).done(function(a){var b=a.getRoot();b.addClass("carousel-cohort-modal")})},add_cohort_search_fields:function(){var b=this;a.ajax({method:"POST",url:M.cfg.wwwroot+"/blocks/carousel/ajax/cohort_filters.php",dataType:"JSON",data:{blockid:b.blockid}}).done(function(b){a("#cohort-filters").html(b.html),e.init()})},save_cohort:function(){var b=a("#save-cohort").html();a("#save-cohort").html("Saving..."),a.ajax({method:"POST",url:M.cfg.wwwroot+"/blocks/carousel/ajax/save_cohort.php",dataType:"JSON",data:a(".cohort-configuration-from").serialize()}).done(function(){a("#save-cohort").html("Saved"),setTimeout(function(){a("#save-cohort").html(b)},3e3)})}}});