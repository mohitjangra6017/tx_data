define(["jquery","core/ajax","core/notification","core/str"],function(a,b,c,d){var e={};return e.initialise=function(e,f){var g=a("#inst"+e),h=g.find(".enrol");h.removeAttr("disabled"),h.click(function(){var e=a(this).attr("data-course-id");b.call([{methodname:"block_related_courses_enrol",args:{id:e},done:function(a){if(1==a){var b=h.filter("[data-course-id="+e+"]");b.attr("disabled",!0),d.get_string("enrolled","block_related_courses").done(function(a){b.text(a)})}else d.get_string("error:enrol","block_related_courses").done(function(a){c.exception(new Error(a))})},fail:c.exception}])})},e});