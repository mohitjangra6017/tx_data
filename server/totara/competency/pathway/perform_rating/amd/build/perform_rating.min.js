define([],function(){function a(){return this instanceof a?(this.widget="",this.pathway={id:0,type:"perform_rating",sortorder:0,singleuse:1},this.pwKey="",this.endpoints={create:"pathway_perform_rating_create",update:"pathway_perform_rating_update"},void(this.filename="perform_rating.js")):new a}a.prototype={events:function(){},setParent:function(a){this.widget=a},initData:function(){var a=this,b=this.widget.closest("[data-tw-editAchievementPaths-pathway-key]"),c=0,d=0;return new Promise(function(e,f){if(b&&(c=b.getAttribute("data-tw-editAchievementPaths-pathway-key")?b.getAttribute("data-tw-editAchievementPaths-pathway-key"):0,d=b.getAttribute("data-tw-editAchievementPaths-pathway-id")?b.getAttribute("data-tw-editAchievementPaths-pathway-id"):0),a.pwKey=c,0===d){delete a.pathway.id;var g=document.querySelector("[data-tw-editAchievementPaths-competency]"),h=1;g&&(h=g.getAttribute("data-tw-editAchievementPaths-competency")),a.pathway.competency_id=h,a.widget.setAttribute("data-tw-editAchievementPaths-save-endPoint",a.endpoints.create)}else a.pathway.id=d,a.widget.setAttribute("data-tw-editAchievementPaths-save-endPoint",a.endpoints.update);a.triggerEvent("update",{pathway:a.pathway})})},triggerEvent:function(a,b){b.key=this.pwKey;var c=new CustomEvent("totara_competency/pathway:"+a,{bubbles:!0,detail:b});this.widget.dispatchEvent(c)}};var b=function(b){return new Promise(function(c){var d=new a;d.setParent(b),d.events(),c(d),M.util.js_pending("pathwayPerformRating"),d.initData().then(function(){M.util.js_complete("pathwayPerformRating")})["catch"](function(){})})};return{init:b}});