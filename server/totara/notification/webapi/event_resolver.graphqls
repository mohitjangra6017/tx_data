type totara_notification_event_resolver {
  """
  The component name where this notifiable event belongs to.
  """
  component: String!
  """
  The human readerable name of the component
  """
  plugin_name: String!
  """
  The class name of notifiable event.
  """
  class_name: String!
  """
  The human readable notifiable event name.
  """
  name: String!
  """
  Collection of schedule types valid for this type of notifiable event.
  """
  valid_schedules: [totara_notification_schedule_type!]!
  """
  The recipients for notifiable event name.
  """
  recipients: [totara_notification_recipient!]!
  """
  Return the enabled status of the notifiable event.
  """
  status(
    extended_context: totara_notification_extended_context_input
  ): totara_notification_notifiable_event_status!
  """
  Returning all the notification preferences that are associated with this very notifiable event.
  """
  notification_preferences(
    """
    Extended context input must be provided.
    """
    extended_context: totara_notification_extended_context_input!
  ): [totara_notification_notification_preference!]!
  #Note this is where all the configuration fields within the system should be added.
}

type totara_notification_notifiable_event_status {
  is_enabled: Boolean!
}

extend type Query {
  """
  A query to fetch all the notifiable event resolvers within the system, and it is up to the
  implementation of persist query to include the associated notification preferences
  with the query or not.
  """
  totara_notification_event_resolvers(
    """
    Extended context MUST be provided, in order to create the notification preference
    within that context. Note that the context's id for this extended_context can be fallback
    to the context system if none is provided.
    """
    extended_context: totara_notification_extended_context_input!
  ): [totara_notification_event_resolver!]!
}

extend type Mutation {
  totara_notification_toggle_notifiable_event(
    """
    Notifiable event resolver class name
    """
    resolver_class_name: param_text!
    """
    Context to update enabled in.
    Note: Only the system context is accepted currently.
    """
    extended_context: totara_notification_extended_context_input
    """
    Enabled status to set
    """
    is_enabled: param_boolean
  ): totara_notification_event_resolver!
}
