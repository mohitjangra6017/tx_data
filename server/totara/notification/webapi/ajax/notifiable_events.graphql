query totara_notification_notifiable_events(
  $context_id: param_integer!
  $component: param_component
  $area: param_text
  $item_id: param_integer
) {
  notifiable_events: totara_notification_notifiable_events(
    context_id: $context_id
    component: $component
    area: $area
    item_id: $item_id
  ) {
    __typename
    class_name
    plugin_name
    name
    component
    recipients {
      class_name
      name
    }
    notification_preferences(
      context_id: $context_id
      component: $component
      area: $area
      item_id: $item_id
    ) {
      __typename
      title
      id
      ancestor_id
      body(format: RAW)
      body_format
      subject(format: RAW)
      subject_format
      overridden_body
      overridden_subject
      overridden_recipient
      title
      event_name
      event_class_name
      is_custom
      parent_id
      schedule_offset
      schedule_type
      schedule_label
      overridden_schedule
      recipient {
        class_name
        name
      }
      component
      extended_context {
        component
        context_id
        area
        item_id
      }
      parent_value {
        __typename
        subject(format: RAW)
        body(format: RAW)
        body_format
        title
        schedule_offset
        schedule_type
        subject_format
        recipient {
          class_name
          name
        }
      }
    }
    valid_schedules
  }
}
