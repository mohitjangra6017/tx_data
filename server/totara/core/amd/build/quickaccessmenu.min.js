define(["core/str","core/popover_region_controller","core/ajax","core/templates","core/notification"],function(a,b,c,d,e){function f(a){b.call(this,a),this.element=a}function g(a){return new Promise(function(b){var c=new f(a);c.setupEvents(),b(c)})}return f.prototype=Object.create(b.prototype),f.prototype.updateButtonAriaLabel=function(){this.isMenuOpen()?a.get_string("quickaccessmenu:hidemenuwindow","totara_core").done(function(a){this.isMenuOpen()&&this.menuToggle.attr("aria-label",a)}.bind(this)):a.get_string("quickaccessmenu:showmenuwindow","totara_core").done(function(a){this.isMenuOpen()===!1&&this.menuToggle.attr("aria-label",a)}.bind(this))},f.prototype.setupEvents=function(){var a=this;this.root.one(this.events().menuOpened,function(){M.util.js_pending("totara_core--quickaccessmenu_content_loading"),c.call([{args:{userid:null},methodname:"totara_core_quickaccessmenu_get_user_menu"}])[0].then(function(a){return d.render("totara_core/quickaccessmenu_content",a)}).then(function(b){a.element.querySelector("#quickaccess-popover-content").innerHTML=b,a.element.querySelector("#quickaccess-popover-content").classList.remove("totara_core__QuickAccess_menu--loading"),a.element.querySelector("[data-quickaccessmenu-close-menu]").addEventListener("click",function(b){return b.preventDefault(),a.closeMenu(),!1}),a.checkLocation(),M.util.js_complete("totara_core--quickaccessmenu_content_loading")})["catch"](e.exception)}),document.body.classList.contains("ie11")&&(this.root.on(this.events().menuOpened,function(){document.body.style.overflowX="hidden"}),this.root.on(this.events().menuClosed,function(){document.body.style.overflowX=""}))},f.prototype.checkLocation=function(){var a=this.element.querySelector("#quickaccess-popover-content"),b=a.getBoundingClientRect();b.left<0||b.right>window.innerWidth?a.classList.add("totara_core__QuickAccess_menu--large"):a.classList.remove("totara_core__QuickAccess_menu--large")},{init:g}});