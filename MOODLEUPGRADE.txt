UPGRADING A MOODLE SITE TO TOTARA
=================================

These instructions detail the process for migrating a Moodle site to Totara 13.

Totara migration requirements:

* Moodle 3.4.9 (Build: 20190513)
* Oracle database is not supported.
* MSSQL only: Database user requires additional permissions: ALTER SETTINGS(SERVER), full text search must be enabled.
* all other requirements listed in INSTALL.txt

If you are using higher Moodle release you need to execute a pre-migration
step to transform the database to Moodle 3.4.9 format, the list of supported
releases is updated regularly.

Releases supported in pre-migration script:

* Moodle 3.5.10 (Build: 20200113)
* Moodle 3.6.8 (Build: 20200113)
* Moodle 3.7.4 (Build: 20200113)


For more information see https://help.totaralearning.com/display/latest/Upgrading+from+Moodle


Migration steps:

1.  Prevent external access to web server to guarantee regular users
    cannot access server during the migration process.

2.  Backup the Moodle database.

3.  Backup the moodledata directory.

4.  Backup the Moodle source code directory.

5.  Verify that the full site backup can be restored on another server.
    It is recommended to test the migration on a restored copy of server first.

6.  If Moodle version is lower than 3.4.9 then upgrade to Moodle 3.4.9 release.

7.  Make a list of all add-ons and customisations and confirm they are
    compatible with Totara.

8.  Replace Moodle source code with the latest Totara 13 source code,
    keep the original config.php file only. Do not apply any customisations
    or add-ons yet.

9.  If Moodle version is higher than 3.4.9 then make sure Moodle was upgraded
    to one of the releases supported by pre-migration script listed above.

10. If necessary execute the pre-migration script admin/tool/premigration/cli/util.php
    from command line to transform the database to Moodle 3.4.9 format.

11. Perform a standard upgrade via command line or web interface.

12. Re-enable external web access.

13. Apply local customisations and add any plugins, make sure they are compatible
    with Totara.

14. Test the site functionality.

15. Congratulations, your site is now running Totara.
