{"code":"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=\"BAjG\")}({\"+6yQ\":function(e,t){e.exports=tui.require(\"totara_competency/components/profile/competency_list/Filters\")},\"+Gia\":function(e,t){e.exports=tui.require(\"performelement_linked_review/components/SelectParticipant\")},\"+KnN\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"JXQf\"),a=n.n(i),s={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_competency_progress_for_user\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"order\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"String\"}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"filters\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"totara_competency_profile_assignment_filters\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_profile_competency_progress\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"filters\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"filters\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"order\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"order\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"competency\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"items\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"assignment\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"archived_at\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"DATE\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"progress_name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"is_assigned\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"unassigned_at\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"DATE\"}},{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"assignment_specific_scale\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"description\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"defaultid\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"values\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"idnumber\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"description\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"scaleid\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"numericscore\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"sortorder\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"proficient\"},arguments:[],directives:[]}]}}]}}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"my_value\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"scale_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"percentage\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"proficient\"},arguments:[],directives:[]}]}}]}}]}}]}}]},r=n(\"+6yQ\"),o=n.n(r),c=n(\"TXLe\"),l=n.n(c),d=n(\"TXEh\"),u={components:{Loader:a.a,ListBody:l.a,Filters:o.a},props:{filters:{required:!1,type:Object,default:()=>({})},userId:{required:!0,type:Number},baseUrl:{required:!0,type:String},isMine:{required:!0,type:Boolean}},data:()=>({competencies:[],order:\"alphabetical\",proficientFilter:null,searchFilter:\"\"}),computed:{selectedFilters(){const e={search:this.searchFilter,proficient:this.filteringToArchived?null:this.proficientFilter};return Object.assign(e,Object(d.pick)(this.filters,[\"status\",\"type\",\"user_group_id\",\"user_group_type\"]))},filteringToArchived(){return this.filters&&2===this.filters.status},groupedCompetencyData(){return this.competencies.map(e=>({id:e.competency.id,rows:e.items.map(t=>Object.assign({competency:e.competency,link:this.competencyDetailsLink(e)},t))}))}},apollo:{competencies:{query:s,variables(){return this.filteringToArchived?\"recently-assigned\"===this.order&&(this.order=\"alphabetical\"):\"recently-archived\"===this.order&&(this.order=\"alphabetical\"),{user_id:this.userId,order:this.order,filters:this.selectedFilters}},update:({totara_competency_profile_competency_progress:e})=>e}},methods:{filtersUpdated({search:e,proficient:t}){this.searchFilter=e,this.proficientFilter=t},orderUpdated(e){this.order=e}}},m=n(\"KHd+\"),p=Object(m.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",[n(\"Loader\",{attrs:{loading:e.$apollo.loading}},[n(\"Filters\",{attrs:{\"is-for-archived\":e.filteringToArchived,\"default-order\":e.order,\"default-filter-values\":{proficient:e.proficientFilter,search:e.searchFilter}},on:{\"filters-updated\":e.filtersUpdated,\"order-updated\":e.orderUpdated}}),e._v(\" \"),n(\"ListBody\",{attrs:{archived:e.filteringToArchived,competencies:e.competencies,\"base-url\":e.baseUrl,\"user-id\":e.userId,\"is-mine\":e.isMine}})],1)],1)}),[],!1,null,null,null);p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},\"+MEP\":function(e,t){e.exports=tui.require(\"tui/components/profile/MiniProfileCard\")},\"+TNE\":function(e,t){e.exports=tui.require(\"totara_competency/components/details/ArchivedAssignments\")},\"+d5V\":function(e,t,n){\"use strict\";n.r(t);var i={props:{complete:{type:Boolean},completed:{type:Number},target:{type:Number}}},a=(n(\"C4mR\"),n(\"KHd+\")),s=function(e){e.options.__langStrings={totara_competency:[\"achieved_n_out_of_n\",\"completed\"]}},r=Object(a.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-progressCircle\",class:{\"tui-progressCircle--complete\":e.complete}},[n(\"div\",{staticClass:\"tui-progressCircle__circle\"},[n(\"span\",{staticClass:\"tui-progressCircle__circle-text\"},[e._v(\"\\n      \"+e._s(e.$str(\"achieved_n_out_of_n\",\"totara_competency\",{current:e.completed,target:e.target}))+\"\\n    \")])]),e._v(\" \"),n(\"div\",{staticClass:\"tui-progressCircle__label\"},[e._v(\"\\n    \"+e._s(e.$str(\"completed\",\"totara_competency\"))+\"\\n  \")])])}),[],!1,null,null,null);\"function\"==typeof s&&s(r),r.options.__hasBlocks={script:!0,template:!0};t.default=r.exports},\"/NCw\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"MhKF\"),a=n.n(i),s=n(\"KGot\"),r=n.n(s),o=n(\"5qAA\"),c=n.n(o),l=n(\"9G+f\"),d=n.n(l),u=n(\"C4bi\"),m=n.n(u),p=n(\"lyMP\"),_=n.n(p),v=n(\"yikf\"),y=n.n(v),g={components:{AddUserIcon:a.a,Cell:r.a,HeaderCell:c.a,Popover:d.a,ProficientStatus:m.a,RemoveUserIcon:_.a,Table:y.a},props:{log:{type:Array}},methods:{showProgressName:e=>null!=e.assignment&&![\"tracking_started\",\"tracking_ended\"].includes(e.assignment_action)}},h=(n(\"YDfs\"),n(\"KHd+\")),f=function(e){e.options.__langStrings={core:[\"date\",\"description\"],totara_competency:[\"assignment\",\"proficiency_status\",\"progress_name_by_user\"]}},k=Object(h.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Table\",{staticClass:\"tui-competencyDetailActivityLogTable\",attrs:{data:e.log},scopedSlots:e._u([{key:\"header-row\",fn:function(){return[n(\"HeaderCell\",{attrs:{size:\"2\"}},[e._v(\"\\n      \"+e._s(e.$str(\"date\",\"core\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"8\"}},[e._v(\"\\n      \"+e._s(e.$str(\"description\",\"core\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"3\"}},[e._v(\"\\n      \"+e._s(e.$str(\"proficiency_status\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"3\"}},[e._v(\"\\n      \"+e._s(e.$str(\"assignment\",\"totara_competency\"))+\"\\n    \")])]},proxy:!0},{key:\"row\",fn:function(t){var i=t.row;t.expand;return[n(\"Cell\",{attrs:{size:\"2\",\"column-header\":e.$str(\"date\",\"core\")}},[n(\"Popover\",{attrs:{triggers:[\"hover\"]},scopedSlots:e._u([{key:\"trigger\",fn:function(){return[n(\"span\",{staticClass:\"tui-competencyDetailActivityLogTable__date\"},[e._v(\"\\n            \"+e._s(i.date)+\"\\n          \")])]},proxy:!0}],null,!0)},[e._v(\" \"),n(\"div\",[e._v(e._s(i.datetime))])])],1),e._v(\" \"),n(\"Cell\",{staticClass:\"tui-competencyDetailActivityLogTable__description\",attrs:{size:\"8\",\"column-header\":e.$str(\"description\",\"core\")}},[\"assigned\"===i.assignment_action?n(\"AddUserIcon\",{attrs:{size:\"200\"}}):e._e(),e._v(\" \"),\"unassigned_archived\"===i.assignment_action||\"unassigned_usergroup\"===i.assignment_action?n(\"RemoveUserIcon\",{attrs:{size:\"200\"}}):e._e(),e._v(\" \"),n(\"span\",{class:{\"tui-competencyDetailActivityLogTable__description-rating\":null!=i.proficient_status,\"tui-competencyDetailActivityLogTable__description-system\":i.assignment&&\"system\"===i.assignment.type,\"tui-competencyDetailActivityLogTable__description-tracking\":i.assignment_action&&(\"tracking_started\"===i.assignment_action||\"tracking_ended\"===i.assignment_action)}},[e._v(\"\\n        \"+e._s(i.description)+\"\\n      \")])],1),e._v(\" \"),n(\"Cell\",{attrs:{size:\"3\",\"column-header\":e.$str(\"proficiency_status\",\"totara_competency\")}},[null!=i.proficient_status?n(\"ProficientStatus\",{attrs:{\"proficient-status\":i.proficient_status}}):e._e()],1),e._v(\" \"),n(\"Cell\",{attrs:{size:\"3\",\"column-header\":e.$str(\"assignment\",\"totara_competency\")}},[e.showProgressName(i)?n(\"span\",[e._v(\"\\n        \"+e._s(i.assignment.progress_name)+\"\\n      \")]):e._e()])]}}])})}),[],!1,null,null,null);\"function\"==typeof f&&f(k),k.options.__hasBlocks={script:!0,template:!0};t.default=k.exports},\"/X/1\":function(e,t){e.exports=tui.require(\"tui/components/toggle/ToggleSet\")},\"/bax\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"Sn4P\"),a=n.n(i),s=n(\"QPG3\"),r=n.n(s),o=n(\"+TNE\"),c=n.n(o),l=n(\"Lany\"),d=n.n(l),u=n(\"vF5l\"),m=n.n(u),p=n(\"NAOU\"),_=n.n(p),v=n(\"D9If\"),y=n.n(v),g=n(\"bxeI\"),h=n.n(g),f=n(\"+MEP\"),k=n.n(f),b=n(\"tkAW\"),N=n.n(b),S=n(\"Mnur\"),C=n.n(S),A=n(\"zdti\"),F=n.n(A),x=n(\"zs4z\"),w=n.n(x),$=n(\"kPEt\"),I=n.n($),q=n(\"vyVp\"),V=n(\"qGal\"),D=n(\"gqVV\"),P=n(\"wMJ/\"),T={components:{Achievements:a.a,ActivityLog:r.a,ArchivedAssignments:c.a,Assignment:d.a,Button:m.a,Grid:_.a,GridItem:y.a,Layout:h.a,MiniProfileCard:k.a,Modal:N.a,ModalPresenter:C.a,NotificationBanner:F.a,PageBackLink:w.a,Progress:I.a},props:{competencyId:{required:!0,type:Number},goBackLink:{required:!0,type:String},goBackText:{required:!0,type:String},userId:{required:!0,type:Number},isMine:{required:!0,type:Boolean},showActivityLogByDefault:{default:!1,type:Boolean},toastMessage:{type:String},hasPendingAggregation:{type:Boolean}},data:()=>({activityLogModalOpen:!1,archivedAssignmentModalOpen:!1,assignmentFilter:0,data:{competency:null,items:[]},user:null}),apollo:{data:{query:D.a,variables(){return{user_id:this.userId,competency_id:this.competencyId,status:V.ASSIGNMENT_ACTIVE}},update({totara_competency_profile_competency_details:e}){const t=e;return null===t?{competency:null,items:[]}:{competency:t.competency,items:t.items}}},user:{query:P.a,variables(){return{user_id:this.userId}},update:e=>e.totara_competency_user,skip(){return this.isMine}}},computed:{selectedAssignment(){return this.data.items.length&&this.data.items[this.assignmentFilter]?this.data.items[this.assignmentFilter]:null},selectedAssignmentData(){return this.selectedAssignment?this.selectedAssignment.assignment:{}},selectedAssignmentProficiency(){return this.selectedAssignment&&this.selectedAssignment.my_value?this.selectedAssignment.my_value:{}},selectedAssignmentMinProficiency(){return this.selectedAssignment&&this.selectedAssignment.min_value?this.selectedAssignment.min_value:{}},selectedAssignmentProficiencyValue(){return this.selectedAssignmentProficiency&&this.selectedAssignmentProficiency.id?this.selectedAssignmentProficiency.id:NaN},selectedAssignmentMinProficiencyValue(){return this.selectedAssignmentMinProficiency&&this.selectedAssignmentMinProficiency.id?this.selectedAssignmentMinProficiency.id:NaN},activeAssignmentList(){let e=[];return e=this.data.items.map((e,t)=>({archived:e.assignment.archived_at||\"legacy\"===e.assignment.type,id:t,assignment_id:e.assignment.id,can_archive:e.assignment.can_archive,label:this.getFilterLabel(e)})).filter((function(e){return!e.archived})),e.length&&this.updateAssignmentFilterValue(e[0].id),e}},mounted(){this.toastMessage&&Object(q.notify)({message:this.toastMessage}),this.activityLogModalOpen=this.showActivityLogByDefault},methods:{openActivityLogModal(){this.activityLogModalOpen=!0},openArchivedAssignmentModal(){this.archivedAssignmentModalOpen=!0},closeActivityLogModal(){this.activityLogModalOpen=!1},closeArchivedAssignmentModal(){this.archivedAssignmentModalOpen=!1},updateAssignmentFilterValue(e){this.assignmentFilter=e},getFilterLabel(e){let t=e.assignment.progress_name;if(this.isDirectlyAssigned(e.assignment)){let n={progress_name:e.assignment.progress_name,user_fullname_role:e.assignment.reason_assigned};t=this.$str(\"progress_name_by_user\",\"totara_competency\",n)}return t},isDirectlyAssigned:e=>\"user\"===e.user_group_type&&(\"admin\"===e.type||\"other\"===e.type)}},O=(n(\"ykDy\"),n(\"KHd+\")),M=function(e){e.options.__langStrings={totara_competency:[\"activity_log\",\"archived_assignments\",\"current_assignment_details\",\"competency_does_not_exist\",\"no_active_assignments\",\"warning_pending_aggregation_detail\"]}},B=Object(O.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Layout\",{staticClass:\"tui-competencyDetail\",attrs:{loading:e.$apollo.loading,title:e.data.competency?e.data.competency.fullname:\"\"},scopedSlots:e._u([e.hasPendingAggregation?{key:\"feedback-banner\",fn:function(){return[n(\"NotificationBanner\",{attrs:{type:\"warning\",message:e.$str(\"warning_pending_aggregation_detail\",\"totara_competency\")}})]},proxy:!0}:null,e.user&&!e.isMine?{key:\"user-overview\",fn:function(){return[n(\"MiniProfileCard\",{attrs:{display:e.user.card_display}})]},proxy:!0}:null,{key:\"content-nav\",fn:function(){return[n(\"PageBackLink\",{attrs:{link:e.goBackLink,text:e.goBackText}})]},proxy:!0},e.data.competency?{key:\"content\",fn:function(){return[n(\"div\",{staticClass:\"tui-competencyDetail__content\"},[n(\"Grid\",{attrs:{\"stack-at\":700}},[n(\"GridItem\",{attrs:{units:7}},[n(\"div\",{staticClass:\"tui-competencyDetail__description\",domProps:{innerHTML:e._s(e.data.competency.description)}})]),e._v(\" \"),n(\"GridItem\",{class:\"tui-competencyDetail__buttons\",attrs:{units:5}},[n(\"Button\",{attrs:{styleclass:{small:!0},text:e.$str(\"archived_assignments\",\"totara_competency\")},on:{click:e.openArchivedAssignmentModal}}),e._v(\" \"),n(\"Button\",{attrs:{styleclass:{small:!0},text:e.$str(\"activity_log\",\"totara_competency\")},on:{click:e.openActivityLogModal}})],1)],1),e._v(\" \"),n(\"div\",{staticClass:\"tui-competencyDetail__body\"},[n(\"h3\",{staticClass:\"tui-competencyDetail__body-title\"},[e._v(\"\\n          \"+e._s(e.$str(\"current_assignment_details\",\"totara_competency\"))+\"\\n        \")]),e._v(\" \"),e.activeAssignmentList.length?n(\"div\",[n(\"Assignment\",{attrs:{\"active-assignment-list\":e.activeAssignmentList,\"selected-assignment-proficiency\":e.selectedAssignmentProficiency,\"competency-id\":e.competencyId,\"user-id\":e.userId},model:{value:e.assignmentFilter,callback:function(t){e.assignmentFilter=t},expression:\"assignmentFilter\"}}),e._v(\" \"),n(\"Progress\",{attrs:{\"competency-id\":e.competencyId,\"my-value\":e.selectedAssignmentProficiencyValue,\"min-value\":e.selectedAssignmentMinProficiencyValue}}),e._v(\" \"),n(\"Achievements\",{attrs:{assignment:e.selectedAssignmentData,\"competency-id\":e.competencyId,\"user-id\":e.userId}})],1):n(\"div\",{staticClass:\"tui-competencyDetail__body-empty\"},[e._v(\"\\n          \"+e._s(e.$str(\"no_active_assignments\",\"totara_competency\"))+\"\\n        \")])])],1)]},proxy:!0}:null,{key:\"modals\",fn:function(){return[n(\"ModalPresenter\",{attrs:{open:e.activityLogModalOpen},on:{\"request-close\":e.closeActivityLogModal}},[n(\"Modal\",{attrs:{size:\"sheet\"}},[n(\"ActivityLog\",{attrs:{\"competency-id\":e.competencyId,\"user-id\":e.userId}})],1)],1),e._v(\" \"),n(\"ModalPresenter\",{attrs:{open:e.archivedAssignmentModalOpen},on:{\"request-close\":e.closeArchivedAssignmentModal}},[n(\"Modal\",{attrs:{size:\"sheet\"}},[n(\"ArchivedAssignments\",{attrs:{\"competency-id\":e.competencyId,\"user-id\":e.userId}})],1)],1)]},proxy:!0}],null,!0)})}),[],!1,null,null,null);\"function\"==typeof M&&M(B),B.options.__hasBlocks={script:!0,template:!0};t.default=B.exports},\"/gTP\":function(e,t,n){var i={\"./CompetencyDetail\":\"/bax\",\"./CompetencyDetail.vue\":\"/bax\",\"./CompetencyProfile\":\"4roC\",\"./CompetencyProfile.vue\":\"4roC\",\"./CompetencySummary\":\"CAFL\",\"./CompetencySummary.vue\":\"CAFL\",\"./UserAssignment\":\"H8/h\",\"./UserAssignment.vue\":\"H8/h\"};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id=\"/gTP\"},\"/sVv\":function(e,t,n){\"use strict\";var i=n(\"AY6a\");n.n(i).a},\"0Ys5\":function(e,t,n){},\"0tPA\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"KGot\"),a=n.n(i),s=n(\"5qAA\"),r=n.n(s),o=n(\"8n92\"),c=n.n(o),l=n(\"JThd\"),d=n.n(l),u=n(\"yikf\"),m=n.n(u),p={components:{Cell:a.a,HeaderCell:r.a,MyRatingCell:c.a,CheckSuccess:d.a,Table:m.a},props:{competencies:{required:!0,type:Array},isMine:{required:!0,type:Boolean},archived:{required:!0,type:Boolean},baseUrl:{required:!0,type:String},userId:{required:!0,type:Number}},computed:{groupedCompetencyData(){return this.competencies.map(e=>({id:e.competency.id,rows:e.items.map(t=>Object.assign({competency:e.competency},t))}))},nameCellSize(){return this.archived?\"3\":\"5\"}},methods:{competencyDetailsLink(e){const t={competency_id:e.competency.id};return this.isMine||(t.user_id=this.userId),this.$url(this.baseUrl+\"/details/index.php\",t)}}},_=n(\"KHd+\"),v=function(e){e.options.__langStrings={core:[\"no\",\"yes\"],totara_competency:[\"header_competency\",\"header_reason_assigned\",\"header_archived_date\",\"proficient\",\"achievement_level\"]}},y=Object(_.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Table\",{attrs:{data:e.groupedCompetencyData,\"group-mode\":\"\",archived:e.archived},scopedSlots:e._u([{key:\"header-row\",fn:function(){return[n(\"HeaderCell\",{attrs:{size:e.nameCellSize}},[e._v(\"\\n      \"+e._s(e.$str(\"header_competency\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),e.archived?n(\"HeaderCell\",{attrs:{size:\"2\"}},[e._v(\"\\n      \"+e._s(e.$str(\"header_archived_date\",\"totara_competency\"))+\"\\n    \")]):e._e(),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"2\"}},[e._v(\"\\n      \"+e._s(e.$str(\"header_reason_assigned\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"2\",align:\"center\"}},[e._v(\"\\n      \"+e._s(e.$str(\"proficient\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"2\"}},[e._v(\"\\n      \"+e._s(e.$str(\"achievement_level\",\"totara_competency\"))+\"\\n    \")])]},proxy:!0},{key:\"row\",fn:function(t){var i=t.row,a=t.firstInGroup;return[n(\"Cell\",{attrs:{size:e.nameCellSize,\"column-header\":e.$str(\"header_competency\",\"totara_competency\"),\"repeated-header\":!a}},[n(\"a\",{attrs:{href:e.competencyDetailsLink(i)}},[e._v(e._s(i.competency.fullname))])]),e._v(\" \"),e.archived?n(\"Cell\",{attrs:{size:\"2\",\"column-header\":e.$str(\"header_archived_date\",\"totara_competency\")}},[e._v(\"\\n      \"+e._s(i.assignment&&i.assignment.archived_at)+\"\\n    \")]):e._e(),e._v(\" \"),n(\"Cell\",{attrs:{size:\"2\",\"column-header\":e.$str(\"header_reason_assigned\",\"totara_competency\")}},[e._v(\"\\n      \"+e._s(i.assignment&&i.assignment.progress_name)+\"\\n    \")]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"2\",align:\"center\",\"column-header\":e.$str(\"proficient\",\"totara_competency\")}},[i.my_value&&i.my_value.proficient?n(\"CheckSuccess\",{attrs:{size:\"200\",alt:e.$str(\"yes\",\"core\")}}):n(\"span\",[n(\"span\",{attrs:{\"aria-hidden\":\"true\"}},[e._v(\"-\")]),e._v(\" \"),n(\"span\",{staticClass:\"sr-only\"},[e._v(e._s(e.$str(\"no\",\"core\")))])])],1),e._v(\" \"),n(\"Cell\",{attrs:{size:\"2\",\"column-header\":e.$str(\"achievement_level\",\"totara_competency\")}},[i.my_value?n(\"MyRatingCell\",{attrs:{value:i.my_value,\"rating-scale\":i.assignment.assignment_specific_scale}}):e._e()],1)]}}])})}),[],!1,null,null,null);\"function\"==typeof v&&v(y),y.options.__hasBlocks={script:!0,template:!0};t.default=y.exports},\"1LXY\":function(e,t){e.exports=tui.require(\"totara_competency/components/summary/LinkedCourses\")},\"1i2V\":function(e,t){e.exports=tui.require(\"tui/components/tabs/Tab\")},\"2z5M\":function(e,t,n){\"use strict\";var i=n(\"e7qB\");n.n(i).a},\"3WCR\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"jJ8l\"),a=n.n(i),s=n(\"E0Ja\"),r=n.n(s),o=n(\"rNse\"),c=n.n(o),l=n(\"NAOU\"),d=n.n(l),u=n(\"D9If\"),m=n.n(u),p=n(\"k7/G\"),_=n.n(p),v=n(\"BxDI\"),y=n.n(v),g=n(\"lLj0\"),h=n.n(g),f={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_achievement_criteria\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"summarized\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"Boolean\"}},defaultValue:{kind:\"BooleanValue\",value:!1},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_achievement_criteria\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"competency_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"competency_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"overall_aggregation\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"aggregation_type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"title\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"description\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"paths\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"pathway_type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"instance_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"title\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"sortorder\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"status\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"classification\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"scale_value\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"error\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"criteria_summary\"},arguments:[],directives:[{kind:\"Directive\",name:{kind:\"Name\",value:\"include\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"if\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"summarized\"}}}]}],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"item_type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"item_aggregation\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"error\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"items\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"error\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"description\"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]},k={components:{Card:a.a,Criteria:r.a,EditIcon:c.a,Grid:d.a,GridItem:m.a,OrBox:_.a,Separator:y.a,WarningIcon:h.a},props:{competencyId:{type:Number}},data:()=>({editUrl:\"\",paths:[]}),computed:{hasPathways(){return this.achievementConfiguration.paths&&this.achievementConfiguration.paths.length>0},pathGroups(){let e=[],t=null,n=this.paths,i=[];for(let a in n){let s=Object.assign({},n[a]);if(s.multiCriteria=s.criteria_summary.length>1,\"MULTIVALUE\"===s.classification)t?e.push({key:\"group-\"+a,scaleValues:[{value:this.$str(\"any_scale_value\",\"totara_competency\"),paths:[s]}]}):i.push({key:\"group-\"+a,scaleValues:[{value:this.$str(\"any_scale_value\",\"totara_competency\"),paths:[s]}]});else{t||(t={key:\"group-\"+a,scaleValues:[]});let e=t.scaleValues.findIndex(e=>e.value===s.scale_value);-1===e&&(e=t.scaleValues.length,t.scaleValues.push({value:s.scale_value,paths:[]})),t.scaleValues[e].paths.push(s)}}return t?[].concat(i,t,e):i}},apollo:{achievementConfiguration:{query:f,variables(){return{competency_id:this.competencyId,summarized:!0}},update({totara_competency_achievement_criteria:e}){return this.editUrl=this.$url(\"/totara/competency/competency_edit.php\",{s:\"achievement_paths\",id:this.competencyId}),this.paths=e.paths,e}}}},b=(n(\"luBG\"),n(\"KHd+\")),N=function(e){e.options.__langStrings={core:[\"edit\"],totara_competency:[\"achievement_paths\",\"overall_rating_calc\",\"any_scale_value\",\"no_paths\"]}},S=Object(b.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-competencySummaryAchievementConfiguration\"},[n(\"div\",{staticClass:\"tui-competencySummary__sectionHeader\"},[n(\"h3\",{staticClass:\"tui-competencySummary__sectionHeader-title\"},[e._v(\"\\n      \"+e._s(e.$str(\"achievement_paths\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"a\",{staticClass:\"tui-competencySummary__sectionHeader-edit\",attrs:{href:e.editUrl,title:e.$str(\"edit\",\"core\")}},[n(\"EditIcon\",{attrs:{size:200,alt:e.$str(\"edit\",\"core\")}})],1)]),e._v(\" \"),!e.$apollo.loading&&e.hasPathways?[n(\"div\",{staticClass:\"tui-competencySummaryAchievementConfiguration__aggregation\"},[n(\"span\",{staticClass:\"tui-competencySummaryAchievementConfiguration__aggregation-label\"},[e._v(\"\\n        \"+e._s(e.$str(\"overall_rating_calc\",\"totara_competency\"))+\"\\n      \")]),e._v(\"\\n\\n      \"+e._s(e.achievementConfiguration.overall_aggregation.title)+\"\\n    \")]),e._v(\" \"),e._l(e.pathGroups,(function(t,i){return n(\"Card\",{key:\"pathGroup\"+i},[n(\"div\",{staticClass:\"tui-competencySummaryAchievementConfiguration__pathGroup\"},e._l(t.scaleValues,(function(t,i){return n(\"Grid\",{key:\"scaleValue\"+i,staticClass:\"tui-competencySummaryAchievementConfiguration__scaleValue\",attrs:{\"stack-at\":700}},[n(\"GridItem\",{attrs:{units:2}},[n(\"h4\",{staticClass:\"tui-competencySummaryAchievementConfiguration__scaleValue-header\"},[e._v(\"\\n              \"+e._s(t.value)+\"\\n            \")])]),e._v(\" \"),n(\"GridItem\",{attrs:{units:10}},e._l(t.paths,(function(t,i){return n(\"div\",{key:t.id},[i?n(\"Separator\",{staticClass:\"tui-competencySummaryAchievementConfiguration__scaleValue-or\"},[n(\"OrBox\")],1):e._e(),e._v(\" \"),n(\"Criteria\",{attrs:{path:t}})],1)})),0)],1)})),1)])}))]:e.$apollo.loading?e._e():n(\"div\",{staticClass:\"tui-competencySummaryAchievementConfiguration__noPaths\"},[n(\"WarningIcon\"),e._v(\" \"+e._s(e.$str(\"no_paths\",\"totara_competency\"))+\"\\n  \")],1)],2)}),[],!1,null,null,null);\"function\"==typeof N&&N(S),S.options.__hasBlocks={script:!0,template:!0};t.default=S.exports},\"3fD/\":function(e,t){e.exports=tui.require(\"tui_charts/components/ChartJs\")},\"3gXZ\":function(e,t,n){},\"3kcf\":function(e,t){e.exports=tui.require(\"tui/components/filters/MultiSelectFilter\")},\"3qNn\":function(e,t,n){},\"3s/G\":function(e,t){e.exports=tui.require(\"totara_competency/components/summary/AchievementConfiguration\")},\"49h4\":function(e,t){e.exports=tui.require(\"tui/components/filters/SelectFilter\")},\"4Zth\":function(e,t,n){\"use strict\";var i=n(\"0Ys5\");n.n(i).a},\"4roC\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"fCWf\"),a=n.n(i),s=n(\"vqlw\"),r=n.n(s),o=n(\"NUDN\"),c=n.n(o),l=n(\"Vpbp\"),d=n.n(l),u=n(\"Yoo0\"),m=n.n(u),p=n(\"D6uX\"),_=n.n(p),v=n(\"JXQf\"),y=n.n(v),g=n(\"+MEP\"),h=n.n(g),f=n(\"epks\"),k=n.n(f),b=n(\"zdti\"),N=n.n(b),S=n(\"g8/U\"),C=n.n(S),A=n(\"51bi\"),F=n.n(A),x=n(\"dtfu\"),w=n.n(x),$=n(\"kV+/\"),I=n.n($),q=n(\"/X/1\"),V=n.n(q),D=n(\"vyVp\"),P=n(\"TXEh\"),T={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_progress_for_user\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"filters\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"totara_competency_profile_assignment_filters\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_profile_progress\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"filters\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"filters\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"user\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"items\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"overall_progress\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"items\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"min_value\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"percentage\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"proficient\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"my_value\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"percentage\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"proficient\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"competency\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]}]}}]}}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"filters\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"status_name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"status\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_group_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_group_type\"},arguments:[],directives:[]}]}}]}}]}}]},O=n(\"wMJ/\");var M={components:{ActionLink:a.a,BarChartIcon:r.a,CompetencyCharts:c.a,CompetencyList:d.a,CurrentProgress:m.a,ListIcon:_.a,Loader:y.a,MiniProfileCard:h.a,NoCompetencyAssignments:k.a,NotificationBanner:N.a,PageHeading:C.a,ProgressAssignmentFilters:F.a,Responsive:w.a,ToggleButton:I.a,ToggleSet:V.a},props:{selfAssignmentUrl:{required:!0,type:String},userId:{required:!0,type:Number},baseUrl:{required:!0,type:String},isMine:{required:!0,type:Boolean},canRateCompetencies:{required:!0,type:Boolean},toastMessage:{type:String},hasPendingAggregation:{type:Boolean},canAssign:Boolean},data(){return{data:{},user:null,activeTab:\"charts\",selectedFilters:this.$_addFilterKey({status:1,type:null,user_group_id:null,user_group_type:null}),currentProgressData:[]}},apollo:{data:{query:T,variables(){return{user_id:this.userId,filters:Object(P.pick)(this.selectedFilters,[\"status\",\"type\",\"user_group_id\",\"user_group_type\"])}},update:e=>e.totara_competency_profile_progress,result({data:{totara_competency_profile_progress:e}}){if(1!=this.selectedFilters.status||this.currentProgressData.length||(this.currentProgressData=e.items.slice(0)),e.filters&&e.filters.length){const t=this.selectedFilters,n=null===t.type&&null===t.user_group_id&&null===t.user_group_type;(n?e.filters.some(e=>e.status==this.selectedFilters.status):e.filters.some(e=>this.$_filterKey(e)==this.selectedFilters.key))||(this.selectedFilters=this.$_addFilterKey(n?{status:e.filters[0].status,type:null,user_group_id:null,user_group_type:null}:e.filters[0]))}}},user:{query:O.a,variables(){return{user_id:this.userId}},update:e=>e.totara_competency_user,skip(){return this.isMine}}},computed:{filterOptions(){return this.data&&this.data.filters?Object.entries(Object(P.groupBy)(this.data.filters,e=>e.status)).map(([e,t])=>{const n=this.$_addFilterKey({status:t[0].status,type:null,user_group_id:null,user_group_type:null});return{id:n.key,name:t[0].status_name,value:n,filters:t.map(e=>{const t=this.$_addFilterKey(this.$_filterValue(e));return{id:t.key,name:e.name,value:t}})}}):[]},noAssignments(){return!this.$apollo.loading&&!this.filterOptions.length},rateCompetenciesUrl(){return this.canRateCompetencies?this.$url(\"/totara/competency/rate_competencies.php\",{user_id:this.userId}):null}},mounted(){this.toastMessage&&Object(D.notify)({message:this.toastMessage})},methods:{$_filterValue:e=>Object(P.pick)(e,[\"status\",\"type\",\"user_group_id\",\"user_group_type\"]),$_addFilterKey(e){return Object.assign({key:this.$_filterKey(e)},e)},$_filterKey:e=>JSON.stringify([e.status,e.type,e.user_group_id,e.user_group_type])}},B=(n(\"fCaH\"),n(\"KHd+\")),L=function(e){e.options.__langStrings={totara_competency:[\"assign_competencies\",\"competency_profile\",\"current_assignment_progress\",\"header_competencies\",\"self_assign_competencies\",\"toggle_charts\",\"toggle_competency_view_format\",\"toggle_table\",\"warning_pending_aggregation_profile\"],pathway_manual:[\"rate_competencies\"]}},E=Object(B.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Loader\",{attrs:{loading:e.$apollo.loading}},[n(\"div\",{staticClass:\"tui-competencyProfile\"},[e.hasPendingAggregation?n(\"NotificationBanner\",{attrs:{type:\"warning\",message:e.$str(\"warning_pending_aggregation_profile\",\"totara_competency\")}}):e._e(),e._v(\" \"),n(\"div\",{staticClass:\"tui-competencyProfile__header\"},[e.user&&!e.isMine?n(\"MiniProfileCard\",{attrs:{display:e.user.card_display}}):e._e(),e._v(\" \"),n(\"PageHeading\",{attrs:{title:e.$str(\"competency_profile\",\"totara_competency\")}})],1),e._v(\" \"),e.noAssignments?n(\"NoCompetencyAssignments\",{attrs:{\"is-mine\":e.isMine,\"is-assign-enabled\":e.canAssign,\"self-assignment-url\":e.selfAssignmentUrl}}):n(\"div\",[n(\"div\",{staticClass:\"tui-competencyProfile__currentHeading\"},[n(\"h3\",{staticClass:\"tui-competencyProfile__currentHeading-title\"},[e._v(\"\\n          \"+e._s(e.$str(\"current_assignment_progress\",\"totara_competency\"))+\"\\n        \")]),e._v(\" \"),e.noAssignments?e._e():n(\"div\",{staticClass:\"tui-competencyProfile__currentHeading-buttons\"},[e.rateCompetenciesUrl?n(\"ActionLink\",{attrs:{href:e.rateCompetenciesUrl,text:e.$str(\"rate_competencies\",\"pathway_manual\")}}):e._e(),e._v(\" \"),e.canAssign?n(\"ActionLink\",{attrs:{href:e.selfAssignmentUrl,text:e.$str(e.isMine?\"self_assign_competencies\":\"assign_competencies\",\"totara_competency\")}}):e._e()],1)]),e._v(\" \"),n(\"CurrentProgress\",{attrs:{data:e.currentProgressData,\"is-current-user\":e.isMine}}),e._v(\" \"),n(\"Responsive\",{staticClass:\"tui-competencyProfile__competencies\",attrs:{breakpoints:[{name:\"small\",boundaries:[0,700]},{name:null,boundaries:[701,701]}]},scopedSlots:e._u([{key:\"default\",fn:function(t){var i=t.currentBoundaryName;return[n(\"div\",{staticClass:\"tui-competencyProfile__competencies-content\"},[n(\"h3\",{staticClass:\"tui-competencyProfile__sectionTitle\"},[e._v(\"\\n            \"+e._s(e.$str(\"header_competencies\",\"totara_competency\"))+\"\\n          \")]),e._v(\" \"),n(\"div\",{staticClass:\"tui-competencyProfile__filtersBar\"},[n(\"ProgressAssignmentFilters\",{attrs:{filters:e.filterOptions},model:{value:e.selectedFilters,callback:function(t){e.selectedFilters=t},expression:\"selectedFilters\"}}),e._v(\" \"),\"small\"!=i?n(\"div\",{staticClass:\"tui-competencyProfile__tabs\"},[n(\"ToggleSet\",{attrs:{\"aria-label\":e.$str(\"toggle_competency_view_format\",\"totara_competency\")},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:\"activeTab\"}},[n(\"ToggleButton\",{attrs:{value:\"charts\",\"aria-label\":e.$str(\"toggle_charts\",\"totara_competency\")}},[n(\"BarChartIcon\")],1),e._v(\" \"),n(\"ToggleButton\",{attrs:{value:\"table\",\"aria-label\":e.$str(\"toggle_table\",\"totara_competency\")}},[n(\"ListIcon\")],1)],1)],1):e._e()],1),e._v(\" \"),\"small\"!=i&&\"charts\"===e.activeTab?n(\"div\",[n(\"CompetencyCharts\",{attrs:{data:e.data,\"user-id\":e.userId,\"is-current-user\":e.isMine}})],1):e._e(),e._v(\" \"),\"small\"==i||\"table\"===e.activeTab?n(\"div\",[n(\"CompetencyList\",{attrs:{filters:e.selectedFilters,\"user-id\":e.userId,\"is-mine\":e.isMine,\"base-url\":e.baseUrl}})],1):e._e()])]}}])})],1)],1)])}),[],!1,null,null,null);\"function\"==typeof L&&L(E),E.options.__hasBlocks={script:!0,template:!0};t.default=E.exports},\"4ys3\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"wcN6\"),a=n.n(i),s=n(\"WBvU\"),r=n(\"csKv\"),o=n.n(r),c=n(\"MAAM\"),l=n.n(c),d=n(\"+Gia\"),u=n.n(d),m={components:{Field:a.a,FormRowStack:o.a,FormCheckbox:s.FormCheckbox,FormRow:s.FormRow,HelpIcon:l.a,SelectParticipant:u.a},inheritAttrs:!1,props:{relationships:Array}},p=(n(\"lQjX\"),n(\"KHd+\")),_=function(e){e.options.__langStrings={totara_competency:[\"enable_performance_rating\",\"enable_performance_rating_help\",\"enable_performance_rating_participant\",\"enable_performance_rating_participant_help\"]}},v=Object(p.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"FormRowStack\",{attrs:{spacing:\"large\"}},[n(\"FormRow\",[n(\"FormCheckbox\",{attrs:{name:\"enable_rating\"}},[e._v(\"\\n      \"+e._s(e.$str(\"enable_performance_rating\",\"totara_competency\"))+\"\\n      \"),n(\"HelpIcon\",{staticClass:\"tui-linkedReviewAdminEditCompetency__help\",attrs:{\"desc-id\":e.$id(\"rating-help\"),helpmsg:e.$str(\"enable_performance_rating_help\",\"totara_competency\"),size:\"md\"}})],1)],1),e._v(\" \"),n(\"Field\",{attrs:{name:\"enable_rating\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[t.value?n(\"SelectParticipant\",{attrs:{\"field-name\":\"rating_relationship\",\"help-msg\":e.$str(\"enable_performance_rating_participant_help\",\"totara_competency\"),label:e.$str(\"enable_performance_rating_participant\",\"totara_competency\"),relationships:e.relationships}}):e._e()]}}])})],1)}),[],!1,null,null,null);\"function\"==typeof _&&_(v),v.options.__hasBlocks={script:!0,template:!0};t.default=v.exports},\"51bi\":function(e,t){e.exports=tui.require(\"totara_competency/components/ProgressAssignmentFilters\")},\"554a\":function(e,t){e.exports=tui.require(\"tui/components/filters/FilterSidePanel\")},\"59Wj\":function(e,t){e.exports=tui.require(\"tui/components/filters/FilterBar\")},\"5h9J\":function(e,t){e.exports=tui.require(\"tui/components/buttons/ButtonIcon\")},\"5qAA\":function(e,t){e.exports=tui.require(\"tui/components/datatable/HeaderCell\")},\"6Nah\":function(e,t){e.exports=tui.require(\"totara_competency/components/adder/AssignedCompetencyAdder\")},\"6RY8\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"cHhT\"),a={components:{ParticipantContent:n.n(i).a},methods:{getPreviewData(){return{competency:{display_name:this.$str(\"example_competency_title\",\"totara_competency\"),description:this.$str(\"example_competency_description\",\"totara_competency\")},assignment:{reason_assigned:this.$str(\"assignment_reason_self\",\"totara_competency\")},achievement:{id:\"1\",name:this.$str(\"rating_value\",\"totara_competency\",1),proficient:!0},scale_values:[{id:\"1\",name:this.$str(\"rating_value\",\"totara_competency\",1),proficient:!0},{id:\"2\",name:this.$str(\"rating_value\",\"totara_competency\",2),proficient:!1},{id:\"3\",name:this.$str(\"rating_value\",\"totara_competency\",3),proficient:!1}]}}}},s=n(\"KHd+\"),r=function(e){e.options.__langStrings={totara_competency:[\"assignment_reason_self\",\"example_competency_description\",\"example_competency_title\",\"rating_value\"]}},o=Object(s.a)(a,(function(){var e=this.$createElement;return(this._self._c||e)(\"ParticipantContent\",{attrs:{content:this.getPreviewData(),preview:!0}})}),[],!1,null,null,null);\"function\"==typeof r&&r(o),o.options.__hasBlocks={script:!0,template:!0};t.default=o.exports},\"7OoD\":function(e,t){e.exports=tui.require(\"totara_competency/components/details/ActivityLogTable\")},\"7rD8\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"Ygam\"),a=n.n(i),s=n(\"JXQf\"),r=n.n(s),o=n(\"qGal\"),c=n(\"gqVV\"),l={components:{ArchivedAssignmentsTable:a.a,Loader:r.a},props:{userId:{required:!0,type:Number},competencyId:{required:!0,type:Number}},data:function(){return{data:{competency:{},items:[]}}},apollo:{data:{query:c.a,fetchPolicy:\"network-only\",variables(){return{user_id:this.userId,competency_id:this.competencyId,status:o.ASSIGNMENT_ARCHIVED}},update:({totara_competency_profile_competency_details:{competency:e,items:t}})=>({competency:e,items:t})}},computed:{archivedAssignmentList(){let e=[];return e=this.data.items.map((function(e){let t=null;return t=e.assignment.archived_at?e.assignment.archived_at:e.assignment.unassigned_at,{name:e.assignment.progress_name,archivedAt:t,legacy:\"legacy\"===e.assignment.type,proficient:e.my_value.proficient}})),e}}},d=(n(\"ymIi\"),n(\"KHd+\")),u=function(e){e.options.__langStrings={totara_competency:[\"archived_assignments\"]}},m=Object(d.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"tui-competencyDetailArchivedAssignments\"},[t(\"h4\",{staticClass:\"tui-competencyDetailArchivedAssignments__title\"},[this._v(\"\\n    \"+this._s(this.$str(\"archived_assignments\",\"totara_competency\"))+\"\\n  \")]),this._v(\" \"),t(\"Loader\",{attrs:{loading:this.$apollo.loading}},[t(\"ArchivedAssignmentsTable\",{attrs:{assignments:this.archivedAssignmentList}})],1)],1)}),[],!1,null,null,null);\"function\"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0};t.default=m.exports},\"7roX\":function(e,t,n){},\"8DMs\":function(e,t,n){},\"8Lk7\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"AFyC\"),a={components:{AssignmentProgress:n.n(i).a},props:{data:{required:!0,type:Array},isCurrentUser:{type:Boolean,required:!0}}},s=(n(\"/sVv\"),n(\"KHd+\")),r=function(e){e.options.__langStrings={totara_competency:[\"no_current_assignments_other\",\"no_current_assignments_self\"]}},o=Object(s.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"tui-competencyProfileCurrentProgress\"},[this.data.length?t(\"ul\",{staticClass:\"tui-competencyProfileCurrentProgress__progress\"},this._l(this.data,(function(e,n){return t(\"li\",{key:n},[t(\"AssignmentProgress\",{attrs:{progress:e}})],1)})),0):t(\"div\",{staticClass:\"tui-competencyProfileCurrentProgress__empty\"},[this._v(\"\\n    \"+this._s(this.$str(this.isCurrentUser?\"no_current_assignments_self\":\"no_current_assignments_other\",\"totara_competency\"))+\"\\n  \")])])}),[],!1,null,null,null);\"function\"==typeof r&&r(o),o.options.__hasBlocks={script:!0,template:!0};t.default=o.exports},\"8QXL\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"3fD/\"),a=n.n(i),s=n(\"i3se\"),r=n.n(s),o=n(\"TXEh\");let c=(e,t,n)=>({x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}),l=(e,t,n,i)=>{let a=e.offsetX,s=e.offsetY,r=n.helpers,o=t.ctx;if(\"bar\"===t.config.type){let n=t.getElementsAtEvent(e);if(n.length>0){let e=n[0]._index;return void 0!==i.data.competencies[e]?i.data.competencies[e]:null}let r=t.scales[\"x-axis-0\"],l=4,d=null;return r._computeLabelItems().forEach(e=>{let t=e.x,n=e.y,r=e.rotation,u=Math.abs(r)>=.001,{width:m,height:p}=function(e,t){let n=t.label,i=0;return e.font=t.font.fontString,void 0!==n&&\"\"!==(\"\"+n).trim()&&(i=e.measureText(n).width),{width:i,height:t.font.lineHeight}}(o,e);if(0===m)return;m+=l,p+=l;let _=-m,v=_,y=p/-2,g=p/-2,h=p/2,f=p/2,k={x:m/-2,y:-l/2},b={x:m/2,y:-l/2},N={x:b.x,y:p-l/2},S={x:k.x,y:p-l/2};if(u&&(k=c(_,y,r),b=c(0,g,r),N=c(0,h,r),S=c(v,f,r)),((e,t,n,i,a,s,r,o,c,l)=>{let d=Math.sqrt(Math.pow(n-a,2)+Math.pow(i-s,2)),u=Math.sqrt(Math.pow(a-r,2)+Math.pow(s-o,2)),m=Math.sqrt(Math.pow(r-c,2)+Math.pow(o-l,2)),p=Math.sqrt(Math.pow(c-n,2)+Math.pow(l-i,2)),_=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2)),v=Math.sqrt(Math.pow(a-e,2)+Math.pow(s-t,2)),y=Math.sqrt(Math.pow(r-e,2)+Math.pow(o-t,2)),g=Math.sqrt(Math.pow(c-e,2)+Math.pow(l-t,2)),h=(d+_+v)/2,f=(u+v+y)/2,k=(m+y+g)/2,b=(p+g+_)/2,N=Math.sqrt(h*(h-d)*(h-_)*(h-v)),S=Math.sqrt(f*(f-u)*(f-v)*(f-y)),C=Math.sqrt(k*(k-m)*(k-y)*(k-g)),A=Math.sqrt(b*(b-p)*(b-g)*(b-_));return Math.round(N+S+C+A)===Math.round(d*u)})(a,s,t+k.x,n+k.y,t+b.x,n+b.y,t+N.x,n+N.y,t+S.x,n+S.y)){i.debug&&(o.save(),o.strokeStyle=\"red\",o.lineWidth=1,o.beginPath(),o.moveTo(t+k.x,n+k.y),o.lineTo(t+b.x,n+b.y),o.lineTo(t+N.x,n+N.y),o.lineTo(t+S.x,n+S.y),o.lineTo(t+k.x,n+k.y),o.stroke(),o.restore(),console.log(\"SCIENCE, B!\"));let a=i.assignmentProgress.items.find(t=>t.competency.fullname===e.label);a&&(d=a)}else i.debug&&console.log(\"OUTSIDE\")}),d?d.competency.id:null}let l=t.scale,d=l.options,u=d.ticks,m=u.display&&d.display?r.valueOrDefault(u.fontSize,n.defaults.global.defaultFontSize)+5:0,p=l.getDistanceFromCenterForValue(d.ticks.reverse?l.min:l.max);for(let e=0;e<l.pointLabels.length;e++){let t=0===e?m/2:0,n=l.getPointPosition(e,p+t+5),c=l._pointLabelSizes[e],d=l.getIndexAngle(e),u=r.toDegrees(d),_=\"right\";0===u||180===u?_=\"center\":u<180&&(_=\"left\");let v=0;90===u||270===u?v=c.h/2:(u>270||u<90)&&(v=c.h);let y,g=n.y-v-5,h=10+c.h,f=g+h,k=c.w+10;switch(_){case\"center\":y=n.x-k/2;break;case\"left\":y=n.x-5;break;case\"right\":y=n.x-k+5;break;default:console.log(\"ERROR: unknown textAlign \"+_)}let b=y+k;if(i.debug&&(o.save(),o.strokeStyle=\"red\",o.lineWidth=1,o.strokeRect(y,g,k,h),o.restore()),a>=y&&a<=b&&s<=f&&s>=g)return i.data.competencies[e]}return null};var d={components:{ChartJs:a.a},props:{assignmentProgress:{required:!0,type:Object},userId:{type:Number,required:!0},isCurrentUser:{type:Boolean,required:!0},debug:{type:Boolean,default:!1}},data(){let e=this.assignmentProgress.items.map(e=>e.competency.fullname);return e.length<=2&&(e.unshift([\"\"]),e.push([\"\"])),{labels:e}},computed:{options:function(){let e=this,t={tooltips:{filter(e,t){let n=t.labels[e.index];return[\"\"].indexOf(n.join(\" \").trim())}},legend:{position:\"bottom\",display:!0,labels:{boxWidth:15,lineWidth:0,padding:25}}};if(\"radar\"===this.type)t.scale={pointLabels:{fontSize:12,fontColor:r.a.getVar(\"color-state\")},ticks:{beginAtZero:!0,display:!1,max:100}};else{let e=this.assignmentProgress.items.slice(0,1).pop(),n=this.assignmentProgress.items.slice(-1).pop();e&&(e=e.competency.fullname),n&&(n=n.competency.fullname,this.assignmentProgress.items.length<=2&&(n=\"   \")),t.scales={yAxes:[{ticks:{beginAtZero:!0,display:!1,fontSize:12,max:110}}],xAxes:[{ticks:{min:e,max:n,fontSize:12,fontColor:r.a.getVar(\"color-state\")}}]}}return t.tooltips.callbacks={title:t=>Object(o.unique)(t.map(e=>e.index)).map(t=>e.shorten(e.labels[t],60)).reduce((e,t)=>(t.map(t=>e.push(t)),e),[]),label:e.getToolTipText},t},data:function(){let e={labels:[],competencies:[],datasets:[{label:this.$str(\"achievement_level\",\"totara_competency\"),backgroundColor:r.a.getVar(\"color-chart-transparent-1\"),borderColor:r.a.getVar(\"color-chart-background-1\"),borderWidth:2,data:[],values:[]},{label:this.$str(\"proficiency_level\",\"totara_competency\"),backgroundColor:\"bar\"===this.type?\"transparent\":r.a.getVar(\"color-chart-transparent-4\"),borderColor:r.a.getVar(\"color-chart-background-4\"),pointBorderColor:r.a.getVar(\"color-chart-background-4\"),pointBackgroundColor:r.a.getVar(\"color-chart-background-4\"),borderWidth:2,steppedLine:\"middle\",data:[],values:[]}]};if(this.assignmentProgress.items.forEach(function(t){e.competencies.push(t.competency.id),e.labels.push(this.shorten(t.competency.fullname,35)),e.datasets[0].data.push(t.my_value.percentage),e.datasets[1].data.push(t.min_value.percentage),e.datasets[0].values.push(t.my_value.name),e.datasets[1].values.push(t.min_value.name)}.bind(this)),\"bar\"===this.type&&(e.datasets[1].type=\"line\",e.datasets[0].data.length)){const t=e.datasets[1].data.slice(0,1).pop(),n=e.datasets[1].data.slice(-1).pop();this.assignmentProgress.items.length<=2&&(e.datasets[0].data.unshift(null),e.datasets[1].data.unshift(t),e.datasets[0].data.push(null),e.datasets[1].data.push(n),e.labels.unshift([\"\"]),e.labels.push([\"\"]),e.competencies.unshift(null),e.competencies.push(null))}return e},type:function(){return this.assignmentProgress.items.length<=2||this.assignmentProgress.items.length>=12?\"bar\":\"radar\"}},methods:{competencyLink(e){const t={competency_id:e};return this.isMine||(t.user_id=this.userId),this.$url(\"/totara/competency/profile/details/index.php\",t)},chartHovered(e,t,n,i){requestAnimationFrame(()=>{l(e,n,i,this)?e.target.style.cursor=\"pointer\":e.target.style.cursor=\"auto\"})},chartClicked(e,t,n,i){let a=l(e,n,i,this);a&&(window.location.href=this.competencyLink(a))},getDataIndex(e){return this.assignmentProgress.items.length>2?e:e-1},getToolTipText(e,t){const n=this.getDataIndex(e.index),i=t.datasets[e.datasetIndex].label||\"\";let a=\"\";switch(e.datasetIndex){case 0:a=this.assignmentProgress.items[n].my_value.name;break;case 1:a=this.assignmentProgress.items[n].min_value.name}return i+\": \"+a},shorten:function(e,t,n=\" \"){let i,a=[],s=0;if(!e)return[\"\"];if(e.length<=t)return[e.trim()];for(let r=0;r<2;r++){if(s+t>=e.length){a.push(e.substr(s).trim());break}{i=e.lastIndexOf(n,s+t);let o=e.substr(s,i-s).trim();s=i+1,1===r&&(o+=String.fromCharCode(8230)),a.push(o)}}return a}}},u=n(\"KHd+\"),m=function(e){e.options.__langStrings={totara_competency:[\"proficient\",\"not_proficient\",\"proficiency_level\",\"achievement_level\"]}},p=Object(u.a)(d,(function(){var e=this.$createElement;return(this._self._c||e)(\"ChartJs\",{attrs:{type:this.type,data:this.data,options:this.options,header:this.assignmentProgress.name},on:{click:this.chartClicked,hover:this.chartHovered}})}),[],!1,null,null,null);\"function\"==typeof m&&m(p),p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},\"8n92\":function(e,t){e.exports=tui.require(\"totara_competency/components/profile/MyRatingCell\")},\"9G+f\":function(e,t){e.exports=tui.require(\"tui/components/popover/Popover\")},\"9vC/\":function(e,t,n){\"use strict\";var i=n(\"oaAl\");n.n(i).a},AENL:function(e,t){e.exports=tui.require(\"totara_competency/components/user_assignment/SelectionTable\")},AFyC:function(e,t){e.exports=tui.require(\"totara_competency/components/AssignmentProgress\")},AY6a:function(e,t,n){},BAjG:function(e,t,n){!function(){\"use strict\";\"undefined\"!=typeof tui&&tui._bundle.isLoaded(\"totara_competency\")?console.warn('[tui bundle] The bundle \"totara_competency\" is already loaded, skipping initialisation.'):(tui._bundle.register(\"totara_competency\"),tui._bundle.addModulesFromContext(\"totara_competency\",n(\"vMqX\")),tui._bundle.addModulesFromContext(\"totara_competency/components\",n(\"W+j5\")),tui._bundle.addModulesFromContext(\"totara_competency/pages\",n(\"/gTP\")))}()},BbQS:function(e,t,n){\"use strict\";var i=n(\"7roX\");n.n(i).a},BxDI:function(e,t){e.exports=tui.require(\"tui/components/decor/Separator\")},\"C+/B\":function(e,t){e.exports=tui.require(\"tui/components/modal/ConfirmationModal\")},C4bi:function(e,t){e.exports=tui.require(\"totara_competency/components/details/ProficientStatus\")},C4mR:function(e,t,n){\"use strict\";var i=n(\"KDHu\");n.n(i).a},CAFL:function(e,t,n){\"use strict\";n.r(t);var i=n(\"3s/G\"),a=n.n(i),s=n(\"bAb2\"),r=n.n(s),o=n(\"1LXY\"),c=n.n(o),l=n(\"zdti\"),d=n.n(l),u=n(\"g8/U\"),m=n.n(u),p={components:{AchievementConfiguration:a.a,General:r.a,LinkedCourses:c.a,NotificationBanner:d.a,PageHeading:m.a},props:{achievementPathWarningMessage:{type:String,required:!0},competencyId:{type:Number,required:!0},competencyName:{type:String,required:!0},frameworkId:{type:Number,required:!0},frameworkName:{type:String,required:!0},performEnabled:{type:Boolean,required:!0}},computed:{backLinkUrl(){return this.$url(\"/totara/hierarchy/index.php\",{prefix:\"competency\",frameworkid:this.frameworkId})}}},_=(n(\"nvA/\"),n(\"KHd+\")),v=function(e){e.options.__langStrings={totara_competency:[\"back_to\"],totara_hierarchy:[\"competency_title\"]}},y=Object(_.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-competencySummary\"},[n(\"div\",{staticClass:\"tui-competencySummary__header\"},[e.achievementPathWarningMessage?n(\"NotificationBanner\",{attrs:{type:\"warning\",message:e.achievementPathWarningMessage}}):e._e(),e._v(\" \"),n(\"a\",{staticClass:\"tui-competencySummary__header-backLink\",attrs:{href:e.backLinkUrl}},[e._v(\"\\n      \"+e._s(e.$str(\"back_to\",\"totara_competency\",e.frameworkName))+\"\\n    \")])],1),e._v(\" \"),n(\"div\",{staticClass:\"tui-competencySummary__content\"},[n(\"PageHeading\",{attrs:{title:e.$str(\"competency_title\",\"totara_hierarchy\",{framework:e.frameworkName,fullname:e.competencyName})}}),e._v(\" \"),n(\"General\",{attrs:{\"competency-id\":e.competencyId}}),e._v(\" \"),n(\"LinkedCourses\",{attrs:{\"competency-id\":e.competencyId}}),e._v(\" \"),e.performEnabled?n(\"AchievementConfiguration\",{attrs:{\"competency-id\":e.competencyId}}):e._e()],1)])}),[],!1,null,null,null);\"function\"==typeof v&&v(y),y.options.__hasBlocks={script:!0,template:!0};t.default=y.exports},CpVI:function(e,t,n){},D6uX:function(e,t){e.exports=tui.require(\"tui/components/icons/List\")},D9If:function(e,t){e.exports=tui.require(\"tui/components/grid/GridItem\")},DGVr:function(e,t,n){},DZZz:function(e,t,n){\"use strict\";var i=n(\"b5Rx\");n.n(i).a},E0Ja:function(e,t){e.exports=tui.require(\"totara_competency/components/summary/AchievementConfigurationCriteria\")},EkZJ:function(e,t){e.exports=tui.require(\"tui/components/progresstracker/ProgressTrackerNav\")},FBvN:function(e,t){e.exports=tui.require(\"tui/components/filters/SearchFilter\")},FKgf:function(e,t,n){\"use strict\";var i=n(\"We4D\");n.n(i).a},GfQT:function(e,t){e.exports=tui.require(\"performelement_linked_review/components/SelectContent\")},\"H8/h\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"xNwe\"),a=n.n(i),s=n(\"vF5l\"),r=n.n(s),o=n(\"5h9J\"),c=n.n(o),l=n(\"J1fj\"),d=n.n(l),u=n(\"C+/B\"),m=n.n(u),p={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"totara_competency_create_user_assignments\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_ids\"}},type:{kind:\"NonNullType\",type:{kind:\"ListType\",type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_create_user_assignments\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"competency_ids\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_ids\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]}]}}]}}]},_=n(\"554a\"),v=n.n(_),y=n(\"NAOU\"),g=n.n(y),h=n(\"D9If\"),f=n.n(h),k=n(\"JXQf\"),b=n.n(k),N=n(\"+MEP\"),S=n.n(N),C=n(\"3kcf\"),A=n.n(C),F=n(\"g8/U\"),x=n.n(F),w=n(\"FBvN\"),$=n.n(w),I=n(\"49h4\"),q=n.n(I),V=n(\"AENL\"),D=n.n(V),P=n(\"vyVp\"),T={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_user_assignable_competencies\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"filters\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"totara_competency_self_assigned_competencies_filter\"}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"order_by\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"String\"}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"order_dir\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"totara_competency_order_dir\"}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"cursor\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"String\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_user_assignable_competencies\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"filters\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"filters\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"order_by\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"order_by\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"order_dir\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"order_dir\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"cursor\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"cursor\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"items\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"display_name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"description\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_assignments\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_group_type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reason_assigned\"},arguments:[],directives:[]}]}}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"total\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"next_cursor\"},arguments:[],directives:[]}]}}]}}]},O=n(\"wMJ/\"),M={components:{Basket:a.a,Button:r.a,ButtonIcon:c.a,ClearIcon:d.a,ConfirmationModal:m.a,FilterSidePanel:v.a,Grid:g.a,GridItem:f.a,Loader:b.a,MiniProfileCard:S.a,MultiSelectFilter:A.a,PageHeading:x.a,SearchFilter:$.a,SelectFilter:q.a,SelectionTable:D.a},props:{basePageHeading:{required:!0,type:String},goBackLink:{required:!0,type:String},goBackText:{required:!0,type:String},frameworks:{required:!0,type:Array},types:{required:!0,type:Array},userId:{required:!0,type:Number},isMine:{required:!0,type:Boolean}},data(){return{allSelected:!1,selectedItems:[],isViewingSelections:!1,isShowingConfirmationModal:!1,isSaving:!1,data:{items:[],total:null,next_cursor:null},frameworkSelection:null,filters:{assignment_status:\"\",text:\"\",type:[]},activeFilterCount:0,assignmentStatusesOptions:[{id:\"\",label:this.$str(\"any\",\"totara_competency\")},{id:1,label:this.$str(\"currently_assigned\",\"totara_competency\")},{id:0,label:this.$str(\"not_assigned\",\"totara_competency\")}],basketActions:[{label:this.$str(\"assign_competencies\",\"totara_competency\"),action:this.showConfirmationModal}],user:null}},computed:{pageHeading(){return this.isViewingSelections?this.$str(\"view_selected_competencies\",\"totara_competency\"):this.basePageHeading},hasLoadedCompetencies(){return this.data&&null!==this.data.total},firstPageQueryVariables(){return{user_id:this.userId,filters:this.filtersForQuery,cursor:null}},subsequentPageQueryVariables(){return{user_id:this.userId,filters:this.filtersForQuery,cursor:this.data.next_cursor}},filtersForQuery(){return Object.assign({},this.filters,{framework:this.frameworkSelection})},hasEmptyResult(){return this.data&&0===this.data.total},isViewingDefaultOptions(){return null===this.frameworkSelection&&0===this.activeFilterCount},competencyTypeOptions(){return this.types.map(e=>({id:e.id,label:e.name}))},frameworkOptions(){return[{id:null,label:this.$str(\"filter_framework_all_frameworks\",\"totara_competency\")},...this.frameworks.map(e=>({id:e.id,label:e.name}))]},shouldShowLoadMoreButton(){return this.data.items.length>0&&\"\"!==this.data.next_cursor},selectionDescription(){return 1===this.selectedItems.length?this.$str(\"one_competency_selected\",\"totara_competency\",this.selectedItems.length):this.$str(\"n_competencies_selected\",\"totara_competency\",this.selectedItems.length)},buttonText(){return this.isViewingSelections?this.$str(\"back_to_all_competencies\",\"totara_competency\"):this.$str(\"viewselected\",\"totara_core\")}},watch:{frameworkSelection:\"applyFilter\",filters:{deep:!0,handler:\"applyFilter\"}},methods:{async viewSelections(){await this.$apollo.queries.data.refetch({user_id:this.userId,filters:{ids:this.selectedItems}}),this.isViewingSelections=!0},async clearSelections(){this.resetFilters(),this.selectedItems=[]},resetFilters(){this.filters=this.$options.data.call(this).filters},showConfirmationModal(){this.isShowingConfirmationModal=!0},async confirmAssignment(){await this.tryAssign(),this.isShowingConfirmationModal=!1},async tryAssign(){this.isSaving=!0;try{const{data:e}=await this.assign();this.isSaving=!1;const t=e.totara_competency_create_user_assignments.length;0===t?this.showErrorNotification():window.location.href=this.$url(this.goBackLink,{assign_success:t})}catch(e){this.showErrorNotification(),this.isSaving=!1}},assign(){return this.$apollo.mutate({mutation:p,variables:{user_id:this.userId,competency_ids:this.selectedItems},refetchAll:!1})},async applyFilter(){const e=await this.$apollo.queries.data.refetch(this.firstPageQueryVariables);return this.isViewingSelections=!1,e},loadMore(){this.$apollo.queries.data.fetchMore({variables:this.subsequentPageQueryVariables,updateQuery:(e,{fetchMoreResult:t})=>{e=e.totara_competency_user_assignable_competencies;const n=t.totara_competency_user_assignable_competencies;return{totara_competency_user_assignable_competencies:{__typename:e.__typename,items:[...e.items,...n.items],total:n.total,next_cursor:n.next_cursor}}}})},showErrorNotification(){Object(P.notify)({message:this.$str(\"error_generic_mutation\",\"totara_competency\"),type:\"error\"})},selectOrFilter(){this.isViewingSelections?this.applyFilter():this.viewSelections()}},apollo:{data(){return{query:T,variables:this.firstPageQueryVariables,update:({totara_competency_user_assignable_competencies:e})=>e}},user:{query:O.a,variables(){return{user_id:this.userId}},update:e=>e.totara_competency_user,skip(){return this.isMine}}}},B=(n(\"dNVj\"),n(\"KHd+\")),L=function(e){e.options.__langStrings={totara_core:[\"loadmore\",\"search\",\"viewselected\"],totara_hierarchy:[\"assign\",\"competencyframeworks\",\"competencytypes\"],totara_competency:[\"all\",\"any\",\"assign_competencies\",\"back_to_all_competencies\",\"competencies\",\"confirm_generic\",\"currently_assigned\",\"error_generic_mutation\",\"filter_framework_all_frameworks\",\"filter_competencies\",\"header_assignment_status\",\"n_competencies_selected\",\"no_competency_to_assign\",\"not_assigned\",\"one_competency_selected\",\"view_selected_competencies\"]}},E=Object(B.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-competencySelfAssignment\"},[n(\"div\",{staticClass:\"tui-competencySelfAssignment__header\"},[!e.isMine&&e.user?n(\"MiniProfileCard\",{attrs:{display:e.user.card_display}}):e._e(),e._v(\" \"),n(\"div\",[n(\"a\",{attrs:{href:e.goBackLink}},[e._v(\"\\n        \"+e._s(e.goBackText)+\"\\n      \")])]),e._v(\" \"),n(\"PageHeading\",{attrs:{title:e.pageHeading}})],1),e._v(\" \"),n(\"Grid\",{staticClass:\"tui-competencySelfAssignment__actions\",attrs:{\"stack-at\":900}},[n(\"GridItem\",{attrs:{units:3}},[e.frameworks.length>1&&!e.isViewingSelections?n(\"SelectFilter\",{attrs:{label:e.$str(\"competencyframeworks\",\"totara_hierarchy\"),\"show-label\":!1,options:e.frameworkOptions},model:{value:e.frameworkSelection,callback:function(t){e.frameworkSelection=t},expression:\"frameworkSelection\"}}):e._e()],1),e._v(\" \"),n(\"GridItem\",{attrs:{units:6}},[n(\"Basket\",{attrs:{items:e.selectedItems,\"bulk-actions\":e.basketActions},scopedSlots:e._u([{key:\"status\",fn:function(t){var i=t.empty;return[e.isViewingSelections&&!i?n(\"ButtonIcon\",{attrs:{styleclass:{small:!0},text:e.$str(\"clearall\",\"totara_core\"),\"aria-label\":e.$str(\"clearall\",\"totara_core\")},on:{click:e.clearSelections}},[n(\"ClearIcon\")],1):e._e()]}},{key:\"actions\",fn:function(t){return[t.empty?e._e():n(\"Button\",{attrs:{styleclass:{transparent:!0},text:e.buttonText},on:{click:e.selectOrFilter}})]}}])})],1)],1),e._v(\" \"),n(\"Grid\",{attrs:{\"stack-at\":900}},[e.isViewingSelections?e._e():n(\"GridItem\",{attrs:{units:3}},[n(\"FilterSidePanel\",{staticClass:\"tui-competencySelfAssignment__filters\",attrs:{title:e.$str(\"filter_competencies\",\"totara_competency\")},on:{\"active-count-change\":function(t){e.activeFilterCount=t}},model:{value:e.filters,callback:function(t){e.filters=t},expression:\"filters\"}},[n(\"SearchFilter\",{attrs:{label:e.$str(\"search\",\"totara_core\"),placeholder:e.$str(\"search\",\"totara_core\"),\"show-label\":!1,stacked:!0},model:{value:e.filters.text,callback:function(t){e.$set(e.filters,\"text\",t)},expression:\"filters.text\"}}),e._v(\" \"),e.types.length>1?n(\"MultiSelectFilter\",{attrs:{title:e.$str(\"competencytypes\",\"totara_hierarchy\"),\"show-label\":!0,options:e.competencyTypeOptions},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,\"type\",t)},expression:\"filters.type\"}}):e._e(),e._v(\" \"),n(\"SelectFilter\",{attrs:{label:e.$str(\"header_assignment_status\",\"totara_competency\"),\"show-label\":!0,stacked:!0,options:e.assignmentStatusesOptions},model:{value:e.filters.assignment_status,callback:function(t){e.$set(e.filters,\"assignment_status\",t)},expression:\"filters.assignment_status\"}})],1)],1),e._v(\" \"),n(\"GridItem\",{attrs:{units:9,grows:\"\"}},[n(\"Loader\",{attrs:{loading:e.$apollo.loading}},[e.hasLoadedCompetencies?n(\"SelectionTable\",{attrs:{competencies:e.data.items,\"total-competency-count\":e.data.total},model:{value:e.selectedItems,callback:function(t){e.selectedItems=t},expression:\"selectedItems\"}}):n(\"p\"),e._v(\" \"),e.shouldShowLoadMoreButton?n(\"Button\",{staticClass:\"tui-competencySelfAssignment__loadMore\",attrs:{text:e.$str(\"loadmore\",\"totara_core\")},on:{click:e.loadMore}}):e._e()],1)],1)],1),e._v(\" \"),n(\"ConfirmationModal\",{attrs:{title:e.$str(\"assign_competencies\",\"totara_competency\"),open:e.isShowingConfirmationModal,loading:e.isSaving},on:{confirm:e.confirmAssignment,cancel:function(t){e.isShowingConfirmationModal=!1}}},[n(\"p\",[e._v(\"\\n      \"+e._s(e.selectionDescription)+\"\\n    \")]),e._v(\" \"),n(\"p\",[e._v(\"\\n      \"+e._s(e.$str(\"confirm_generic\",\"totara_competency\"))+\"\\n    \")])])],1)}),[],!1,null,null,null);\"function\"==typeof L&&L(E),E.options.__hasBlocks={script:!0,template:!0};t.default=E.exports},HZ23:function(e,t){e.exports=tui.require(\"tui_charts/components/PercentageDoughnut\")},HjqD:function(e,t,n){\"use strict\";var i=n(\"ZoqZ\");n.n(i).a},I1l6:function(e,t,n){},IqB1:function(e,t){e.exports=tui.require(\"tui/components/collapsible/Collapsible\")},IvBL:function(e,t,n){\"use strict\";n.r(t);var i=n(\"JThd\"),a={components:{CheckSuccess:n.n(i).a},props:{scale:{required:!0,type:Object},showDescriptions:{type:Boolean,default:!1},reverseValues:{type:Boolean,default:!1}},computed:{scaleValues(){return this.reverseValues?this.scale.values.slice(0).reverse():this.scale.values}},methods:{showDescription(e){return this.showDescriptions&&null!=e&&e.length>0}}},s=(n(\"pFDD\"),n(\"KHd+\")),r=function(e){e.options.__langStrings={totara_competency:[\"is_not_proficient_value\",\"is_proficient_value\",\"rating_scale\"]}},o=Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-competencyRatingScaleOverview\"},[n(\"p\",{staticClass:\"tui-competencyRatingScaleOverview__title\",attrs:{id:e.$id(\"rating-scale-title\")}},[e._v(\"\\n    \"+e._s(e.$str(\"rating_scale\",\"totara_competency\"))+\"\\n  \")]),e._v(\" \"),n(\"ol\",{staticClass:\"tui-competencyRatingScaleOverview__list\",attrs:{\"aria-labelledby\":e.$id(\"rating-scale-title\")}},e._l(e.scaleValues,(function(t){return n(\"li\",{key:t.id,staticClass:\"tui-competencyRatingScaleOverview__list-item\"},[n(\"div\",{staticClass:\"tui-competencyRatingScaleOverview__proficientStatus\"},[t.proficient?n(\"CheckSuccess\",{attrs:{size:\"200\"}}):e._e()],1),e._v(\" \"),n(\"div\",{staticClass:\"tui-competencyRatingScaleOverview__scaleValue\"},[n(\"p\",{staticClass:\"tui-competencyRatingScaleOverview__scaleValue-name\"},[e._v(\"\\n          \"+e._s(t.name)+\"\\n        \")]),e._v(\" \"),e.showDescription(t.description)?n(\"p\",{staticClass:\"tui-competencyRatingScaleOverview__scaleValue-description\",domProps:{innerHTML:e._s(t.description)}}):e._e(),e._v(\" \"),n(\"span\",{staticClass:\"sr-only\"},[e._v(\"\\n          \"+e._s(t.proficient?e.$str(\"is_proficient_value\",\"totara_competency\"):e.$str(\"is_not_proficient_value\",\"totara_competency\"))+\"\\n        \")])])])})),0)])}),[],!1,null,null,null);\"function\"==typeof r&&r(o),o.options.__hasBlocks={script:!0,template:!0};t.default=o.exports},J1fj:function(e,t){e.exports=tui.require(\"tui/components/icons/Clear\")},JAtL:function(e,t,n){},JThd:function(e,t){e.exports=tui.require(\"tui/components/icons/CheckSuccess\")},JXQf:function(e,t){e.exports=tui.require(\"tui/components/loading/Loader\")},\"K/n9\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"NAOU\"),a=n.n(i),s=n(\"D9If\"),r=n.n(s),o=n(\"e3MU\"),c=n.n(o),l=n(\"YUDR\"),d=n.n(l),u=n(\"pHFC\"),m=n.n(u),p={components:{Grid:a.a,GridItem:r.a,InfoIconButton:c.a,ProgressTrackerNavCircleAchievement:d.a,RatingScaleOverview:m.a},props:{content:{type:Object},createdAt:String,fromPrint:Boolean,isExternalParticipant:Boolean,preview:Boolean,subjectUser:Object},computed:{competencyUrl(){return this.$url(\"/totara/competency/profile/details/index.php\",{competency_id:this.content.competency.id,user_id:this.subjectUser.id})},scale(){return{values:this.content.scale_values}},competencyContentExists(){return this.content&&this.content.competency&&this.content.scale_values&&this.content.achievement&&this.content.assignment},state(){return this.content.achievement.id&&this.content.achievement.proficient?\"achieved\":this.content.achievement.id?\"complete\":\"pending\"},progressStates(){let e=[this.state];return\"complete\"!==this.state&&e.push(\"target\"),e}}},_=(n(\"9vC/\"),n(\"KHd+\")),v=function(e){e.options.__langStrings={totara_competency:[\"achievement_level\",\"not_proficient\",\"perform_review_competency_missing\",\"proficient\",\"rating_scale\",\"reason_assigned\",\"selected_competency\"]}},y=Object(_.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.competencyContentExists?n(\"div\",{staticClass:\"tui-linkedReviewViewCompetency\"},[n(\"h4\",{staticClass:\"tui-linkedReviewViewCompetency__title\"},[e.fromPrint||e.preview||e.isExternalParticipant?[e._v(\"\\n      \"+e._s(e.content.competency.display_name)+\"\\n    \")]:n(\"a\",{attrs:{href:e.competencyUrl,\"aria-label\":e.$str(\"selected_competency\",\"totara_competency\",e.content.competency.display_name)}},[e._v(\"\\n      \"+e._s(e.content.competency.display_name)+\"\\n    \")])],2),e._v(\" \"),n(\"div\",{staticClass:\"tui-linkedReviewViewCompetency__description\",domProps:{innerHTML:e._s(e.content.competency.description)}}),e._v(\" \"),n(\"div\",{staticClass:\"tui-linkedReviewViewCompetency__overview\"},[e.preview?e._e():n(\"div\",{staticClass:\"tui-linkedReviewViewCompetency__timestamp\"},[e._v(\"\\n      \"+e._s(e.createdAt)+\"\\n    \")]),e._v(\" \"),n(\"div\",{staticClass:\"tui-linkedReviewViewCompetency__bar\"},[n(\"Grid\",{attrs:{\"stack-at\":600}},[n(\"GridItem\",{attrs:{units:3}},[n(\"p\",{staticClass:\"tui-linkedReviewViewCompetency__bar-header\"},[e._v(\"\\n            \"+e._s(e.$str(\"reason_assigned\",\"totara_competency\"))+\"\\n          \")]),e._v(\" \"),n(\"div\",{staticClass:\"tui-linkedReviewViewCompetency__bar-value\"},[e._v(\"\\n            \"+e._s(e.content.assignment.reason_assigned)+\"\\n          \")])]),e._v(\" \"),n(\"GridItem\",{attrs:{units:5}},[n(\"div\",{staticClass:\"tui-linkedReviewViewCompetency__bar-wrap\",class:\"tui-linkedReviewViewCompetency__bar-wrap-\"+e.state},[n(\"p\",{staticClass:\"tui-linkedReviewViewCompetency__bar-header\"},[e._v(\"\\n              \"+e._s(e.$str(\"achievement_level\",\"totara_competency\"))+\"\\n              \"),e.fromPrint?e._e():n(\"InfoIconButton\",{staticClass:\"tui-linkedReviewViewCompetency__bar-headerHelp\",attrs:{\"is-help-for\":e.$str(\"rating_scale\",\"totara_competency\")}},[n(\"RatingScaleOverview\",{attrs:{scale:e.scale}})],1)],1),e._v(\" \"),n(\"div\",{staticClass:\"tui-linkedReviewViewCompetency__bar-value\"},[e._v(\"\\n              \"+e._s(e.content.achievement.name)+\"\\n            \")])])]),e._v(\" \"),n(\"GridItem\",{staticClass:\"tui-linkedReviewViewCompetency__bar-status\",attrs:{units:4}},[n(\"ProgressTrackerNavCircleAchievement\",{attrs:{states:e.progressStates}}),e._v(\" \"),n(\"span\",{staticClass:\"tui-linkedReviewViewCompetency__bar-statusText\",class:{\"tui-linkedReviewViewCompetency__bar-statusTextComplete\":\"complete\"===e.state}},[e._v(\"\\n            \"+e._s(e.content.achievement.proficient?e.$str(\"proficient\",\"totara_competency\"):e.$str(\"not_proficient\",\"totara_competency\"))+\"\\n          \")])],1)],1)],1)])]):n(\"div\",{staticClass:\"tui-linkedReviewViewCompetencyMissing\"},[e._v(\"\\n  \"+e._s(e.$str(\"perform_review_competency_missing\",\"totara_competency\"))+\"\\n\")])}),[],!1,null,null,null);\"function\"==typeof v&&v(y),y.options.__hasBlocks={script:!0,template:!0};t.default=y.exports},KDHu:function(e,t,n){},KGot:function(e,t){e.exports=tui.require(\"tui/components/datatable/Cell\")},\"KHd+\":function(e,t,n){\"use strict\";function i(e,t,n,i,a,s,r,o){var c,l=\"function\"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),s&&(l._scopeId=\"data-v-\"+s),r?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},l._ssrRegister=c):a&&(c=o?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}n.d(t,\"a\",(function(){return i}))},KUeq:function(e,t,n){\"use strict\";n.r(t);var i=n(\"fCWf\"),a=n.n(i),s=n(\"zdti\"),r=n.n(s),o={components:{ActionLink:a.a,NotificationBanner:r.a},props:{display:{type:Boolean,default:!0},selfAssignmentUrl:{required:!0,type:String},isMine:Boolean,isAssignEnabled:Boolean}},c=(n(\"acdx\"),n(\"KHd+\")),l=function(e){e.options.__langStrings={totara_competency:[\"assign_competencies\",\"self_assign_competencies\",\"no_competencies_assigned\"]}},d=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.display?n(\"div\",{staticClass:\"tui-noCompetencyAssignments\"},[n(\"NotificationBanner\",{attrs:{type:\"warning\",message:e.$str(\"no_competencies_assigned\",\"totara_competency\")}}),e._v(\" \"),e.isAssignEnabled?n(\"div\",{staticClass:\"tui-noCompetencyAssignments__search-competencies\"},[n(\"ActionLink\",{attrs:{href:e.selfAssignmentUrl,text:e.isMine?e.$str(\"self_assign_competencies\",\"totara_competency\"):e.$str(\"assign_competencies\",\"totara_competency\"),styleclass:{primary:!0}}})],1):e._e()],1):e._e()}),[],!1,null,null,null);\"function\"==typeof l&&l(d),d.options.__hasBlocks={script:!0,template:!0};t.default=d.exports},Lany:function(e,t){e.exports=tui.require(\"totara_competency/components/details/Assignment\")},MAAM:function(e,t){e.exports=tui.require(\"tui/components/form/HelpIcon\")},MhKF:function(e,t){e.exports=tui.require(\"tui/components/icons/AddUser\")},Mnur:function(e,t){e.exports=tui.require(\"tui/components/modal/ModalPresenter\")},\"N+jV\":function(e,t,n){},NAOU:function(e,t){e.exports=tui.require(\"tui/components/grid/Grid\")},NUDN:function(e,t){e.exports=tui.require(\"totara_competency/components/profile/CompetencyCharts\")},OBdB:function(e,t,n){\"use strict\";n.r(t);var i=n(\"59Wj\"),a=n.n(i),s=n(\"49h4\"),r=n.n(s),o=n(\"FBvN\"),c=n.n(o),l={components:{FilterBar:a.a,SelectFilter:r.a,SearchFilter:c.a},props:{isForArchived:{required:!0,type:Boolean},defaultFilterValues:{type:Object,default:()=>({search:\"\",proficient:null})},defaultOrder:{required:!1,type:String,default:\"alphabetical\"}},data(){return{filters:{search:this.defaultFilterValues.search,proficient:this.defaultFilterValues.proficient},order:this.defaultOrder}},computed:{proficientOptions(){return[{id:null,label:this.$str(\"all\",\"totara_competency\")},{id:!0,label:this.$str(\"proficient\",\"totara_competency\")},{id:!1,label:this.$str(\"not_proficient\",\"totara_competency\")}]},orderOptions(){return[{id:\"alphabetical\",label:this.$str(\"sort_alphabetical\",\"totara_competency\")},!this.isForArchived&&{id:\"recently-assigned\",label:this.$str(\"sort_recently_assigned\",\"totara_competency\")},this.isForArchived&&{id:\"recently-archived\",label:this.$str(\"sort_recently_archived\",\"totara_competency\")}].filter(Boolean)}},methods:{filtersUpdated(){this.$emit(\"filters-updated\",this.filters)},orderUpdated(){this.$emit(\"order-updated\",this.order)}}},d=(n(\"2z5M\"),n(\"KHd+\")),u=function(e){e.options.__langStrings={admin:[\"filters\"],core:[\"search\",\"sortby\"],totara_competency:[\"proficient\",\"not_proficient\",\"all\",\"sort_alphabetical\",\"sort_recently_archived\",\"sort_recently_assigned\",\"proficiency_status\",\"filter_competencies\"]}},m=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"FilterBar\",{staticClass:\"tui-competencyProfileListFilters\",attrs:{title:e.$str(\"filter_competencies\",\"totara_competency\")},scopedSlots:e._u([{key:\"filters-left\",fn:function(t){var i=t.stacked;return[e.isForArchived?e._e():n(\"SelectFilter\",{attrs:{label:e.$str(\"proficiency_status\",\"totara_competency\"),\"show-label\":\"\",options:e.proficientOptions,stacked:i},on:{input:e.filtersUpdated},model:{value:e.filters.proficient,callback:function(t){e.$set(e.filters,\"proficient\",t)},expression:\"filters.proficient\"}}),e._v(\" \"),n(\"SearchFilter\",{attrs:{label:e.$str(\"search\",\"core\"),stacked:i},on:{input:e.filtersUpdated},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,\"search\",t)},expression:\"filters.search\"}})]}},{key:\"filters-right\",fn:function(t){var i=t.stacked;return[n(\"SelectFilter\",{attrs:{label:e.$str(\"sortby\",\"core\"),\"show-label\":\"\",stacked:i,options:e.orderOptions},on:{input:e.orderUpdated},model:{value:e.order,callback:function(t){e.order=t},expression:\"order\"}})]}}]),model:{value:e.filters,callback:function(t){e.filters=t},expression:\"filters\"}})}),[],!1,null,null,null);\"function\"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0};t.default=m.exports},PNtU:function(e,t){e.exports=tui.require(\"tui/components/lozenge/Lozenge\")},QPG3:function(e,t){e.exports=tui.require(\"totara_competency/components/details/ActivityLog\")},SBbP:function(e,t,n){\"use strict\";n.r(t);var i=n(\"7OoD\"),a=n.n(i),s=n(\"59Wj\"),r=n.n(s),o=n(\"JXQf\"),c=n.n(o),l=n(\"49h4\"),d=n.n(l),u={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_activity_log\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"filters\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"totara_competency_activity_log_filters\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_activity_log\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"competency_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"filters\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"filters\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"date\"},name:{kind:\"Name\",value:\"timestamp\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"DATELONG\"}}],directives:[]},{kind:\"Field\",alias:{kind:\"Name\",value:\"datetime\"},name:{kind:\"Name\",value:\"timestamp\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"DATETIMELONG\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"description\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"proficient_status\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"assignment\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_group_type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"progress_name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reason_assigned\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"assignment_action\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"type\"},arguments:[],directives:[]}]}}]}}]},m={components:{ActivityLogTable:a.a,FilterBar:r.a,Loader:c.a,SelectFilter:d.a},props:{userId:{required:!0,type:Number},competencyId:{required:!0,type:Number}},data:function(){return{log:[],assignments:[],assignmentFilter:0}},apollo:{log:{query:u,variables(){return{user_id:this.userId,competency_id:this.competencyId,filters:this.selectedFilter}},update({totara_competency_activity_log:e}){return this.assignments=this.refreshAssignmentList(e),e}}},computed:{selectedFilter(){return this.assignmentFilter?{assignment_id:this.assignmentFilter}:{}}},methods:{refreshAssignmentList(e){let t={};return e.forEach(e=>{null!=e.assignment&&(t[e.assignment.id]={id:e.assignment.id,label:this.getFilterLabel(e)})}),t=Object.values(t),t.length>=this.assignments.length?(t.unshift({label:this.$str(\"all\",\"core\"),id:0}),t):this.assignments},getFilterLabel(e){let t=e.assignment.progress_name;if(this.isDirectlyAssigned(e.assignment)){let n={progress_name:e.assignment.progress_name,user_fullname_role:e.assignment.reason_assigned};t=this.$str(\"progress_name_by_user\",\"totara_competency\",n)}return t},isDirectlyAssigned:e=>\"user\"===e.user_group_type&&(\"admin\"===e.type||\"other\"===e.type)}},p=(n(\"Y2OC\"),n(\"KHd+\")),_=function(e){e.options.__langStrings={core:[\"all\"],totara_competency:[\"activity_log\",\"activity_log_filter\",\"assignment\",\"progress_name_by_user\"]}},v=Object(p.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-competencyDetailActivityLog\"},[n(\"h4\",{staticClass:\"tui-competencyDetailActivityLog__title\"},[e._v(\"\\n    \"+e._s(e.$str(\"activity_log\",\"totara_competency\"))+\"\\n  \")]),e._v(\" \"),e.assignments.length>1?n(\"FilterBar\",{attrs:{title:e.$str(\"activity_log_filter\",\"totara_competency\")},scopedSlots:e._u([{key:\"filters-left\",fn:function(){return[n(\"SelectFilter\",{attrs:{label:e.$str(\"assignment\",\"totara_competency\"),name:\"activity_log_select\",options:e.assignments,\"show-label\":!0,stacked:!1},model:{value:e.assignmentFilter,callback:function(t){e.assignmentFilter=t},expression:\"assignmentFilter\"}})]},proxy:!0}],null,!1,3296399798)}):e._e(),e._v(\" \"),n(\"Loader\",{attrs:{loading:e.$apollo.loading}},[n(\"ActivityLogTable\",{attrs:{log:e.log}})],1)],1)}),[],!1,null,null,null);\"function\"==typeof _&&_(v),v.options.__hasBlocks={script:!0,template:!0};t.default=v.exports},ShU0:function(e,t,n){\"use strict\";n.r(t);var i=n(\"Zoit\"),a=n.n(i),s=n(\"IqB1\"),r=n.n(s),o=n(\"PNtU\"),c=n.n(o),l=n(\"k7/G\"),d=n.n(l),u={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_scale_achievements\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"assignment_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_scale_achievements\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"assignment_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"assignment_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"scale_value\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"numericscore\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"proficient\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"items\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"achieved\"},name:{kind:\"Name\",value:\"has_scale_value\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"date_achieved\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"DATE\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"pathway\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"instance_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"pathway_type\"},arguments:[],directives:[]}]}}]}}]}}]}}]},m={components:{AchievementLayout:a.a,Collapsible:r.a,Lozenge:c.a,OrBox:d.a},inheritAttrs:!1,props:{userId:{required:!0,type:Number},assignmentId:{required:!0,type:Number},type:String},data:function(){return{achievements:[],achievementComponents:[],itemsLoaded:0}},apollo:{achievements:{query:u,context:{batch:!0},variables(){return{assignment_id:this.assignmentId,user_id:this.userId}},update({totara_competency_scale_achievements:e}){let t=[],n=0;return e.forEach(e=>{let i={achieved:!1,items:[],scale_value:e.scale_value};e.items.forEach(e=>{let t=`pathway_${e.pathway.pathway_type}/components/achievements/AchievementDisplay`;n+=1,i.items.push({component:tui.asyncComponent(t),props:{assignmentId:this.assignmentId,instanceId:parseInt(e.pathway.instance_id),userId:this.userId,dateAchieved:e.date_achieved}}),e.achieved&&(i.achieved=!0)}),0===n&&this.$emit(\"loaded\"),t.push(i)}),t}}},computed:{numberOfItems(){return this.achievements?this.achievements.reduce((function(e,t){return e+t.items.length}),0):0}},watch:{itemsLoaded:function(e){e===this.numberOfItems&&this.$emit(\"loaded\")}},methods:{isLastItem:(e,t)=>e===t.length-1,itemLoaded(){this.itemsLoaded+=1}}},p=(n(\"TV6p\"),n(\"KHd+\")),_=function(e){e.options.__langStrings={totara_competency:[\"criteria_fulfilled\",\"work_towards_level\"]}},v=Object(p.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-competencyAchievementsScale\"},e._l(e.achievements,(function(t,i){return n(\"div\",{key:i},[n(\"Collapsible\",{attrs:{\"always-render\":!0,\"initial-state\":!t.achieved,label:e.$str(\"work_towards_level\",\"totara_competency\")},scopedSlots:e._u([{key:\"label-extra\",fn:function(){return[n(\"span\",{staticClass:\"tui-competencyAchievementsScale__title\"},[e._v(\"\\n          \"+e._s(t.scale_value.name)+\"\\n        \")])]},proxy:!0},t.achieved?{key:\"collapsible-side-content\",fn:function(){return[n(\"Lozenge\",{attrs:{text:e.$str(\"criteria_fulfilled\",\"totara_competency\"),type:\"success\"}})]},proxy:!0}:null,{key:\"default\",fn:function(i){var a=i.expanded;return[e._l(t.items,(function(i,s){return[n(\"div\",{key:s,class:\"tui-competencyAchievementsScale__item\"},[n(i.component,e._b({tag:\"component\",attrs:{displayed:a},on:{loaded:e.itemLoaded}},\"component\",i.props,!1))],1),e._v(\" \"),e.isLastItem(s,t.items)?e._e():n(\"div\",{key:s+\"orseparator\",staticClass:\"tui-competencyAchievementsScale__separator\"},[n(\"AchievementLayout\",{attrs:{\"no-borders\":!0},scopedSlots:e._u([{key:\"left\",fn:function(){return[n(\"OrBox\")]},proxy:!0}],null,!0)})],1)]}))]}}],null,!0)})],1)})),0)}),[],!1,null,null,null);\"function\"==typeof _&&_(v),v.options.__hasBlocks={script:!0,template:!0};t.default=v.exports},Sn4P:function(e,t){e.exports=tui.require(\"totara_competency/components/achievements/Achievements\")},TV6p:function(e,t,n){\"use strict\";var i=n(\"nRyV\");n.n(i).a},TXEh:function(e,t){e.exports=tui.require(\"tui/util\")},TXLe:function(e,t){e.exports=tui.require(\"totara_competency/components/profile/competency_list/ListBody\")},\"Tz/z\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"NAOU\"),a=n.n(i),s=n(\"D9If\"),r=n.n(s),o=n(\"dtfu\"),c=n.n(o),l=n(\"yuC0\"),d=n.n(l),u={components:{Grid:a.a,GridItem:r.a,Responsive:c.a,IndividualAssignmentProgress:d.a},props:{data:{required:!0,type:Object},userId:{type:Number,required:!0},isCurrentUser:{type:Boolean,required:!0}}},m=(n(\"cfoa\"),n(\"KHd+\")),p=Object(m.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Responsive\",{attrs:{breakpoints:[{name:\"small\",boundaries:[0,1330]},{name:null,boundaries:[1331,1331]}]},scopedSlots:e._u([{key:\"default\",fn:function(t){var i=t.currentBoundaryName;return[e.data.items&&e.data.items.length>0?n(\"Grid\",{attrs:{\"stack-at\":1329}},e._l(e.data.items,(function(t,a){return n(\"GridItem\",{key:a+t.name+t.overall_progress,attrs:{units:6}},[n(\"div\",{staticClass:\"tui-competencyCharts__chart\",class:{\"tui-competencyCharts__chart--center\":\"small\"==i}},[n(\"IndividualAssignmentProgress\",{attrs:{\"assignment-progress\":t,\"user-id\":e.userId,\"is-current-user\":e.isCurrentUser}})],1)])})),1):e._e()]}}])})}),[],!1,null,null,null);p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},\"UW6/\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"yikf\"),a=n.n(i),s=n(\"5qAA\"),r=n.n(s),o=n(\"KGot\"),c=n.n(o),l=n(\"JThd\"),d=n.n(l),u=n(\"8n92\"),m=n.n(u),p={components:{Table:a.a,HeaderCell:r.a,Cell:c.a,CheckIcon:d.a,MyRatingCell:m.a},props:{competencies:{required:!0,type:Array},baseUrl:{required:!0,type:String},userId:{required:!0,type:Number},scales:{required:!0,type:Array}},methods:{competencyDetailsLink(e){const t={competency_id:e.competency.id};return this.isMine||(t.user_id=this.userId),this.$url(this.baseUrl+\"/details/index.php\",t)}}},_=n(\"KHd+\"),v=function(e){e.options.__langStrings={core:[\"no\",\"yes\"],totara_competency:[\"achievement_level\",\"header_competency\",\"proficient\"]}},y=Object(_.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Table\",{attrs:{data:e.competencies},scopedSlots:e._u([{key:\"header-row\",fn:function(){return[n(\"HeaderCell\",{attrs:{size:\"10\"}},[e._v(\"\\n      \"+e._s(e.$str(\"header_competency\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"2\",align:\"center\"}},[e._v(\"\\n      \"+e._s(e.$str(\"proficient\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"3\"}},[e._v(\"\\n      \"+e._s(e.$str(\"achievement_level\",\"totara_competency\"))+\"\\n    \")])]},proxy:!0},{key:\"row\",fn:function(t){var i=t.row;return[n(\"Cell\",{attrs:{size:\"10\",\"column-header\":e.$str(\"header_competency\",\"totara_competency\")}},[n(\"a\",{attrs:{href:e.competencyDetailsLink(i)}},[e._v(e._s(i.competency.fullname))])]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"2\",align:\"center\",\"column-header\":e.$str(\"proficient\",\"totara_competency\")}},[i.items[0].my_value&&i.items[0].my_value.proficient?n(\"CheckIcon\",{attrs:{size:\"200\",alt:e.$str(\"yes\",\"core\")}}):n(\"span\",[n(\"span\",{attrs:{\"aria-hidden\":!0}},[e._v(\"-\")]),e._v(\" \"),n(\"span\",{staticClass:\"sr-only\"},[e._v(e._s(e.$str(\"no\",\"core\")))])])],1),e._v(\" \"),n(\"Cell\",{attrs:{size:\"3\",\"column-header\":e.$str(\"achievement_level\",\"totara_competency\")}},[i.items[0].my_value?n(\"MyRatingCell\",{attrs:{value:i.items[0].my_value,scales:e.scales}}):e._e()],1)]}}])})}),[],!1,null,null,null);\"function\"==typeof v&&v(y),y.options.__hasBlocks={script:!0,template:!0};t.default=y.exports},UjaO:function(e,t){e.exports=tui.require(\"tui/components/icons/Archive\")},VFXp:function(e,t,n){\"use strict\";n.r(t);var i=n(\"49h4\"),a={components:{SelectFilter:n.n(i).a},props:{filters:{type:Array,required:!0},value:{type:Object,required:!0},disable:{type:Boolean,default:!1}},computed:{displayFilters(){return!(1===this.filters.length&&1===this.filters[0].status)},filterOptions(){const e=[];return this.filters.forEach(t=>{e.push({name:t.name,id:t.id,value:t.value}),t.filters.forEach(t=>e.push(Object.assign({},t,{name:\"   \"+t.name})))}),e}},methods:{toggle(){this.open=!this.open},filterUpdated(e){const t=this.filterOptions.find(t=>t.id==e);this.$emit(\"input\",t&&t.value)}}},s=n(\"KHd+\"),r=function(e){e.options.__langStrings={totara_competency:[\"filter_viewing_by_assignment\",\"viewing_by_assignment\"]}},o=Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",[n(\"p\",{staticClass:\"sr-only\"},[e._v(\"\\n    \"+e._s(e.$str(\"filter_viewing_by_assignment\",\"totara_competency\"))+\"\\n  \")]),e._v(\" \"),e.displayFilters?n(\"SelectFilter\",{attrs:{\"show-label\":!0,label:e.$str(\"viewing_by_assignment\",\"totara_competency\"),options:e.filterOptions.map((function(e){return{id:e.id,label:e.name}})),disabled:e.disable,value:e.value&&e.value.key},on:{input:e.filterUpdated}}):e._e()],1)}),[],!1,null,null,null);\"function\"==typeof r&&r(o),o.options.__hasBlocks={script:!0,template:!0};t.default=o.exports},Vpbp:function(e,t){e.exports=tui.require(\"totara_competency/components/profile/competency_list/List\")},\"W+j5\":function(e,t,n){var i={\"./AssignmentProgress\":\"YCS+\",\"./AssignmentProgress.vue\":\"YCS+\",\"./IndividualAssignmentProgress\":\"8QXL\",\"./IndividualAssignmentProgress.vue\":\"8QXL\",\"./ProgressAssignmentFilters\":\"VFXp\",\"./ProgressAssignmentFilters.vue\":\"VFXp\",\"./RatingScaleOverview\":\"IvBL\",\"./RatingScaleOverview.vue\":\"IvBL\",\"./achievements/AchievementLayout\":\"tVAA\",\"./achievements/AchievementLayout.vue\":\"tVAA\",\"./achievements/Achievements\":\"nMuw\",\"./achievements/Achievements.vue\":\"nMuw\",\"./achievements/Multivalue\":\"lTsS\",\"./achievements/Multivalue.vue\":\"lTsS\",\"./achievements/ProgressCircle\":\"+d5V\",\"./achievements/ProgressCircle.vue\":\"+d5V\",\"./achievements/Singlevalue\":\"ShU0\",\"./achievements/Singlevalue.vue\":\"ShU0\",\"./adder/AssignedCompetencyAdder\":\"xx/M\",\"./adder/AssignedCompetencyAdder.vue\":\"xx/M\",\"./details/ActivityLog\":\"SBbP\",\"./details/ActivityLog.vue\":\"SBbP\",\"./details/ActivityLogTable\":\"/NCw\",\"./details/ActivityLogTable.vue\":\"/NCw\",\"./details/ArchivedAssignments\":\"7rD8\",\"./details/ArchivedAssignments.vue\":\"7rD8\",\"./details/ArchivedAssignmentsTable\":\"xs84\",\"./details/ArchivedAssignmentsTable.vue\":\"xs84\",\"./details/Assignment\":\"ouCZ\",\"./details/Assignment.vue\":\"ouCZ\",\"./details/ProficientStatus\":\"hOV+\",\"./details/ProficientStatus.vue\":\"hOV+\",\"./details/Progress\":\"hNaK\",\"./details/Progress.vue\":\"hNaK\",\"./performelement_linked_review/AdminEdit\":\"4ys3\",\"./performelement_linked_review/AdminEdit.vue\":\"4ys3\",\"./performelement_linked_review/AdminView\":\"6RY8\",\"./performelement_linked_review/AdminView.vue\":\"6RY8\",\"./performelement_linked_review/ParticipantContent\":\"K/n9\",\"./performelement_linked_review/ParticipantContent.vue\":\"K/n9\",\"./performelement_linked_review/ParticipantContentPicker\":\"oYdF\",\"./performelement_linked_review/ParticipantContentPicker.vue\":\"oYdF\",\"./profile/CompetencyCharts\":\"Tz/z\",\"./profile/CompetencyCharts.vue\":\"Tz/z\",\"./profile/CurrentProgress\":\"8Lk7\",\"./profile/CurrentProgress.vue\":\"8Lk7\",\"./profile/MyRatingCell\":\"gls+\",\"./profile/MyRatingCell.vue\":\"gls+\",\"./profile/NoCompetencyAssignments\":\"KUeq\",\"./profile/NoCompetencyAssignments.vue\":\"KUeq\",\"./profile/competency_list/ArchivedList\":\"aFZt\",\"./profile/competency_list/ArchivedList.vue\":\"aFZt\",\"./profile/competency_list/CurrentList\":\"UW6/\",\"./profile/competency_list/CurrentList.vue\":\"UW6/\",\"./profile/competency_list/Filters\":\"OBdB\",\"./profile/competency_list/Filters.vue\":\"OBdB\",\"./profile/competency_list/List\":\"+KnN\",\"./profile/competency_list/List.vue\":\"+KnN\",\"./profile/competency_list/ListBody\":\"0tPA\",\"./profile/competency_list/ListBody.vue\":\"0tPA\",\"./summary/AchievementConfiguration\":\"3WCR\",\"./summary/AchievementConfiguration.vue\":\"3WCR\",\"./summary/AchievementConfigurationCriteria\":\"grF1\",\"./summary/AchievementConfigurationCriteria.vue\":\"grF1\",\"./summary/CompetencySummaryGeneral\":\"XHOO\",\"./summary/CompetencySummaryGeneral.vue\":\"XHOO\",\"./summary/LinkedCourses\":\"hgKs\",\"./summary/LinkedCourses.vue\":\"hgKs\",\"./user_assignment/SelectionTable\":\"h23i\",\"./user_assignment/SelectionTable.vue\":\"h23i\"};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id=\"W+j5\"},WBvU:function(e,t){e.exports=tui.require(\"tui/components/uniform\")},We4D:function(e,t,n){},XHOO:function(e,t,n){\"use strict\";n.r(t);var i=n(\"KGot\"),a=n.n(i),s=n(\"rNse\"),r=n.n(s),o=n(\"yikf\"),c=n.n(o),l={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_competency\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_competency\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"competency_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"display_name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"idnumber\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"description\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"framework\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"display_name\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"type\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"display_name\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"assign_availability\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"aggregation_method\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"display_custom_fields\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"title\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"value\"},arguments:[],directives:[]}]}}]}}]}}]},d={components:{Cell:a.a,EditIcon:r.a,Table:c.a},props:{competencyId:{type:Number,required:!0}},data:()=>({competency:{},editUrl:\"\"}),computed:{rows(){let e=[{label:this.$str(\"fullname\",\"totara_competency\"),value:this.competency.display_name},{label:this.$str(\"idnumber\",\"totara_competency\"),value:this.competency.idnumber},{label:this.$str(\"description\",\"totara_competency\"),value:this.competency.description},{label:this.$str(\"type\",\"totara_competency\"),value:!!this.competency.type&&this.competency.type.display_name},{label:this.$str(\"aggregationmethod\",\"totara_hierarchy\"),value:this.aggregationMethodName},{label:this.$str(\"assignment_creation_availability\",\"totara_competency\"),values:this.assignAvailabilityNames,value:!1}];return this.competency.display_custom_fields&&this.competency.display_custom_fields.forEach(t=>{e.push({label:t.title,value:t.value})}),e=e.filter((function(e){return e.value||e.values})),e},assignAvailabilityNames(){if(!this.competency.assign_availability||!this.competency.assign_availability.length>0)return!1;let e=[];return this.competency.assign_availability.forEach(t=>{e.push(this.$str(1===t?\"competency_assign_availability_self_simple\":\"competency_assign_availability_other_simple\",\"totara_competency\"))}),e},aggregationMethodName(){if(!this.competency.aggregation_method)return!1;let e=1===this.competency.aggregation_method?\"all\":2===this.competency.aggregation_method?\"any\":\"off\";return this.$str(e,\"totara_competency\")}},apollo:{competency:{query:l,variables(){return{competency_id:this.competencyId}},update({totara_competency_competency:e}){return this.editUrl=this.$url(\"/totara/hierarchy/item/edit.php\",{prefix:\"competency\",id:e.id}),e}}}},u=n(\"KHd+\"),m=function(e){e.options.__langStrings={core:[\"edit\",\"general\"],totara_competency:[\"all\",\"any\",\"assignment_creation_availability\",\"competency_assign_availability_self_simple\",\"competency_assign_availability_other_simple\",\"description\",\"fullname\",\"idnumber\",\"off\",\"type\"],totara_hierarchy:[\"aggregationmethod\"]}},p=Object(u.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$apollo.loading?e._e():n(\"div\",{staticClass:\"tui-competencySummaryGeneral\"},[n(\"div\",{staticClass:\"tui-competencySummary__sectionHeader\"},[n(\"h3\",{staticClass:\"tui-competencySummary__sectionHeader-title\"},[e._v(\"\\n      \"+e._s(e.$str(\"general\",\"core\"))+\"\\n    \")]),e._v(\" \"),n(\"a\",{staticClass:\"tui-competencySummary__sectionHeader-edit\",attrs:{href:e.editUrl,title:e.$str(\"edit\",\"core\")}},[n(\"EditIcon\",{attrs:{size:200,alt:e.$str(\"edit\",\"core\")}})],1)]),e._v(\" \"),n(\"Table\",{attrs:{data:e.rows,\"border-bottom-hidden\":!0,\"border-top-hidden\":!0,\"border-separator-hidden\":!0,\"hover-off\":!0},scopedSlots:e._u([{key:\"row\",fn:function(t){var i=t.row;return[n(\"Cell\",{attrs:{size:\"6\",heavy:!0}},[n(\"div\",{staticClass:\"tui-competencySummaryGeneral__list-label\",attrs:{role:\"rowheader\"}},[e._v(\"\\n          \"+e._s(i.label)+\"\\n        \")])]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"10\"}},[n(\"div\",{staticClass:\"tui-competencySummaryGeneral__list-value\",attrs:{role:\"cell\"}},[i.values?e._l(i.values,(function(t,i){return n(\"div\",{key:\"general\"+i},[e._v(\"\\n              \"+e._s(t)+\"\\n            \")])})):n(\"div\",{domProps:{innerHTML:e._s(i.value)}})],2)])]}}],null,!1,3145416524)})],1)}),[],!1,null,null,null);\"function\"==typeof m&&m(p),p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},Y2OC:function(e,t,n){\"use strict\";var i=n(\"lABG\");n.n(i).a},\"YCS+\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"HZ23\"),a=n.n(i),s=n(\"i3se\"),r=n.n(s),o={components:{PercentageDoughnut:a.a},props:{progress:{required:!0,type:Object}},computed:{color:()=>r.a.getVar(\"--color-secondary\"),backgroundColor:()=>r.a.getVar(\"--color-neutral-4\"),labelColor:()=>r.a.getVar(\"--color-text\")}},c=(n(\"DZZz\"),n(\"KHd+\")),l=function(e){e.options.__langStrings={totara_competency:[\"chart_label_proficient\"]}},d=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-assignmentProgress\"},[n(\"PercentageDoughnut\",{staticClass:\"tui-assignmentProgress__progress-card\",attrs:{percentage:e.progress.overall_progress,label:e.$str(\"chart_label_proficient\",\"totara_competency\"),\"label-font-size\":13,\"label-font-weight\":\"bold\",\"percentage-font-size\":24,square:!0,\"label-color\":e.labelColor,color:e.color,\"background-color\":e.backgroundColor}}),e._v(\" \"),n(\"div\",{staticClass:\"tui-assignmentProgress__header\"},[e._v(\"\\n    \"+e._s(e.progress.name)+\"\\n  \")])],1)}),[],!1,null,null,null);\"function\"==typeof l&&l(d),d.options.__hasBlocks={script:!0,template:!0};t.default=d.exports},YDfs:function(e,t,n){\"use strict\";var i=n(\"DGVr\");n.n(i).a},YUDR:function(e,t){e.exports=tui.require(\"tui/components/progresstracker/ProgressTrackerNavCircleAchievement\")},Ygam:function(e,t){e.exports=tui.require(\"totara_competency/components/details/ArchivedAssignmentsTable\")},Yoo0:function(e,t){e.exports=tui.require(\"totara_competency/components/profile/CurrentProgress\")},Zoit:function(e,t){e.exports=tui.require(\"totara_competency/components/achievements/AchievementLayout\")},ZoqZ:function(e,t,n){},aFZt:function(e,t,n){\"use strict\";n.r(t);var i=n(\"yikf\"),a=n.n(i),s=n(\"5qAA\"),r=n.n(s),o=n(\"KGot\"),c=n.n(o),l=n(\"8n92\"),d=n.n(l),u={components:{Table:a.a,HeaderCell:r.a,Cell:c.a,MyRatingCell:d.a},props:{competencies:{required:!0,type:Array},baseUrl:{required:!0,type:String},userId:{required:!0,type:Number},scales:{required:!0,type:Array}},computed:{groupedCompetencyData(){return this.competencies.map(e=>({id:e.competency.id,rows:e.items.map(t=>Object.assign({competency:e.competency},t))}))}},methods:{competencyDetailsLink(e){const t={competency_id:e.competency.id};return this.isMine||(t.user_id=this.userId),this.$url(this.baseUrl+\"/details/index.php\",t)}}},m=n(\"KHd+\"),p=function(e){e.options.__langStrings={core:[\"no\",\"yes\"],totara_competency:[\"header_competency\",\"header_assignment_reasons\",\"header_archived_date\",\"proficient\",\"achievement_level\"]}},_=Object(m.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Table\",{attrs:{data:e.groupedCompetencyData,\"group-mode\":!0,archived:!0},scopedSlots:e._u([{key:\"header-row\",fn:function(){return[n(\"HeaderCell\",{attrs:{size:\"3\"}},[e._v(\"\\n      \"+e._s(e.$str(\"header_competency\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"2\"}},[e._v(\"\\n      \"+e._s(e.$str(\"header_assignment_reasons\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"2\"}},[e._v(\"\\n      \"+e._s(e.$str(\"header_archived_date\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"2\",align:\"center\"}},[e._v(\"\\n      \"+e._s(e.$str(\"proficient\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"2\"}},[e._v(\"\\n      \"+e._s(e.$str(\"achievement_level\",\"totara_competency\"))+\"\\n    \")])]},proxy:!0},{key:\"row\",fn:function(t){var i=t.row,a=t.firstInGroup;return[n(\"Cell\",{attrs:{size:\"3\",\"column-header\":e.$str(\"header_competency\",\"totara_competency\"),\"repeated-header\":!a}},[n(\"a\",{attrs:{href:e.competencyDetailsLink(i)}},[e._v(e._s(i.competency.fullname))])]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"2\",\"column-header\":e.$str(\"header_assignment_reasons\",\"totara_competency\")}},[e._v(\"\\n      \"+e._s(i.assignment&&i.assignment.progress_name)+\"\\n    \")]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"2\",\"column-header\":e.$str(\"header_archived_date\",\"totara_competency\")}},[e._v(\"\\n      \"+e._s(i.assignment&&(i.assignment.archived_at||i.assignment.unassigned_at))+\"\\n    \")]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"2\",align:\"center\",\"column-header\":e.$str(\"proficient\",\"totara_competency\")}},[i.proficient?n(\"CheckIcon\",{attrs:{size:\"200\",alt:e.$str(\"yes\",\"core\")}}):n(\"span\",[n(\"span\",{attrs:{\"aria-hidden\":!0}},[e._v(\"-\")]),e._v(\" \"),n(\"span\",{staticClass:\"sr-only\"},[e._v(e._s(e.$str(\"no\",\"core\")))])])],1),e._v(\" \"),n(\"Cell\",{attrs:{size:\"2\",\"column-header\":e.$str(\"achievement_level\",\"totara_competency\")}},[i.my_value?n(\"MyRatingCell\",{attrs:{value:i.my_value,scales:e.scales}}):e._e()],1)]}}])})}),[],!1,null,null,null);\"function\"==typeof p&&p(_),_.options.__hasBlocks={script:!0,template:!0};t.default=_.exports},acdx:function(e,t,n){\"use strict\";var i=n(\"3gXZ\");n.n(i).a},b5Rx:function(e,t,n){},bAb2:function(e,t){e.exports=tui.require(\"totara_competency/components/summary/CompetencySummaryGeneral\")},bYkL:function(e,t){e.exports=tui.require(\"tui/components/adder/Adder\")},bxeI:function(e,t){e.exports=tui.require(\"tui/components/layouts/LayoutOneColumn\")},cHhT:function(e,t){e.exports=tui.require(\"totara_competency/components/performelement_linked_review/ParticipantContent\")},cfoa:function(e,t,n){\"use strict\";var i=n(\"3qNn\");n.n(i).a},csKv:function(e,t){e.exports=tui.require(\"tui/components/form/FormRowStack\")},dNVj:function(e,t,n){\"use strict\";var i=n(\"ne8U\");n.n(i).a},dtfu:function(e,t){e.exports=tui.require(\"tui/components/responsive/Responsive\")},e3MU:function(e,t){e.exports=tui.require(\"tui/components/buttons/InfoIconButton\")},e7qB:function(e,t,n){},eS4Y:function(e,t,n){\"use strict\";var i=n(\"I1l6\");n.n(i).a},epks:function(e,t){e.exports=tui.require(\"totara_competency/components/profile/NoCompetencyAssignments\")},fCWf:function(e,t){e.exports=tui.require(\"tui/components/links/ActionLink\")},fCaH:function(e,t,n){\"use strict\";var i=n(\"tEJh\");n.n(i).a},\"g8/U\":function(e,t){e.exports=tui.require(\"tui/components/layouts/PageHeading\")},gXO8:function(e,t,n){},\"gls+\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"vF5l\"),a=n.n(i),s=n(\"9G+f\"),r=n.n(s),o=n(\"pHFC\"),c=n.n(o),l={components:{Button:a.a,Popover:r.a,RatingScaleOverview:c.a},props:{value:{required:!0,type:Object},ratingScale:Object,scales:{type:Array,validator:()=>(console.warn('The \"scales\" prop has been deprecated, please use the \"rating-scale\" prop instead.'),!0)}},computed:{scale(){return this.scales?this.scales.find(({id:e})=>e===this.value.scale_id):this.ratingScale}},created(){this.scales||this.ratingScale||console.warn(\"Either scale or scales prop must be supplied.\")}},d=n(\"KHd+\"),u=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.scale?n(\"Popover\",{attrs:{triggers:[\"click\"]},scopedSlots:e._u([{key:\"trigger\",fn:function(){return[n(\"Button\",{attrs:{styleclass:{reveal:!0},text:e.value.name}})]},proxy:!0}],null,!1,504032633)},[e._v(\" \"),n(\"RatingScaleOverview\",{attrs:{scale:e.scale,\"reverse-values\":!0}})],1):e._e()}),[],!1,null,null,null);u.options.__hasBlocks={script:!0,template:!0};t.default=u.exports},gqVV:function(e,t,n){\"use strict\";t.a={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_profile_competency_details\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"status\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"Int\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_profile_competency_details\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"competency_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"status\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"status\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"competency\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"description\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"items\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"assignment\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"archived_at\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"DATE\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"created_at\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"DATE\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_group_type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"progress_name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reason_assigned\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_archive\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"is_assigned\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"unassigned_at\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"DATE\"}},{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}}],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"my_value\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"percentage\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"proficient\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"min_value\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]}]}}]}}]}}]}}]}},grF1:function(e,t,n){\"use strict\";n.r(t);var i=n(\"o0O/\"),a=n.n(i),s=n(\"jJ8l\"),r=n.n(s),o=n(\"BxDI\"),c=n.n(o),l=n(\"lLj0\"),d=n.n(l),u={components:{AndBox:a.a,Card:r.a,Separator:c.a,WarningIcon:d.a},props:{path:{type:Object}}},m=(n(\"iy/T\"),n(\"KHd+\")),p=Object(m.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Card\",{attrs:{\"no-border\":!e.path.multiCriteria}},[n(\"div\",{staticClass:\"tui-competencySummaryAchievementCriteria\",class:{\"tui-competencySummaryAchievementCriteria--multi\":e.path.multiCriteria}},[e._l(e.path.criteria_summary,(function(t,i){return[i?n(\"Separator\",{key:i+\"and\",staticClass:\"tui-competencySummaryAchievementCriteria__and\"},[n(\"AndBox\")],1):e._e(),e._v(\" \"),n(\"div\",{key:i,staticClass:\"tui-competencySummaryAchievementCriteria__criterion\"},[n(\"div\",[n(\"h5\",{staticClass:\"tui-competencySummaryAchievementCriteria__criterion-header\"},[e._v(\"\\n            \"+e._s(t.item_type)+\"\\n          \")]),e._v(\" \"),t.item_aggregation?n(\"span\",{staticClass:\"tui-competencySummaryAchievementCriteria__criterion-aggregation\"},[e._v(\"\\n            (\"+e._s(t.item_aggregation)+\")\\n          \")]):e._e()]),e._v(\" \"),n(\"div\",{staticClass:\"tui-competencySummaryAchievementCriteria__criterion-items\"},e._l(t.items,(function(t,i){return n(\"div\",{key:i},[e._v(\"\\n            \"+e._s(t.description)+\"\\n            \"),t.error?n(\"span\",{staticClass:\"tui-competencySummaryAchievementCriteria__warning\"},[n(\"WarningIcon\",{attrs:{size:200}}),e._v(\"\\n              \"+e._s(t.error)+\"\\n            \")],1):e._e()])})),0)])]}))],2)])}),[],!1,null,null,null);p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},h23i:function(e,t,n){\"use strict\";n.r(t);var i=n(\"KGot\"),a=n.n(i),s=n(\"rsf9\"),r=n.n(s),o=n(\"5qAA\"),c=n.n(o),l=n(\"mURQ\"),d=n.n(l),u={components:{Cell:a.a,ExpandCell:r.a,HeaderCell:c.a,SelectTable:d.a},props:{value:{type:Array,required:!0},competencies:{type:Array,required:!0},totalCompetencyCount:{type:Number,required:!0}},data:()=>({page:0}),methods:{getAssignmentStatus(e){return this.isAssigned(e)?this.$str(\"currently_assigned\",\"totara_competency\"):this.$str(\"not_assigned\",\"totara_competency\")},isAssigned:e=>Boolean(e.user_assignments)&&e.user_assignments.length>0}},m=(n(\"BbQS\"),n(\"KHd+\")),p=function(e){e.options.__langStrings={totara_competency:[\"all\",\"competencies\",\"currently_assigned\",\"description\",\"competencies\",\"header_competency\",\"header_assignment_status\",\"header_assignment_reasons\",\"not_assigned\"]}},_=Object(m.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-competencySelfAssignmentTable\"},[n(\"h3\",{staticClass:\"tui-competencySelfAssignmentTable__header\"},[e._v(\"\\n    \"+e._s(e.$str(\"competencies\",\"totara_competency\",e.totalCompetencyCount))+\"\\n  \")]),e._v(\" \"),n(\"SelectTable\",{attrs:{value:e.value,data:e.competencies,\"expandable-rows\":!0,\"select-all-enabled\":!0,\"checkbox-v-align\":\"center\"},on:{input:function(t){return e.$emit(\"input\",t)}},scopedSlots:e._u([{key:\"header-row\",fn:function(){return[n(\"ExpandCell\",{attrs:{header:!0}}),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"4\"}},[e._v(\"\\n        \"+e._s(e.$str(\"header_competency\",\"totara_competency\"))+\"\\n      \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"4\"}},[e._v(\"\\n        \"+e._s(e.$str(\"header_assignment_status\",\"totara_competency\"))+\"\\n      \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"4\"}},[e._v(\"\\n        \"+e._s(e.$str(\"header_assignment_reasons\",\"totara_competency\"))+\"\\n      \")])]},proxy:!0},{key:\"row\",fn:function(t){var i=t.row,a=t.expand,s=t.expandState;return[n(\"ExpandCell\",{attrs:{\"aria-label\":i.display_name,empty:!i.description,\"expand-state\":s},on:{click:function(e){return a()}}}),e._v(\" \"),n(\"Cell\",{attrs:{size:\"4\",\"column-header\":e.$str(\"header_competency\",\"totara_competency\"),valign:\"center\"}},[e._v(\"\\n        \"+e._s(i.display_name)+\"\\n      \")]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"4\",\"column-header\":e.$str(\"header_assignment_status\",\"totara_competency\"),valign:\"center\"}},[e._v(\"\\n        \"+e._s(e.getAssignmentStatus(i))+\"\\n      \")]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"4\",\"column-header\":i.user_assignments.length>0?e.$str(\"header_assignment_reasons\",\"totara_competency\"):\"\",valign:\"center\"}},[n(\"ul\",{staticClass:\"tui-competencySelfAssignmentTable__reasons\"},e._l(i.user_assignments,(function(t){return n(\"li\",{key:t.id},[e._v(\"\\n            \"+e._s(t.reason_assigned)+\"\\n          \")])})),0)])]}},{key:\"expand-content\",fn:function(t){var i=t.row;return[n(\"div\",{staticClass:\"tui-competencySelfAssignmentTable__expand\"},[n(\"h4\",{staticClass:\"tui-competencySelfAssignmentTable__expand-header\"},[e._v(\"\\n          \"+e._s(i.display_name)+\"\\n        \")]),e._v(\" \"),n(\"h5\",{staticClass:\"tui-competencySelfAssignmentTable__expand-subHeader\"},[e._v(\"\\n          \"+e._s(e.$str(\"description\",\"totara_competency\"))+\"\\n        \")]),e._v(\" \"),n(\"div\",{domProps:{innerHTML:e._s(i.description)}})])]}}])})],1)}),[],!1,null,null,null);\"function\"==typeof p&&p(_),_.options.__hasBlocks={script:!0,template:!0};t.default=_.exports},hNaK:function(e,t,n){\"use strict\";n.r(t);var i=n(\"PNtU\"),a=n.n(i),s=n(\"EkZJ\"),r=n.n(s),o={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_scale\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"id\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_id\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"framework_id\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_scale\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"competency_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"framework_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"framework_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"description\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"defaultid\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"values\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"idnumber\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"description\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"scaleid\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"numericscore\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"sortorder\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"proficient\"},arguments:[],directives:[]}]}}]}}]}}]},c={components:{Lozenge:a.a,ProgressTracker:r.a},props:{myValue:{type:[Number,String]},minValue:{type:[Number,String]},competencyId:{required:!0,type:Number}},data:function(){return{scale:{}}},apollo:{scale:{query:o,context:{batch:!0},variables(){return{competency_id:this.competencyId}},update({totara_competency_scale:e}){return this.$emit(\"loaded\"),e}}},computed:{minProficientValueId(){return this.minValue?this.minValue:this.scale.values?this.scale.values.find(({proficient:e})=>e).id:null},formattedForTracker(){return this.scale.values?this.scale.values.map(e=>{let t=this.getItemStates(e),n=this.getItemStateString(t);return{description:e.description,id:e.id,label:e.name,states:t,stateString:n}}):[]}},methods:{getItemStates(e){let t=[],n=parseInt(e.id),i=parseInt(this.minProficientValueId),a=parseInt(this.myValue),s=a<=i;return i&&n===i&&t.push(\"target\"),n===a&&t.push(\"current\"),a&&n>=a?s&&n>=i?t.push(\"achieved\"):t.push(\"complete\"):t.push(\"pending\"),t},getItemStateString(e){let t;return t=e.includes(\"pending\")?this.$str(\"completion-n\",\"completion\"):e.includes(\"complete\")?this.$str(\"completion-y\",\"completion\"):this.$str(\"a11y_achievedrequiredgoal\",\"totara_core\"),e.includes(\"target\")?this.$str(\"a11y_achievement_target_with_status\",\"totara_core\",t):this.$str(\"ally_status_with_value\",\"totara_core\",t)}}},l=(n(\"4Zth\"),n(\"KHd+\")),d=function(e){e.options.__langStrings={totara_competency:[\"no_description\",\"proficient_level\"],completion:[\"completion-n\",\"completion-y\"],totara_core:[\"a11y_achievedrequiredgoal\",\"ally_status_with_value\",\"a11y_achievement_target_with_status\"]}},u=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-competencyDetailProgress\"},[n(\"ProgressTracker\",{attrs:{items:e.formattedForTracker,\"popover-trigger-type\":[\"click\"],\"label-opens-popover\":!0},scopedSlots:e._u([{key:\"label\",fn:function(t){var n=t.entry;return[e._v(\"\\n      \"+e._s(n.label)+\"\\n    \")]}},{key:\"custom-popover-content\",fn:function(t){var i=t.description,a=t.label,s=t.target;return[n(\"div\",{staticClass:\"tui-competencyDetailProgress__popover\"},[s?n(\"div\",{staticClass:\"tui-competencyDetailProgress__popover-target\"},[n(\"Lozenge\",{attrs:{text:e.$str(\"proficient_level\",\"totara_competency\"),type:\"success\"}})],1):e._e(),e._v(\" \"),n(\"h5\",{staticClass:\"tui-competencyDetailProgress__popover-header\"},[e._v(\"\\n          \"+e._s(a)+\"\\n        \")]),e._v(\" \"),i?n(\"div\",{staticClass:\"tui-competencyDetailProgress__popover-body\",domProps:{innerHTML:e._s(i)}}):n(\"div\",{staticClass:\"tui-competencyDetailProgress__popover-body\"},[e._v(\"\\n          \"+e._s(e.$str(\"no_description\",\"totara_competency\"))+\"\\n        \")])])]}}])})],1)}),[],!1,null,null,null);\"function\"==typeof d&&d(u),u.options.__hasBlocks={script:!0,template:!0};t.default=u.exports},\"hOV+\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"JThd\"),a={components:{ProficientIcon:n.n(i).a},props:{proficientStatus:{type:Boolean,required:!0}}},s=(n(\"vdX2\"),n(\"KHd+\")),r=function(e){e.options.__langStrings={totara_competency:[\"not_proficient\",\"proficient\"]}},o=Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"span\",{staticClass:\"tui-competencyDetailProficientStatus\",class:{\"tui-competencyDetailProficientStatus-srOnly\":!e.proficientStatus}},[e.proficientStatus?n(\"ProficientIcon\",{attrs:{size:\"200\"}}):e._e(),e._v(\" \"),n(\"span\",[e._v(\"\\n    \"+e._s(e.$str(e.proficientStatus?\"proficient\":\"not_proficient\",\"totara_competency\"))+\"\\n  \")])],1)}),[],!1,null,null,null);\"function\"==typeof r&&r(o),o.options.__hasBlocks={script:!0,template:!0};t.default=o.exports},hgKs:function(e,t,n){\"use strict\";n.r(t);var i=n(\"KGot\"),a=n.n(i),s=n(\"rNse\"),r=n.n(s),o=n(\"yikf\"),c=n.n(o),l={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_linked_courses\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_linked_courses\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"competency_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"competency_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"course_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"is_mandatory\"},arguments:[],directives:[]}]}}]}}]},d={components:{Cell:a.a,EditIcon:r.a,Table:c.a},props:{competencyId:{required:!0,type:Number}},data:function(){return{data:[],editUrl:\"\"}},apollo:{data:{query:l,variables(){return{competency_id:this.competencyId}},update({totara_competency_linked_courses:e}){return this.editUrl=this.$url(\"/totara/competency/competency_edit.php\",{s:\"linkedcourses\",id:this.competencyId}),e}}},methods:{courseUrl(e){return this.$url(\"/course/view.php\",{id:e})}}},u=n(\"KHd+\"),m=function(e){e.options.__langStrings={core:[\"edit\"],totara_competency:[\"linked_courses\",\"mandatory\",\"no_courses_linked_yet\",\"optional\"]}},p=Object(u.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-competencyOverviewLinkedCourses\"},[n(\"div\",{staticClass:\"tui-competencySummary__sectionHeader\"},[n(\"h3\",{staticClass:\"tui-competencySummary__sectionHeader-title\"},[e._v(\"\\n      \"+e._s(e.$str(\"linked_courses\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"a\",{staticClass:\"tui-competencySummary__sectionHeader-edit\",attrs:{href:e.editUrl,title:e.$str(\"edit\",\"core\")}},[n(\"EditIcon\",{attrs:{size:200,alt:e.$str(\"edit\",\"core\")}})],1)]),e._v(\" \"),n(\"Table\",{attrs:{data:e.data,\"border-bottom-hidden\":!0,\"border-top-hidden\":!0,\"border-separator-hidden\":!0,\"hover-off\":!0,\"no-items-text\":e.$str(\"no_courses_linked_yet\",\"totara_competency\")},scopedSlots:e._u([{key:\"row\",fn:function(t){var i=t.row;return[n(\"Cell\",{attrs:{size:\"6\",valign:\"center\"}},[n(\"a\",{attrs:{href:e.courseUrl(i.course_id)}},[e._v(\"\\n          \"+e._s(i.fullname)+\"\\n        \")])]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"10\",valign:\"center\"}},[n(\"span\",[e._v(\"\\n          \"+e._s(e.$str(i.is_mandatory?\"mandatory\":\"optional\",\"totara_competency\"))+\"\\n        \")])])]}}])})],1)}),[],!1,null,null,null);\"function\"==typeof m&&m(p),p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},i3se:function(e,t){e.exports=tui.require(\"tui/theme\")},\"iy/T\":function(e,t,n){\"use strict\";var i=n(\"qHIe\");n.n(i).a},jJ8l:function(e,t){e.exports=tui.require(\"tui/components/card/Card\")},\"k7/G\":function(e,t){e.exports=tui.require(\"tui/components/decor/OrBox\")},kPEt:function(e,t){e.exports=tui.require(\"totara_competency/components/details/Progress\")},\"kV+/\":function(e,t){e.exports=tui.require(\"tui/components/toggle/ToggleButton\")},lABG:function(e,t,n){},lLj0:function(e,t){e.exports=tui.require(\"tui/components/icons/Warning\")},lQjX:function(e,t,n){\"use strict\";var i=n(\"N+jV\");n.n(i).a},lTsS:function(e,t,n){\"use strict\";n.r(t);var i={inheritAttrs:!1,props:{assignmentId:{required:!0,type:Number},competencyId:{type:Number},type:{required:!0,type:String},userId:{required:!0,type:Number}},data:function(){return{component:null}},mounted:function(){let e=`pathway_${this.type}/components/achievements/AchievementDisplay`;this.component=tui.asyncComponent(e)},methods:{isLoaded(){this.$emit(\"loaded\")}}},a=n(\"KHd+\"),s=Object(a.a)(i,(function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",[t(this.component,{tag:\"component\",attrs:{\"assignment-id\":this.assignmentId,\"competency-id\":this.competencyId,\"user-id\":this.userId},on:{loaded:this.isLoaded}})],1)}),[],!1,null,null,null);s.options.__hasBlocks={script:!0,template:!0};t.default=s.exports},luBG:function(e,t,n){\"use strict\";var i=n(\"qJ4i\");n.n(i).a},lyMP:function(e,t){e.exports=tui.require(\"tui/components/icons/RemoveUser\")},mOtL:function(e,t,n){\"use strict\";var i=n(\"ryKQ\");n.n(i).a},mURQ:function(e,t){e.exports=tui.require(\"tui/components/datatable/SelectTable\")},nMuw:function(e,t,n){\"use strict\";n.r(t);var i=n(\"JXQf\"),a=n.n(i),s=n(\"1i2V\"),r=n.n(s),o=n(\"txsu\"),c=n.n(o),l={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_achievement_paths\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"assignment_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_achievement_paths\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"assignment_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"assignment_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"class\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]}]}}]}}]},d={components:{Loader:a.a,Tab:r.a,Tabs:c.a},props:{assignment:{required:!0,type:Object},competencyId:{type:Number},userId:{required:!0,type:Number}},data:function(){return{achievements:[],itemsLoaded:null,loading:!0}},apollo:{achievements:{query:l,context:{batch:!0},variables(){return{assignment_id:this.assignmentId,user_id:this.userId}},update({totara_competency_achievement_paths:e}){let t=[];return e.forEach(e=>{let n=\"totara_competency/components/achievements/\"+this.capitalizeFirstLetter(e.class);t.push({component:tui.asyncComponent(n),props:{userId:this.userId,assignmentId:this.assignmentId,competencyId:this.competencyId,type:e.type,name:e.name}})}),0===t.length&&(this.loading=!1),t}}},computed:{assignmentId(){return parseInt(this.assignment.id)},numberOfItems(){return this.achievements.length}},watch:{itemsLoaded:function(e){e===this.numberOfItems&&(this.loading=!1)},assignmentId:function(){this.loading=!1}},methods:{capitalizeFirstLetter:e=>e.charAt(0).toUpperCase()+e.toLowerCase().slice(1),itemLoaded(){this.itemsLoaded+=1}}},u=(n(\"FKgf\"),n(\"KHd+\")),m=function(e){e.options.__langStrings={totara_competency:[\"no_achievement_criteria\",\"ways_to_achieve_proficiency\"]}},p=Object(u.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-competencyAchievements\"},[n(\"Loader\",{attrs:{loading:e.loading}},[n(\"h3\",{staticClass:\"tui-competencyAchievements__title\"},[e._v(\"\\n      \"+e._s(e.$str(\"ways_to_achieve_proficiency\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),e.achievements.length?n(\"Tabs\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.loading,expression:\"!loading\"}],key:e.assignmentId,staticClass:\"tui-competencyAchievements__tabs\",attrs:{\"transparent-tabs\":!0}},e._l(e.achievements,(function(t,i){return n(\"Tab\",{key:i,attrs:{id:i,\"always-render\":!0,name:t.props.name}},[n(t.component,e._b({tag:\"component\",on:{loaded:e.itemLoaded}},\"component\",t.props,!1))],1)})),1):n(\"div\",{staticClass:\"tui-competencyAchievements__empty\"},[e._v(\"\\n      \"+e._s(e.$str(\"no_achievement_criteria\",\"totara_competency\"))+\"\\n    \")])],1)],1)}),[],!1,null,null,null);\"function\"==typeof m&&m(p),p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},nRyV:function(e,t,n){},ne8U:function(e,t,n){},\"nvA/\":function(e,t,n){\"use strict\";var i=n(\"CpVI\");n.n(i).a},\"o0O/\":function(e,t){e.exports=tui.require(\"tui/components/decor/AndBox\")},oYdF:function(e,t,n){\"use strict\";n.r(t);var i=n(\"6Nah\"),a=n.n(i),s=n(\"GfQT\"),r=n.n(s),o={components:{AssignedCompetencyAdder:a.a,SelectContent:r.a},props:{canShowAdder:{type:Boolean,required:!0},coreRelationship:Array,isDraft:Boolean,participantInstanceId:{type:[String,Number],required:!0},previewComponent:[Function,Object],required:Boolean,sectionElementId:String,subjectUser:Object,userId:Number},methods:{getAdder:()=>a.a,getItemData:e=>({competency:{display_name:e.competency.display_name,description:e.competency.description,id:e.competency.id},assignment:{reason_assigned:e.reason_assigned},achievement:{id:e.my_value.id,name:e.my_value.name,proficient:e.my_value.proficient},scale_values:e.assignment.scale.values})}},c=n(\"KHd+\"),l=function(e){e.options.__langStrings={totara_competency:[\"add_competencies\",\"awaiting_selection_text\",\"remove_competency\"]}},d=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"SelectContent\",{attrs:{adder:e.getAdder(),\"add-btn-text\":e.$str(\"add_competencies\",\"totara_competency\"),\"can-show-adder\":e.canShowAdder,\"cant-add-text\":e.$str(\"awaiting_selection_text\",\"totara_competency\",e.coreRelationship[0].name),\"is-draft\":e.isDraft,\"participant-instance-id\":e.participantInstanceId,\"remove-text\":e.$str(\"remove_competency\",\"totara_competency\"),required:e.required,\"section-element-id\":e.sectionElementId,\"user-id\":e.userId},on:{\"unsaved-plugin-change\":function(t){return e.$emit(\"unsaved-plugin-change\",t)},update:function(t){return e.$emit(\"update\",t)}},scopedSlots:e._u([{key:\"content-preview\",fn:function(t){var i=t.content;return[n(e.previewComponent,{tag:\"component\",attrs:{content:e.getItemData(i),\"subject-user\":e.subjectUser}})]}}])})}),[],!1,null,null,null);\"function\"==typeof l&&l(d),d.options.__hasBlocks={script:!0,template:!0};t.default=d.exports},oaAl:function(e,t,n){},om5Z:function(e,t,n){},ouCZ:function(e,t,n){\"use strict\";n.r(t);var i=n(\"UjaO\"),a=n.n(i),s=n(\"5h9J\"),r=n.n(s),o=n(\"C+/B\"),c=n.n(o),l=n(\"NAOU\"),d=n.n(l),u=n(\"D9If\"),m=n.n(u),p=n(\"YUDR\"),_=n.n(p),v=n(\"49h4\"),y=n.n(v),g=n(\"vyVp\"),h={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"totara_competency_archive_user_assignment\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"assignment_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_archive_user_assignment\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"assignment_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"assignment_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"archived_assignment\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]}]}}]}}]}}]},f=n(\"gqVV\"),k=n(\"qw+c\"),b={components:{ArchiveIcon:a.a,ButtonIcon:r.a,ConfirmationModal:c.a,Grid:d.a,GridItem:m.a,SelectFilter:y.a,ProgressTrackerNavCircleAchievement:_.a},props:{activeAssignmentList:{required:!0,type:Array},selectedAssignmentProficiency:{type:Object},value:{type:Number},competencyId:{required:!0,type:Number},userId:{required:!0,type:Number}},data(){return{selectedAssignment:this.value,showArchiveConfirmation:!1}},computed:{progressStates(){let e=[this.selectedAssignmentProficiencyState];return\"complete\"!==this.selectedAssignmentProficiencyState&&e.push(\"target\"),e},selectedAssignmentProficiencyState(){return this.selectedAssignmentProficiency.id&&this.selectedAssignmentProficiency.proficient?\"achieved\":this.selectedAssignmentProficiency.id?\"complete\":\"pending\"},showCanArchiveButton(){let e=this.activeAssignmentList.find(e=>e.id===this.selectedAssignment);return e&&e.can_archive}},methods:{selectedAssignmentChange(e){this.$emit(\"input\",e)},showArchiveConfirmDialog(){this.showArchiveConfirmation=!0},async makeArchiveAssignmentMutation(){let{assignment_id:e}=this.activeAssignmentList.find(e=>e.id===this.value);try{await this.$apollo.mutate({mutation:h,variables:{assignment_id:e},refetchQueries:[{query:f.a,variables:{user_id:this.userId,competency_id:this.competencyId,status:k.ASSIGNMENT_ACTIVE}}],refetchAll:!1}),Object(g.notify)({type:\"success\",message:this.$str(\"event_assignment_archived\",\"totara_competency\")}),this.selectedAssignment=0}finally{this.showArchiveConfirmation=!1}}}},N=(n(\"HjqD\"),n(\"KHd+\")),S=function(e){e.options.__langStrings={totara_competency:[\"achievement_level\",\"action_archive_this\",\"action_archive_user_modal_header\",\"action_archive_user_assignment_modal\",\"assignment\",\"confirm_generic\",\"error_generic_mutation\",\"event_assignment_archived\",\"more_information\",\"not_proficient\",\"proficient\"]}},C=Object(N.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-competencyDetailAssignment\"},[n(\"div\",{staticClass:\"tui-competencyDetailAssignment__bar\"},[n(\"Grid\",{attrs:{\"stack-at\":700}},[n(\"GridItem\",{attrs:{units:4}},[n(\"SelectFilter\",{staticClass:\"tui-competencyDetailAssignment__bar-filter\",attrs:{label:e.$str(\"assignment\",\"totara_competency\"),name:\"select_assignment\",large:!0,options:e.activeAssignmentList},on:{input:e.selectedAssignmentChange},model:{value:e.selectedAssignment,callback:function(t){e.selectedAssignment=t},expression:\"selectedAssignment\"}})],1),e._v(\" \"),n(\"GridItem\",{class:\"tui-competencyDetailAssignment__level\",attrs:{units:4}},[n(\"div\",{staticClass:\"tui-competencyDetailAssignment__level-wrap\",class:\"tui-competencyDetailAssignment__level-wrap-\"+e.selectedAssignmentProficiencyState},[n(\"p\",{staticClass:\"tui-competencyDetailAssignment__level-header\"},[e._v(\"\\n            \"+e._s(e.$str(\"achievement_level\",\"totara_competency\"))+\"\\n          \")]),e._v(\" \"),n(\"div\",{staticClass:\"tui-competencyDetailAssignment__level-text\"},[e._v(\"\\n            \"+e._s(e.selectedAssignmentProficiency.name)+\"\\n          \")])])]),e._v(\" \"),n(\"GridItem\",{class:\"tui-competencyDetailAssignment__status\",attrs:{units:4}},[n(\"ProgressTrackerNavCircleAchievement\",{attrs:{states:e.progressStates,\"is-interactable\":!1,\"aria-role\":\"\"}}),e._v(\" \"),n(\"span\",{staticClass:\"tui-competencyDetailAssignment__status-text\",class:{\"tui-competencyDetailAssignment__status-text-complete\":\"complete\"===e.selectedAssignmentProficiencyState}},[e._v(\"\\n          \"+e._s(e.$str(e.selectedAssignmentProficiency.proficient?\"proficient\":\"not_proficient\",\"totara_competency\"))+\"\\n        \")])],1)],1),e._v(\" \"),n(\"ConfirmationModal\",{attrs:{title:e.$str(\"action_archive_user_modal_header\",\"totara_competency\"),open:e.showArchiveConfirmation},on:{confirm:e.makeArchiveAssignmentMutation,cancel:function(t){e.showArchiveConfirmation=!1}}},[n(\"p\",[e._v(\"\\n        \"+e._s(e.$str(\"action_archive_user_assignment_modal\",\"totara_competency\"))+\"\\n      \")]),e._v(\" \"),n(\"p\",[e._v(\"\\n        \"+e._s(e.$str(\"confirm_generic\",\"totara_competency\"))+\"\\n      \")])])],1),e._v(\" \"),n(\"div\",{staticClass:\"tui-competencyDetailAssignment__actions\"},[e.showCanArchiveButton?n(\"ButtonIcon\",{attrs:{\"aria-label\":\"\",styleclass:{small:!0},text:e.$str(\"action_archive_this\",\"totara_competency\")},on:{click:e.showArchiveConfirmDialog}},[n(\"ArchiveIcon\")],1):e._e()],1)])}),[],!1,null,null,null);\"function\"==typeof S&&S(C),C.options.__hasBlocks={script:!0,template:!0};t.default=C.exports},pFDD:function(e,t,n){\"use strict\";var i=n(\"8DMs\");n.n(i).a},pHFC:function(e,t){e.exports=tui.require(\"totara_competency/components/RatingScaleOverview\")},qGal:function(e,t){e.exports=tui.require(\"totara_competency/constants\")},qHIe:function(e,t,n){},qJ4i:function(e,t,n){},\"qw+c\":function(e,t,n){\"use strict\";n.r(t),n.d(t,\"ASSIGNMENT_ACTIVE\",(function(){return i})),n.d(t,\"ASSIGNMENT_ARCHIVED\",(function(){return a}));const i=1,a=2},rNse:function(e,t){e.exports=tui.require(\"tui/components/icons/Edit\")},rsf9:function(e,t){e.exports=tui.require(\"tui/components/datatable/ExpandCell\")},ryKQ:function(e,t,n){},tEJh:function(e,t,n){},tVAA:function(e,t,n){\"use strict\";n.r(t);var i=n(\"NAOU\"),a=n.n(i),s=n(\"D9If\"),r=n.n(s),o={components:{Grid:a.a,GridItem:r.a},props:{noBorders:{type:Boolean}}},c=(n(\"eS4Y\"),n(\"KHd+\")),l=Object(c.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return t(\"Grid\",{staticClass:\"tui-achievementLayout\",class:{\"tui-achievementLayout--borderless\":this.noBorders},attrs:{\"stack-at\":750}},[t(\"GridItem\",{attrs:{units:2}},[t(\"div\",{staticClass:\"tui-achievementLayout__left\"},[this._t(\"left\")],2)]),this._v(\" \"),t(\"GridItem\",{attrs:{units:10}},[this._t(\"right\")],2)],1)}),[],!1,null,null,null);l.options.__hasBlocks={script:!0,template:!0};t.default=l.exports},tkAW:function(e,t){e.exports=tui.require(\"tui/components/modal/Modal\")},txsu:function(e,t){e.exports=tui.require(\"tui/components/tabs/Tabs\")},vF5l:function(e,t){e.exports=tui.require(\"tui/components/buttons/Button\")},vMqX:function(e,t,n){var i={\"./constants\":\"qw+c\",\"./constants.js\":\"qw+c\"};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id=\"vMqX\"},vdX2:function(e,t,n){\"use strict\";var i=n(\"JAtL\");n.n(i).a},vqlw:function(e,t){e.exports=tui.require(\"tui/components/icons/BarChart\")},vyVp:function(e,t){e.exports=tui.require(\"tui/notifications\")},\"wMJ/\":function(e,t,n){\"use strict\";t.a={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_user\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_user\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"user_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"user_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"card_display\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"profile_picture_alt\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profile_picture_url\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profile_url\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"display_fields\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"associate_url\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"value\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"label\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"is_custom\"},arguments:[],directives:[]}]}}]}}]}}]}}]}},wcN6:function(e,t){e.exports=tui.require(\"tui/components/reform/Field\")},xNwe:function(e,t){e.exports=tui.require(\"tui/components/basket/Basket\")},xs84:function(e,t,n){\"use strict\";n.r(t);var i=n(\"KGot\"),a=n.n(i),s=n(\"5qAA\"),r=n.n(s),o=n(\"e3MU\"),c=n.n(o),l=n(\"C4bi\"),d=n.n(l),u=n(\"yikf\"),m=n.n(u),p={components:{Cell:a.a,HeaderCell:r.a,InfoIconButton:c.a,ProficientStatus:d.a,Table:m.a},props:{assignments:{type:Array}}},_=(n(\"mOtL\"),n(\"KHd+\")),v=function(e){e.options.__langStrings={totara_competency:[\"assignment\",\"assignment_date_archived\",\"legacy_assignment_rating_description\",\"legacy_assignment_rating_discontinued\",\"proficiency_status\"]}},y=Object(_.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Table\",{staticClass:\"tui-competencyDetailArchivedAssignmentsTable\",attrs:{data:e.assignments},scopedSlots:e._u([{key:\"header-row\",fn:function(){return[n(\"HeaderCell\",{attrs:{size:\"6\"}},[e._v(\"\\n      \"+e._s(e.$str(\"assignment\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"3\"}},[e._v(\"\\n      \"+e._s(e.$str(\"assignment_date_archived\",\"totara_competency\"))+\"\\n    \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"3\"}},[e._v(\"\\n      \"+e._s(e.$str(\"proficiency_status\",\"totara_competency\"))+\"\\n    \")])]},proxy:!0},{key:\"row\",fn:function(t){var i=t.row;t.expand;return[n(\"Cell\",{attrs:{size:\"6\",\"column-header\":e.$str(\"assignment\",\"totara_competency\")}},[e._v(\"\\n      \"+e._s(i.name)+\"\\n    \")]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"3\",\"column-header\":e.$str(\"assignment_date_archived\",\"totara_competency\")}},[e._v(\"\\n      \"+e._s(i.archivedAt)+\"\\n    \")]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"3\",\"column-header\":e.$str(\"proficiency_status\",\"totara_competency\")}},[n(\"div\",{staticClass:\"tui-competencyDetailArchivedAssignmentsTable__achievement\"},[n(\"ProficientStatus\",{attrs:{\"proficient-status\":i.proficient}}),e._v(\" \"),i.legacy?n(\"InfoIconButton\",{attrs:{\"is-help-for\":e.$str(\"proficiency_status\",\"totara_competency\")}},[n(\"h4\",{staticClass:\"tui-competencyDetailArchivedAssignmentsTable__discontinued\"},[e._v(\"\\n            \"+e._s(e.$str(\"legacy_assignment_rating_discontinued\",\"totara_competency\"))+\"\\n          \")]),e._v(\"\\n          \"+e._s(e.$str(\"legacy_assignment_rating_description\",\"totara_competency\"))+\"\\n        \")]):e._e()],1)])]}}])})}),[],!1,null,null,null);\"function\"==typeof v&&v(y),y.options.__hasBlocks={script:!0,template:!0};t.default=y.exports},\"xx/M\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"bYkL\"),a=n.n(i),s=n(\"KGot\"),r=n.n(s),o=n(\"JThd\"),c=n.n(o),l=n(\"59Wj\"),d=n.n(l),u=n(\"5qAA\"),m=n.n(u),p=n(\"FBvN\"),_=n.n(p),v=n(\"49h4\"),y=n.n(v),g=n(\"mURQ\"),h=n.n(g),f={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_competency_user_assignments\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"input\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"totara_competency_user_assignments_input\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_competency_user_assignments\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"input\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"input\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"items\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"competency\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"display_name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"description\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"assignment\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"scale\"},name:{kind:\"Name\",value:\"assignment_specific_scale\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"values\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"proficient\"},arguments:[],directives:[]}]}}]}}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"my_value\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"proficient\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"reason_assigned\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"filters\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"status_name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"status\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_group_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_group_type\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"total\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"next_cursor\"},arguments:[],directives:[]}]}}]}}]},k=n(\"TXEh\"),b={components:{Adder:a.a,Cell:r.a,CheckIcon:c.a,FilterBar:d.a,HeaderCell:m.a,SearchFilter:_.a,SelectFilter:y.a,SelectTable:h.a},props:{existingItems:{type:Array,default:()=>[]},open:Boolean,customQuery:Object,customQueryKey:String,contextId:Number,showLoadingBtn:Boolean,userId:Number},data(){return{competencies:null,competencySelectedItems:[],filters:{search:\"\"},nextPage:!1,skipQueries:!0,searchDebounce:\"\",reasonAssignedFilter:null,reasonAssignedFilterOptions:[{id:null,label:this.$str(\"all\",\"totara_competency\")}],proficiencyFilter:null,proficientOptions:[{id:null,label:this.$str(\"all\",\"totara_competency\")},{id:!0,label:this.$str(\"proficient\",\"totara_competency\")},{id:!1,label:this.$str(\"not_proficient\",\"totara_competency\")}],typeValue:null,userGroupIdValue:null,userGroupNameValue:null}},watch:{open(){this.open?(this.searchDebounce=\"\",this.skipQueries=!1):this.skipQueries=!0},searchDebounce(e){this.updateFilterDebounced(e)}},created(){this.$apollo.addSmartQuery(\"competencies\",{query:this.customQuery?this.customQuery:f,skip(){return this.skipQueries},variables(){return{input:{filters:{search:this.filters.search,type:this.typeValue,user_group_id:this.userGroupIdValue,user_group_type:this.userGroupNameValue,proficient:this.proficiencyFilter},user_id:this.userId}}},update({[this.customQueryKey?this.customQueryKey:\"totara_competency_user_assignments\"]:e}){this.nextPage=!!e.next_cursor&&e.next_cursor;let t=e.filters.map(e=>({id:e,label:e.name})),n=[{id:null,label:this.$str(\"all\",\"totara_competency\")}];return this.reasonAssignedFilterOptions=[...n,...t],e}}),this.$apollo.addSmartQuery(\"selectedCompetencies\",{query:this.customQuery?this.customQuery:f,skip(){return this.skipQueries},variables(){return{input:{filters:{ids:[]},user_id:this.userId}}},update({[this.customQueryKey?this.customQueryKey:\"totara_competency_user_assignments\"]:e}){return this.competencySelectedItems=e.items,e}})},methods:{async loadMoreItems(){this.nextPage&&this.$apollo.queries.competencies.fetchMore({variables:{input:{cursor:this.nextPage,filters:{search:this.filters.search,type:this.typeValue,user_group_id:this.userGroupIdValue,user_group_type:this.userGroupNameValue,proficient:this.proficiencyFilter},user_id:this.userId}},updateQuery:(e,{fetchMoreResult:t})=>{const n=e.totara_competency_user_assignments,i=t.totara_competency_user_assignments,a=n.items.concat(i.items);return{[this.customQueryKey?this.customQueryKey:\"totara_competency_user_assignments\"]:{items:a,next_cursor:i.next_cursor}}}})},async closeWithData(e){let t;this.$emit(\"add-button-clicked\");try{t=await this.updateSelectedItems(e)}catch(e){return void console.error(e)}this.$emit(\"added\",{ids:e,data:t})},closeModal(){this.reasonAssignedFilter=null,this.setReasonAssignedValues(null),this.proficiencyFilter=null,this.$emit(\"cancel\")},setReasonAssignedValues(e){e?(this.typeValue=e.type,this.userGroupIdValue=e.user_group_id,this.userGroupNameValue=e.user_group_type):(this.typeValue=null,this.userGroupIdValue=null,this.userGroupNameValue=null)},async updateSelectedItems(e){const t=e.length;try{await this.$apollo.queries.selectedCompetencies.refetch({input:{filters:{ids:e},result_size:t,user_id:this.userId}})}catch(e){console.error(e)}return this.competencySelectedItems},updateFilterDebounced:Object(k.debounce)((function(e){this.filters.search=e}),500)}},N=n(\"KHd+\"),S=function(e){e.options.__langStrings={core:[\"no\",\"yes\"],totara_core:[\"search\"],totara_competency:[\"achievement_level\",\"all\",\"filter_competencies\",\"filter_competencies_search_label\",\"header_assignment_reasons\",\"header_competency\",\"not_proficient\",\"proficiency_status\",\"proficient\",\"reason_assigned\",\"select_competencies\"]}},C=Object(N.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Adder\",{attrs:{open:e.open,title:e.$str(\"select_competencies\",\"totara_competency\"),\"existing-items\":e.existingItems,loading:e.$apollo.loading,\"show-load-more\":e.nextPage,\"show-loading-btn\":e.showLoadingBtn},on:{added:function(t){return e.closeWithData(t)},cancel:function(t){return e.closeModal()},\"load-more\":function(t){return e.loadMoreItems()},\"selected-tab-active\":function(t){return e.updateSelectedItems(t)}},scopedSlots:e._u([{key:\"browse-filters\",fn:function(){return[n(\"FilterBar\",{attrs:{\"has-top-bar\":!1,title:e.$str(\"filter_competencies\",\"totara_competency\")},scopedSlots:e._u([{key:\"filters-left\",fn:function(t){var i=t.stacked;return[n(\"SelectFilter\",{attrs:{label:e.$str(\"header_assignment_reasons\",\"totara_competency\"),\"show-label\":!0,options:e.reasonAssignedFilterOptions,stacked:i},on:{input:e.setReasonAssignedValues},model:{value:e.reasonAssignedFilter,callback:function(t){e.reasonAssignedFilter=t},expression:\"reasonAssignedFilter\"}}),e._v(\" \"),n(\"SelectFilter\",{attrs:{label:e.$str(\"proficiency_status\",\"totara_competency\"),\"show-label\":!0,options:e.proficientOptions,stacked:i},model:{value:e.proficiencyFilter,callback:function(t){e.proficiencyFilter=t},expression:\"proficiencyFilter\"}})]}},{key:\"filters-right\",fn:function(t){var i=t.stacked;return[n(\"SearchFilter\",{attrs:{label:e.$str(\"filter_competencies_search_label\",\"totara_competency\"),\"show-label\":!1,placeholder:e.$str(\"search\",\"totara_core\"),stacked:i},model:{value:e.searchDebounce,callback:function(t){e.searchDebounce=t},expression:\"searchDebounce\"}})]}}])})]},proxy:!0},{key:\"browse-list\",fn:function(t){var i=t.disabledItems,a=t.selectedItems,s=t.update;return[n(\"SelectTable\",{attrs:{\"large-check-box\":!0,\"no-label-offset\":!0,value:a,data:e.competencies&&e.competencies.items?e.competencies.items:[],\"disabled-ids\":i,\"checkbox-v-align\":\"center\",\"select-all-enabled\":!0,\"border-bottom-hidden\":!0},on:{input:function(e){return s(e)}},scopedSlots:e._u([{key:\"header-row\",fn:function(){return[n(\"HeaderCell\",{attrs:{size:\"4\",valign:\"center\"}},[e._v(\"\\n          \"+e._s(e.$str(\"header_competency\",\"totara_competency\"))+\"\\n        \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"3\",valign:\"center\"}},[e._v(\"\\n          \"+e._s(e.$str(\"reason_assigned\",\"totara_competency\"))+\"\\n        \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"2\",align:\"center\",valign:\"center\"}},[e._v(\"\\n          \"+e._s(e.$str(\"proficient\",\"totara_competency\"))+\"\\n        \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"3\",valign:\"center\"}},[e._v(\"\\n          \"+e._s(e.$str(\"achievement_level\",\"totara_competency\"))+\"\\n        \")])]},proxy:!0},{key:\"row\",fn:function(t){var i=t.row;return[n(\"Cell\",{attrs:{size:\"4\",\"column-header\":e.$str(\"header_competency\",\"totara_competency\"),valign:\"center\"}},[e._v(\"\\n          \"+e._s(i.competency.display_name)+\"\\n        \")]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"3\",\"column-header\":e.$str(\"reason_assigned\",\"totara_competency\"),valign:\"center\"}},[e._v(\"\\n          \"+e._s(i.reason_assigned)+\"\\n        \")]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"2\",\"column-header\":e.$str(\"proficient\",\"totara_competency\"),align:\"center\",valign:\"center\"}},[i.my_value.proficient?n(\"CheckIcon\",{attrs:{alt:e.$str(\"yes\",\"core\")}}):n(\"span\",[n(\"span\",{attrs:{\"aria-hidden\":!0}},[e._v(\"-\")]),e._v(\" \"),n(\"span\",{staticClass:\"sr-only\"},[e._v(e._s(e.$str(\"no\",\"core\")))])])],1),e._v(\" \"),n(\"Cell\",{attrs:{size:\"3\",\"column-header\":e.$str(\"achievement_level\",\"totara_competency\"),valign:\"center\"}},[e._v(\"\\n          \"+e._s(i.my_value.name)+\"\\n        \")])]}}],null,!0)})]}},{key:\"basket-list\",fn:function(t){var i=t.disabledItems,a=t.selectedItems,s=t.update;return[n(\"SelectTable\",{attrs:{\"large-check-box\":!0,\"no-label-offset\":!0,value:a,data:e.competencySelectedItems,\"disabled-ids\":i,\"checkbox-v-align\":\"center\",\"border-bottom-hidden\":!0,\"select-all-enabled\":!0},on:{input:function(e){return s(e)}},scopedSlots:e._u([{key:\"header-row\",fn:function(){return[n(\"HeaderCell\",{attrs:{size:\"4\",valign:\"center\"}},[e._v(\"\\n          \"+e._s(e.$str(\"header_competency\",\"totara_competency\"))+\"\\n        \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"3\",valign:\"center\"}},[e._v(\"\\n          \"+e._s(e.$str(\"reason_assigned\",\"totara_competency\"))+\"\\n        \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"2\",align:\"center\",valign:\"center\"}},[e._v(\"\\n          \"+e._s(e.$str(\"proficient\",\"totara_competency\"))+\"\\n        \")]),e._v(\" \"),n(\"HeaderCell\",{attrs:{size:\"3\",valign:\"center\"}},[e._v(\"\\n          \"+e._s(e.$str(\"achievement_level\",\"totara_competency\"))+\"\\n        \")])]},proxy:!0},{key:\"row\",fn:function(t){var i=t.row;return[n(\"Cell\",{attrs:{size:\"4\",\"column-header\":e.$str(\"header_competency\",\"totara_competency\"),valign:\"center\"}},[e._v(\"\\n          \"+e._s(i.competency.display_name)+\"\\n        \")]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"3\",\"column-header\":e.$str(\"reason_assigned\",\"totara_competency\"),valign:\"center\"}},[e._v(\"\\n          \"+e._s(i.reason_assigned)+\"\\n        \")]),e._v(\" \"),n(\"Cell\",{attrs:{size:\"2\",\"column-header\":e.$str(\"proficient\",\"totara_competency\"),align:\"center\",valign:\"center\"}},[i.my_value.proficient?n(\"CheckIcon\",{attrs:{alt:e.$str(\"yes\",\"core\")}}):n(\"span\",[n(\"span\",{attrs:{\"aria-hidden\":!0}},[e._v(\"-\")]),e._v(\" \"),n(\"span\",{staticClass:\"sr-only\"},[e._v(e._s(e.$str(\"no\",\"core\")))])])],1),e._v(\" \"),n(\"Cell\",{attrs:{size:\"3\",\"column-header\":e.$str(\"achievement_level\",\"totara_competency\"),valign:\"center\"}},[e._v(\"\\n          \"+e._s(i.my_value.name)+\"\\n        \")])]}}],null,!0)})]}}])})}),[],!1,null,null,null);\"function\"==typeof S&&S(C),C.options.__hasBlocks={script:!0,template:!0};t.default=C.exports},yikf:function(e,t){e.exports=tui.require(\"tui/components/datatable/Table\")},ykDy:function(e,t,n){\"use strict\";var i=n(\"om5Z\");n.n(i).a},ymIi:function(e,t,n){\"use strict\";var i=n(\"gXO8\");n.n(i).a},yuC0:function(e,t){e.exports=tui.require(\"totara_competency/components/IndividualAssignmentProgress\")},zdti:function(e,t){e.exports=tui.require(\"tui/components/notifications/NotificationBanner\")},zs4z:function(e,t){e.exports=tui.require(\"tui/components/layouts/PageBackLink\")}});","extractedComments":[]}