{"code":"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=\"WTOg\")}({\"088a\":function(e,t){e.exports=tui.require(\"totara_comment/components/buttons/ReplyButtonIcon\")},\"0LNn\":function(e,t,n){},\"0VQe\":function(e,t){e.exports=tui.require(\"totara_comment/components/reply/Reply\")},\"1R7l\":function(e,t){e.exports=tui.require(\"totara_reaction/components/SimpleLike\")},\"2rKr\":function(e,t){e.exports=tui.require(\"totara_comment/components/form/EditCommentReplyForm\")},\"2wx7\":function(e,t){e.exports=tui.require(\"editor_weka/components/Weka\")},\"4TfD\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"jx0T\"),a=n.n(i),r=n(\"yAFK\"),o=n(\"fPwS\"),l=n.n(o),m=n(\"0VQe\"),d=n.n(m),s=n(\"UpZR\"),u=n.n(s),c={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_comment_get_replies\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"commentid\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"page\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"replies\"},name:{kind:\"Name\",value:\"totara_comment_replies\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"commentid\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"commentid\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"page\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"page\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"edited\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"deleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"content\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"HTML\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"commentid\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"timedescription\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimagealt\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimageurl\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"totalreactions\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reasondeleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"interactor\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_delete\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_report\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_update\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_react\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_follow_reply\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_view_author\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reacted\"},arguments:[],directives:[]}]}}]}}]}}]},p={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"totara_comment_create_reply\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"commentid\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"content\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"String\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"format\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"draft_id\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"reply\"},name:{kind:\"Name\",value:\"totara_comment_create_reply\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"commentid\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"commentid\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"content\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"content\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"format\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"draft_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"draft_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"edited\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"deleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"content\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"HTML\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"commentid\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"timedescription\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimagealt\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimageurl\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"totalreactions\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reasondeleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"interactor\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_delete\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_report\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_update\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_react\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_follow_reply\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reacted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_view_author\"},arguments:[],directives:[]}]}}]}}]}}]},v={components:{ReplyForm:a.a,Loading:l.a,Reply:d.a},props:{component:{type:String,required:!0},area:{type:String,required:!0},commentId:{type:[Number,String],required:!0},totalReplies:{type:[Number,String],required:!0},size:{type:String,default:()=>r.SIZE_SMALL,validator:e=>Object(r.isValid)(e)},showReplyForm:{type:Boolean,required:!0},replyAble:{type:Boolean,required:!0},submitting:Boolean,showLikeButton:{type:Boolean,default:!0},showLikeButtonText:Boolean,showReplyButtonText:Boolean,replyTo:null,replyHeadInline:Boolean,editor:{type:Object,validator:e=>\"compact\"in e&&\"variant\"in e,default:()=>({compact:!0,variant:void 0})}},apollo:{replies:{query:c,watchLoading(e){this.$emit(\"fetch-replies\",e)},variables(){return{commentid:this.commentId}},result({data:{replies:e}}){this.hasMoreReplies=e.length<this.totalReplies},skip(){return!this.loadRepliesStatus}}},data(){return{replies:[],page:1,loadRepliesStatus:!1,hasMoreReplies:!1,innerSubmitting:this.submitting,innerShowReplyForm:this.showReplyForm,innerReplyTo:this.replyTo}},computed:{isLarge(){return r.SIZE_LARGE===this.size},hasReplies(){return 0<parseInt(this.totalReplies,10)},showLoadRepliesLink(){return!(!this.$apollo.queries.replies.loading||1!=this.page)||this.hasReplies&&!this.loadRepliesStatus},showLineSeparator(){return this.showLoadRepliesLink||this.hasMoreReplies}},watch:{innerSubmitting(e){e!==this.submitting&&this.$emit(\"update-submitting\",e)},submitting(e){e!==this.innerSubmitting&&(this.innerSubmitting=e)},innerShowReplyForm(e){e&&(this.loadRepliesStatus||(this.loadRepliesStatus=!0)),e!==this.showReplyForm&&this.$emit(\"update-show-reply-form\",e),e&&this.$_scrollToForm()},showReplyForm(e){e!==this.innerShowReplyForm&&(this.innerShowReplyForm=e,this.innerReplyTo=null)},replyTo(e){this.innerReplyTo=e},innerReplyTo(e){e!==this.replyTo&&this.$emit(\"update-reply-to\",e)}},methods:{handleFormReady(){let e=this.$refs[\"reply-form\"];e&&(e.$el&&(e=e.$el),this.$emit(\"form-ready\",e))},$_scrollToForm(){this.$emit(\"scroll-to-reply-form\")},async loadReplies(){this.loadRepliesStatus?(this.page+=1,await this.$apollo.queries.replies.fetchMore({variables:{page:this.page,commentid:this.commentId},updateQuery:(e,{fetchMoreResult:{replies:t}})=>(t=Array.prototype.concat.call(t,e.replies),this.hasMoreReplies=t.length<this.totalReplies,{replies:t})})):this.loadRepliesStatus=!0},updateRepliesCache(e){const t={commentid:this.commentId};let{replies:n}=u.a.readQuery({query:c,variables:t});u.a.writeQuery({query:c,variables:t,data:{replies:Array.prototype.map.call(n,t=>t.id==e.id?e:t)}}),this.$emit(\"update-reply\",e)},async createReply({content:e,format:t,commentId:n,itemId:i}){if(!this.innerSubmitting){this.innerSubmitting=!0;try{let{data:{reply:a}}=await this.$apollo.mutate({mutation:p,refetchAll:!1,variables:{commentid:n,content:e,format:t,draft_id:i},update:(e,{data:t})=>{let{replies:n}=e.readQuery({query:c,variables:{commentid:this.commentId}});e.writeQuery({query:c,variables:{commentid:this.commentId},data:{replies:Array.prototype.concat.call(n,[t.reply])}})}});this.innerShowReplyForm=!1,this.$emit(\"create-reply\",a)}finally{this.innerSubmitting=!1}}},handleReplyTo(e){this.innerReplyTo=e,this.innerShowReplyForm&&this.$_scrollToForm(),this.innerShowReplyForm=!0},updateReactStatus({id:e,status:t}){let{replies:n}=u.a.readQuery({query:c,variables:{commentid:this.commentId}});u.a.writeQuery({query:c,variables:{commentid:this.commentId},data:{replies:Array.prototype.map.call(n,n=>{if(n.id==e){let e=Object.assign({},n),i=Object.assign({},n.interactor);return i.reacted=t,e.interactor=i,t?e.totalreactions+=1:0!=e.totalreactions&&(e.totalreactions-=1),e}return n})}})}}},k=(n(\"i3R1\"),n(\"KHd+\")),f=function(e){e.options.__langStrings={totara_comment:[\"viewreplies\"]}},_=Object(k.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-commentReplyBox\"},[e.showLoadRepliesLink||e.loadRepliesStatus&&e.hasMoreReplies?n(\"div\",{staticClass:\"tui-commentReplyBox__replyLinkBox\",class:{\"tui-commentReplyBox__replyLinkBox--withSeparator\":e.showLineSeparator,\"tui-commentReplyBox__replyLinkBox--withoutSeparator\":!e.showLineSeparator}},[n(\"a\",{staticClass:\"tui-commentReplyBox__replyLinkBox-link\",class:{\"tui-commentReplyBox__replyLinkBox-link--disabled\":e.$apollo.queries.replies.loading},attrs:{href:\"#\",role:\"button\"},on:{click:function(t){return t.preventDefault(),e.loadReplies(t)}}},[n(\"span\",[e._v(e._s(e.$str(\"viewreplies\",\"totara_comment\")))]),e._v(\" \"),e.$apollo.queries.replies.loading?n(\"Loading\"):e._e()],1)]):e._e(),e._v(\" \"),0<e.replies.length?[e._l(e.replies,(function(t,i){return[n(\"Reply\",{key:t.id,staticClass:\"tui-commentReplyBox__reply\",class:{\"tui-commentReplyBox__reply--large\":e.isLarge},attrs:{\"data-counter\":i,\"reply-id\":t.id,content:t.content,\"comment-id\":t.commentid,component:e.component,\"time-description\":t.timedescription,\"user-full-name\":t.user.fullname,\"user-profile-image-url\":t.user.profileimageurl,\"user-profile-image-alt\":t.user.profileimagealt||t.user.fullname,\"user-id\":t.user.id,\"update-able\":t.interactor.can_update,\"delete-able\":t.interactor.can_delete,\"report-able\":t.interactor.can_report,\"reply-able\":t.interactor.can_follow_reply,\"react-able\":t.interactor.can_react,\"can-view-author\":t.interactor.can_view_author,\"total-reactions\":t.totalreactions,reacted:t.interactor.reacted,edited:t.edited,deleted:t.deleted,\"reason-deleted\":t.reasondeleted,size:e.size,submitting:e.innerSubmitting,\"show-reply-button-text\":e.showReplyButtonText,\"show-like-button-text\":e.showLikeButtonText,\"show-like-button\":e.showLikeButton,\"inline-head\":e.replyHeadInline,editor:e.editor},on:{\"update-submitting\":function(t){return e.$emit(\"update-submitting\",t)},\"update-reply\":e.updateRepliesCache,\"delete-reply\":e.updateRepliesCache,\"reply-to\":e.handleReplyTo,\"update-react-status\":e.updateReactStatus}})]}))]:e._e(),e._v(\" \"),e.replyAble?[e.innerShowReplyForm?n(\"ReplyForm\",{ref:\"reply-form\",staticClass:\"tui-commentReplyBox__replyForm\",attrs:{\"comment-id\":e.commentId,size:e.size,editor:e.editor,\"reply-to\":e.innerReplyTo},on:{cancel:function(t){return e.$emit(\"update-show-reply-form\",!1)},submit:e.createReply,\"form-ready\":e.handleFormReady}}):e._e()]:e._e()],2)}),[],!1,null,null,null);\"function\"==typeof f&&f(_),_.options.__hasBlocks={script:!0,template:!0};t.default=_.exports},\"4hva\":function(e,t,n){},\"5Dry\":function(e,t,n){\"use strict\";t.a={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_comment_get_comments\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"component\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_component\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"area\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_area\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"instanceid\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"cursor\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_text\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"cursor\"},name:{kind:\"Name\",value:\"totara_comment_comment_cursor\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"component\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"component\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"area\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"area\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"instance_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"instanceid\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"cursor\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"cursor\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"total\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"next\"},arguments:[],directives:[]}]}},{kind:\"Field\",alias:{kind:\"Name\",value:\"comments\"},name:{kind:\"Name\",value:\"totara_comment_comments\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"component\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"component\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"area\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"area\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"instanceid\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"instanceid\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"cursor\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"cursor\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"content\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"HTML\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimagealt\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimageurl\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"timedescription\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"totalreplies\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"totalreactions\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"edited\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"deleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reasondeleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"interactor\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_delete\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_report\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_update\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_reply\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_react\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reacted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_view_author\"},arguments:[],directives:[]}]}}]}}]}}]}},\"5G/C\":function(e,t){e.exports=tui.require(\"totara_comment/components/content/CommentReplyContent\")},\"5M/7\":function(e,t,n){\"use strict\";var i=n(\"rfSk\");n.n(i).a},\"5Mig\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"BN8m\"),a=n.n(i),r=n(\"vF5l\"),o=n.n(r),l=n(\"yAFK\"),m={components:{ButtonGroup:a.a,Button:o.a},props:{disableSubmit:{type:Boolean,default:!1},disableCancel:{type:Boolean,default:!1},submitText:{type:String,required:!0},size:{type:String,default:()=>l.SIZE_SMALL,validator:e=>Object(l.isValid)(e)}},computed:{isSmall(){return l.SIZE_SMALL==this.size}}},d=(n(\"SwU6\"),n(\"KHd+\")),s=function(e){e.options.__langStrings={core:[\"cancel\"]}},u=Object(d.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ButtonGroup\",{staticClass:\"tui-commentSubmitCancelButtonGroup\"},[n(\"Button\",{staticClass:\"tui-commentSubmitCancelButtonGroup__submit\",attrs:{text:e.submitText,styleclass:{primary:!0,small:e.isSmall},disabled:e.disableSubmit},on:{click:function(t){return t.preventDefault(),e.$emit(\"click-submit\")}}}),e._v(\" \"),n(\"Button\",{staticClass:\"tui-commentSubmitCancelButtonGroup__cancel\",attrs:{text:e.$str(\"cancel\",\"core\"),styleclass:{small:e.isSmall},disabled:e.disableCancel},on:{click:function(t){return t.preventDefault(),e.$emit(\"click-cancel\")}}})],1)}),[],!1,null,null,null);\"function\"==typeof s&&s(u),u.options.__hasBlocks={script:!0,template:!0};t.default=u.exports},\"5h9J\":function(e,t){e.exports=tui.require(\"tui/components/buttons/ButtonIcon\")},\"6Pts\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"E75b\"),a=n.n(i),r=n(\"yAFK\"),o=n(\"Xkrd\"),l=n.n(o),m=n(\"5Dry\"),d={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"totara_comment_create_comment\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"content\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"String\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"component\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_component\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"area\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_area\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"instanceid\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"format\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"draft_id\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"comment\"},name:{kind:\"Name\",value:\"totara_comment_create_comment\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"content\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"content\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"component\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"component\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"area\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"area\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"instanceid\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"instanceid\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"format\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"draft_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"draft_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"content\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"HTML\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimagealt\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimageurl\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"timedescription\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"totalreplies\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"totalreactions\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"edited\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"deleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reasondeleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"interactor\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_delete\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_report\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_update\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_reply\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_react\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reacted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_view_author\"},arguments:[],directives:[]}]}}]}}]}}]},s={components:{CommentThread:l.a,CommentForm:a.a},apollo:{totalComments:{query:m.a,context:{batch:!0},watchLoading(e){this.$emit(\"fetch-comments\",e)},variables(){return{component:this.component,area:this.area,instanceid:this.instanceId,cursor:this.firstCursor}},update:({cursor:{total:e}})=>parseInt(e,10),result({data:{cursor:{total:e}}}){this.$emit(\"update-total-comments\",e)}}},props:{firstCursor:{type:String,default:null},size:{type:String,required:!0,validator:e=>Object(r.isValid)(e)},component:{type:String,required:!0},area:{type:String,required:!0},instanceId:{type:[String,Number],required:!0},editor:{type:Object,validator:e=>\"compact\"in e&&\"variant\"in e,default:()=>({compact:!0,variant:void 0,contextId:void 0})},submitting:Boolean,showLikeButtonText:Boolean,showReplyButtonText:Boolean,submitFormButtonText:String,withBorder:Boolean,showCommentForm:{type:Boolean,default:!0},showLikeButton:{type:Boolean,default:!0},commentAble:{type:Boolean,default:!0},commentInlineHead:Boolean},data(){return{totalComments:0,innerSubmitting:this.Boolean,commentsLoaded:!1}},watch:{submitting(e){e!==this.innerSubmitting&&(this.innerSubmitting=e)},innerSubmitting(e){e!==this.submitting&&this.$emit(\"update-submitting\",e)}},methods:{$_scrollCollectionToBottom(){this.$nextTick().then(()=>{let e=this.$refs[\"comment-thread\"];e&&(e.$el.scrollTop=e.$el.scrollHeight)})},async formReady(){await this.$nextTick();let e=this.$refs[\"comment-form\"];e&&(e.$el&&(e=e.$el),this.$emit(\"form-ready\",e))},async createComment({content:e,format:t,itemId:n}){if(!this.innerSubmitting){this.innerSubmitting=!0;try{let{data:{comment:i}}=await this.$apollo.mutate({mutation:d,refetchAll:!1,variables:{content:e,format:t,component:this.component,area:this.area,instanceid:this.instanceId,draft_id:n},update:(e,{data:{comment:t}})=>{const n={component:this.component,area:this.area,instanceid:this.instanceId,cursor:this.firstCursor};let{cursor:i,comments:a}=e.readQuery({query:m.a,variables:n});i=Object.assign({},i),i.total+=1,e.writeQuery({query:m.a,variables:n,data:{cursor:i,comments:Array.prototype.concat.call(a,[t])}})}});this.$_scrollCollectionToBottom(),this.$emit(\"create-comment\",i)}finally{this.innerSubmitting=!1}}}}},u=(n(\"Bswq\"),n(\"KHd+\")),c=function(e){e.options.__langStrings={totara_comment:[\"comments\"]}},p=Object(u.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-commentBox\",class:{\"tui-commentBox--withBorder\":e.withBorder,\"tui-commentBox--noForm\":!e.commentAble||!e.showCommentForm}},[n(\"CommentThread\",{ref:\"comment-thread\",staticClass:\"tui-commentBox__comments\",attrs:{size:e.size,component:e.component,area:e.area,\"instance-id\":e.instanceId,submitting:e.innerSubmitting,\"show-like-button\":e.showLikeButton,\"show-like-button-text\":e.showLikeButtonText,\"show-reply-button-text\":e.showReplyButtonText,\"with-border\":e.withBorder,\"first-cursor\":e.firstCursor,\"comment-inline-head\":e.commentInlineHead,editor:e.editor},on:{\"update-submitting\":function(t){return e.$emit(\"update-submitting\",t)},\"fetch-comments\":function(t){return e.$emit(\"fetch-comments\",t)}}}),e._v(\" \"),e.commentAble?[!e.$apollo.queries.totalComments.loading&&e.showCommentForm?n(\"CommentForm\",{ref:\"comment-form\",staticClass:\"tui-commentBox__commentForm\",class:{\"tui-commentBox__commentForm--withBorder\":e.withBorder},attrs:{size:e.size,editor:e.editor,\"submit-button-text\":e.submitFormButtonText},on:{\"form-ready\":e.formReady,submit:e.createComment}}):e._e()]:e._e()],2)}),[],!1,null,null,null);\"function\"==typeof c&&c(p),p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},\"78h+\":function(e,t,n){},\"8JGY\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"gLvT\"),a=n.n(i),r=n(\"sxi1\"),o=n.n(r),l=n(\"KGcv\"),m=n.n(l),d=n(\"5h9J\"),s={components:{ButtonIcon:n.n(d).a,Dropdown:a.a,More:o.a,DropdownItem:m.a},props:{showDeleteAction:{type:Boolean,default:!0},showUpdateAction:{type:Boolean,default:!0},showReportAction:{type:Boolean,default:!0}},computed:{showActions(){return this.showDeleteAction||this.showUpdateAction||this.showReportAction}}},u=n(\"KHd+\"),c=function(e){e.options.__langStrings={core:[\"delete\",\"edit\"],totara_comment:[\"triggermenu\",\"reportcontent\"]}},p=Object(u.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Dropdown\",{staticClass:\"tui-commentActionDropDown\",attrs:{position:\"bottom-right\"},scopedSlots:e._u([{key:\"trigger\",fn:function(t){var i=t.toggle,a=t.isOpen;return[e.showActions?n(\"ButtonIcon\",{attrs:{\"aria-expanded\":a?\"true\":\"false\",\"aria-label\":e.$str(\"triggermenu\",\"totara_comment\"),styleclass:{transparentNoPadding:!0}},on:{click:function(e){return e.preventDefault(),i(e)}}},[n(\"More\",{attrs:{size:\"300\"}})],1):e._e()]}}])},[e._v(\" \"),e.showUpdateAction?n(\"DropdownItem\",{on:{click:function(t){return e.$emit(\"click-edit\")}}},[e._v(\"\\n    \"+e._s(e.$str(\"edit\",\"core\"))+\"\\n  \")]):e._e(),e._v(\" \"),e.showDeleteAction?n(\"DropdownItem\",{on:{click:function(t){return e.$emit(\"click-delete\")}}},[e._v(\"\\n    \"+e._s(e.$str(\"delete\",\"core\"))+\"\\n  \")]):e._e(),e._v(\" \"),e.showReportAction?n(\"DropdownItem\",{on:{click:function(t){return e.$emit(\"click-report-content\")}}},[e._v(\"\\n    \"+e._s(e.$str(\"reportcontent\",\"totara_comment\"))+\"\\n  \")]):e._e()],1)}),[],!1,null,null,null);\"function\"==typeof c&&c(p),p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},\"9R5h\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"2wx7\"),a=n.n(i),r=n(\"kkOl\"),o=n.n(r),l=n(\"nEm4\"),m=n.n(l),d=n(\"TXEh\"),s=n(\"BN8m\"),u=n.n(s),c=n(\"vF5l\"),p=n.n(c),v=n(\"FoZm\"),k=n(\"yAFK\"),f=n(\"nGKo\"),_=n.n(f),y=n(\"oMGV\"),g=n.n(y),h=n(\"y5S1\"),b={components:{Weka:a.a,Form:m.a,ButtonGroup:u.a,Button:p.a,ResponseBox:_.a,UnsavedChangesWarning:g.a},props:{size:{type:String,default:()=>k.SIZE_SMALL,validator:e=>Object(k.isValid)(e)},component:String,area:String,instanceId:[String,Number],editor:{type:Object,validator:e=>\"compact\"in e&&\"variant\"in e,default:()=>({compact:!0,variant:void 0,contextId:void 0})},submitting:Boolean,submitButtonText:{type:String,default(){return this.$str(\"post\",\"totara_comment\")}}},data:()=>({editorKey:\"totara_comment_editor_weka_\"+Object(d.uniqueId)(),editorOption:null,draftId:null,content:o.a.empty()}),computed:{isSmall(){return k.SIZE_SMALL===this.size}},watch:{editorOption(){console.warn(\"The attribute 'editorOption' had been deprecated, please do not use it\")}},async mounted(){this.component&&console.warn(\"The prop 'component' had been deprecated and no longer used, please update all call\"),this.area&&console.warn(\"The prop 'area' had been deprecated and no longer used, please update all call\"),this.instanceId&&console.warn(\"The prop 'instanceId' had been deprecated and no longer used, please update all call\"),await this.$_loadDraftId()},methods:{async $_loadDraftId(){const{data:{item_id:e}}=await this.$apollo.mutate({mutation:h.a});this.draftId=e},async submit(){this.submitting||(this.$emit(\"submit\",{content:JSON.stringify(this.content.getDoc()),format:v.FORMAT_JSON_EDITOR,itemId:this.draftId}),this.content=o.a.empty(),await this.$_loadDraftId(),this.editorKey=\"totara_comment_editor_weka_\"+Object(d.uniqueId)(),this.$forceUpdate())}}},N=(n(\"anG8\"),n(\"KHd+\")),S=function(e){e.options.__langStrings={totara_comment:[\"post\",\"entercomment\"]}},F=Object(N.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ResponseBox\",{staticClass:\"tui-commentForm\"},[n(\"Form\",{staticClass:\"tui-commentForm__form\"},[e.content.isEmpty||e.submitting?e._e():n(\"UnsavedChangesWarning\",{attrs:{value:e.content}}),e._v(\" \"),n(\"div\",{staticClass:\"tui-commentForm__input\"},[e.draftId?n(\"Weka\",{key:e.editorKey,staticClass:\"tui-commentForm__editor\",attrs:{\"data-key\":e.editorKey,\"usage-identifier\":{component:\"totara_comment\",area:\"comment\"},variant:e.editor.variant,compact:e.editor.compact,\"file-item-id\":e.draftId,placeholder:e.$str(\"entercomment\",\"totara_comment\"),\"data-file-item-id\":e.draftId,\"context-id\":e.editor.contextId},on:{ready:function(t){return e.$emit(\"form-ready\")}},model:{value:e.content,callback:function(t){e.content=t},expression:\"content\"}}):e._e()],1),e._v(\" \"),n(\"ButtonGroup\",{staticClass:\"tui-commentForm__buttonGroup\"},[n(\"Button\",{staticClass:\"tui-commentForm__button\",attrs:{text:e.submitButtonText,\"aria-label\":e.submitButtonText,disabled:e.content.isEmpty||e.submitting,styleclass:{primary:!0,small:e.isSmall}},on:{click:e.submit}})],1)],1)],1)}),[],!1,null,null,null);\"function\"==typeof S&&S(F),F.options.__hasBlocks={script:!0,template:!0};t.default=F.exports},\"9ebf\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"hXJh\");n.d(t,\"SIZE_LARGE\",(function(){return i.SIZE_LARGE})),n.d(t,\"SIZE_SMALL\",(function(){return i.SIZE_SMALL})),n.d(t,\"isValid\",(function(){return i.isValid}))},\"9uL4\":function(e,t,n){\"use strict\";var i=n(\"aZP4\");n.n(i).a},AA9m:function(e,t,n){\"use strict\";n.r(t);var i=n(\"5h9J\"),a=n.n(i),r=n(\"tXwl\"),o=n.n(r),l={components:{ButtonIcon:a.a,ReplyIcon:o.a},props:{iconSize:[String,Number],showText:Boolean,transparent:{type:Boolean,default:!0},disabled:Boolean,small:{type:Boolean,default:!0}},computed:{buttonText(){return this.showText?this.$str(\"reply\",\"totara_comment\"):\"\"},buttonStyleClass(){return{transparentNoPadding:this.transparent,small:this.small}}}},m=n(\"KHd+\"),d=function(e){e.options.__langStrings={totara_comment:[\"reply\"]}},s=Object(m.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ButtonIcon\",{staticClass:\"tui-commentReplyButtonIcon\",attrs:{\"aria-label\":e.$str(\"reply\",\"totara_comment\"),text:e.buttonText,styleclass:e.buttonStyleClass,disabled:e.disabled},on:{click:function(t){return e.$emit(\"click\",t)}}},[n(\"ReplyIcon\",{attrs:{size:e.iconSize}})],1)}),[],!1,null,null,null);\"function\"==typeof d&&d(s),s.options.__hasBlocks={script:!0,template:!0};t.default=s.exports},BN8m:function(e,t){e.exports=tui.require(\"tui/components/buttons/ButtonGroup\")},\"BO1+\":function(e,t,n){\"use strict\";var i=n(\"elWf\");n.n(i).a},Be3R:function(e,t,n){\"use strict\";n.r(t);var i=n(\"rkhB\"),a=n.n(i),r=n(\"NnhT\"),o=n.n(r),l=n(\"p7Bt\"),m=n.n(l),d=n(\"yAFK\"),s=n(\"Tqau\"),u=n.n(s),c=n(\"5G/C\"),p=n.n(c),v=n(\"ixux\"),k=n.n(v),f=n(\"vyVp\"),_=n(\"TGM/\"),y=n.n(_),g={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"totara_comment_update_comment\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"content\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"String\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"format\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"draft_id\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"comment\"},name:{kind:\"Name\",value:\"totara_comment_update_comment\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"content\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"content\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"format\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"draft_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"draft_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"content\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"HTML\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimagealt\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimageurl\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"timedescription\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"totalreplies\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"totalreactions\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"edited\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"deleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reasondeleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"interactor\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_delete\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_report\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_update\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_reply\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_react\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reacted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_view_author\"},arguments:[],directives:[]}]}}]}}]}}]},h={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"totara_comment_delete_comment\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"comment\"},name:{kind:\"Name\",value:\"totara_comment_delete_comment\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"content\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"HTML\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimagealt\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimageurl\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"timedescription\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"totalreplies\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"totalreactions\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"edited\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"deleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reasondeleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"interactor\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_delete\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_report\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_update\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_reply\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_react\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reacted\"},arguments:[],directives:[]}]}}]}}]}}]},b=n(\"hiKM\"),N={components:{ReplyBox:k.a,CommentHeader:u.a,CommentAction:m.a,CommentCard:a.a,Avatar:o.a,CommentContent:p.a},props:{commentId:{required:!0,type:[String,Number]},component:{type:String,required:!0},area:{type:String,required:!0},instanceId:{type:[String,Number],required:!0},submitting:Boolean,totalReplies:{type:[Number,String],required:!0},totalReactions:[Number,String],reacted:Boolean,timeDescription:{type:String,required:!0},reportAble:{type:Boolean,required:!0},content:{type:String,required:!0},deleteAble:{type:Boolean,required:!0},updateAble:{type:Boolean,required:!0},replyAble:{type:Boolean,default:!0},reactAble:{type:Boolean,default:!0},userFullName:{type:String,required:!0},userId:{type:[String,Number],required:!0},userProfileImageUrl:{type:String,required:!0},userProfileImageAlt:{type:String},size:{type:String,default:()=>d.SIZE_SMALL,validator:e=>Object(d.isValid)(e)},edited:{type:Boolean,required:!0},deleted:{type:Boolean,required:!0},showLikeButton:{type:Boolean,default:!0},editor:{type:Object,validator:e=>\"compact\"in e&&\"variant\"in e,default:()=>({compact:!0,variant:void 0,contextId:void 0})},showLikeButtonText:Boolean,showReplyButtonText:Boolean,inlineHead:Boolean,canViewAuthor:Boolean},data(){return{showForm:{reply:!1,comment:!1},innerSubmitting:this.submitting,replyTo:null,replyForm:null,fetchingReplies:!1}},computed:{canInteract(){return this.replyAble||this.reactAble},profileUrl(){if(this.canViewAuthor)return this.$url(\"/user/profile.php\",{id:this.userId})}},watch:{innerSubmitting(e){e!==this.submitting&&this.$emit(\"update-submitting\",e)},submitting(e){this.innerSubmitting=e}},methods:{async $_completeFetchingReplies(){if(!this.fetchingReplies)return;let e=y()(\"totara_comment_fetching_replies\"),t=n=>{setTimeout(()=>{this.fetchingReplies?t(n):(e(),n())},100)};return new Promise(t)},async updateComment({content:e,id:t,format:n,itemId:i}){if(!this.innerSubmitting){this.innerSubmitting=!0;try{let{data:{comment:a}}=await this.$apollo.mutate({mutation:g,refetchAll:!1,variables:{id:t,content:e,format:n,draft_id:i}});this.$emit(\"update-comment\",a),this.showForm.comment=!1}finally{this.innerSubmitting=!1}}},async deleteComment(){if(!this.innerSubmitting){this.innerSubmitting=!0;try{let{data:{comment:e}}=await this.$apollo.mutate({mutation:h,refetchAll:!1,variables:{id:this.commentId}});this.$emit(\"delete-comment\",e)}finally{this.innerSubmitting=!1}}},async reportComment(){if(!this.innerSubmitting){this.innerSubmitting=!0;try{(await this.$apollo.mutate({mutation:b.a,refetchAll:!1,variables:{component:this.component,area:\"comment\",item_id:this.commentId,url:window.location.href}}).then(e=>e.data.review)).success?await Object(f.notify)({message:this.$str(\"reported\",\"totara_reportedcontent\"),type:\"success\"}):await Object(f.notify)({message:this.$str(\"reported_failed\",\"totara_reportedcontent\"),type:\"error\"})}catch(e){await Object(f.notify)({message:this.$str(\"error:reportcomment\",\"totara_comment\"),type:\"error\"})}finally{this.innerSubmitting=!1}}},updateReactStatus(e){this.$emit(\"update-react-status\",{status:e,id:this.commentId})},replyFormReady(e){let t=this.$refs[\"reply-box\"];this.replyForm=e,t.$el.scrollIntoView(!1)},async handleReply(){this.showForm.reply=!0,null!==this.replyTo&&(this.replyTo=null),await this.scrollToReplyForm()},async scrollToReplyForm(){let e=this.$refs[\"reply-box\"];e&&(await e.$nextTick(),this.fetchingReplies&&(await this.$_completeFetchingReplies(),await e.$nextTick()),e.$el.scrollIntoView(!1))}}},S=(n(\"9uL4\"),n(\"KHd+\")),F=function(e){e.options.__langStrings={totara_comment:[\"error:reportcomment\"],totara_reportedcontent:[\"reported\",\"reported_failed\"]}},C=Object(S.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"CommentCard\",{staticClass:\"tui-comment\",attrs:{\"data-id\":e.commentId}},[n(\"Avatar\",{attrs:{slot:\"profile-picture\",\"image-src\":e.userProfileImageUrl,\"image-alt\":e.userProfileImageAlt||e.userFullName,\"profile-url\":e.profileUrl},slot:\"profile-picture\"}),e._v(\" \"),n(\"CommentHeader\",{attrs:{slot:\"body-header\",size:e.size,\"profile-url\":e.profileUrl,\"user-full-name\":e.userFullName,\"time-description\":e.timeDescription,\"update-able\":e.updateAble,\"delete-able\":e.deleteAble,\"report-able\":e.reportAble,edited:e.edited,\"inline-head\":e.inlineHead},on:{\"click-edit\":function(t){e.showForm.comment=!0},\"confirm-delete\":e.deleteComment,\"click-report-content\":e.reportComment},slot:\"body-header\"}),e._v(\" \"),n(\"CommentContent\",{attrs:{slot:\"body-content\",deleted:e.deleted,\"item-id\":e.commentId,content:e.content,\"on-edit\":e.showForm.comment,\"is-reply\":!1,size:e.size,editor:e.editor},on:{\"cancel-editing\":function(t){e.showForm.comment=!1},\"update-item\":e.updateComment},slot:\"body-content\"}),e._v(\" \"),e.canInteract?n(\"CommentAction\",{staticClass:\"tui-comment__footer\",attrs:{slot:\"body-footer\",\"total-replies\":e.totalReplies,size:e.size,\"comment-id\":e.commentId,\"total-reactions\":e.totalReactions,reacted:e.reacted,\"react-able\":e.reactAble,\"reply-able\":e.replyAble,\"show-like-button\":e.showLikeButton,\"show-like-button-text\":e.showLikeButtonText,\"show-reply-button-text\":e.showReplyButtonText,area:\"comment\"},on:{\"click-reply\":e.handleReply,\"update-react-status\":e.updateReactStatus},slot:\"body-footer\"}):e._e(),e._v(\" \"),n(\"ReplyBox\",{ref:\"reply-box\",staticClass:\"tui-comment__replyBox\",attrs:{slot:\"reply-box\",\"reply-able\":e.replyAble,\"comment-id\":e.commentId,area:e.area,component:e.component,\"show-reply-form\":e.showForm.reply,\"total-replies\":e.totalReplies,submitting:e.innerSubmitting,size:e.size,\"show-like-button\":e.showLikeButton,\"show-like-button-text\":e.showLikeButtonText,\"show-reply-button-text\":e.showReplyButtonText,\"reply-to\":e.replyTo,\"reply-head-inline\":e.inlineHead,editor:e.editor},on:{\"update-show-reply-form\":function(t){e.showForm.reply=t},\"create-reply\":function(t){return e.$emit(\"add-reply\",e.commentId)},\"update-submitting\":function(t){return e.$emit(\"update-submitting\",t)},\"form-ready\":e.replyFormReady,\"update-reply-to\":function(t){e.replyTo=t},\"scroll-to-reply-form\":e.scrollToReplyForm,\"fetch-replies\":function(t){e.fetchingReplies=t}},slot:\"reply-box\"})],1)}),[],!1,null,null,null);\"function\"==typeof F&&F(C),C.options.__hasBlocks={script:!0,template:!0};t.default=C.exports},Bq6n:function(e,t,n){\"use strict\";var i=n(\"sLQy\");n.n(i).a},Bswq:function(e,t,n){\"use strict\";var i=n(\"snEI\");n.n(i).a},CKzT:function(e,t){e.exports=tui.require(\"totara_comment/index\")},E75b:function(e,t){e.exports=tui.require(\"totara_comment/components/form/CommentForm\")},FoZm:function(e,t){e.exports=tui.require(\"tui/format\")},\"G/Xa\":function(e,t,n){\"use strict\";n.r(t);n(\"5M/7\");var i=n(\"KHd+\"),a=Object(i.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"tui-commentReplyCard\"},[t(\"div\",{staticClass:\"tui-commentReplyCard__profilePicture\"},[this._t(\"profile-picture\")],2),this._v(\" \"),t(\"div\",{staticClass:\"tui-commentReplyCard__body\"},[t(\"div\",{staticClass:\"tui-commentReplyCard__header\"},[this._t(\"body-header\")],2),this._v(\" \"),t(\"div\",{staticClass:\"tui-commentReplyCard__content\"},[this._t(\"body-content\")],2),this._v(\" \"),t(\"div\",{staticClass:\"tui-commentReplyCard__footer\"},[this._t(\"body-footer\")],2)])])}),[],!1,null,null,null);a.options.__hasBlocks={script:!1,template:!0};t.default=a.exports},GQXB:function(e,t,n){\"use strict\";n.r(t);var i=n(\"Xi9X\"),a={components:{CoreAvatar:n.n(i).a},props:{imageSrc:{required:!0,type:String},imageAlt:{required:!0,type:String},profileUrl:String}},r=n(\"KHd+\"),o=Object(r.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return this.profileUrl?t(\"a\",{attrs:{href:this.profileUrl}},[t(\"CoreAvatar\",{attrs:{src:this.imageSrc,alt:this.imageAlt,size:\"xxsmall\"}})],1):t(\"CoreAvatar\",{attrs:{src:this.imageSrc,alt:this.imageAlt,size:\"xxsmall\"}})}),[],!1,null,null,null);o.options.__hasBlocks={script:!0,template:!0};t.default=o.exports},Gj80:function(e,t,n){\"use strict\";var i=n(\"uFZJ\");n.n(i).a},GoPO:function(e,t){e.exports=tui.require(\"totara_comment/components/modal/ConfirmDeleteCommentReplyModal\")},\"H/tB\":function(e,t){e.exports=tui.require(\"tui/tui\")},HKyA:function(e,t,n){var i={\"./action/CommentAction\":\"r63H\",\"./action/CommentAction.vue\":\"r63H\",\"./action/CommentActionDropDown\":\"8JGY\",\"./action/CommentActionDropDown.vue\":\"8JGY\",\"./action/CommentActionLink\":\"psza\",\"./action/CommentActionLink.vue\":\"psza\",\"./box/CommentBox\":\"6Pts\",\"./box/CommentBox.vue\":\"6Pts\",\"./box/CommentThread\":\"mSAN\",\"./box/CommentThread.vue\":\"mSAN\",\"./box/ReplyBox\":\"4TfD\",\"./box/ReplyBox.vue\":\"4TfD\",\"./box/SidePanelCommentBox\":\"d8cU\",\"./box/SidePanelCommentBox.vue\":\"d8cU\",\"./buttons/ReplyButtonIcon\":\"AA9m\",\"./buttons/ReplyButtonIcon.vue\":\"AA9m\",\"./card/CommentCard\":\"tGKU\",\"./card/CommentCard.vue\":\"tGKU\",\"./card/CommentReplyHeader\":\"aRM5\",\"./card/CommentReplyHeader.vue\":\"aRM5\",\"./card/ReplyCard\":\"G/Xa\",\"./card/ReplyCard.vue\":\"G/Xa\",\"./comment/Comment\":\"Be3R\",\"./comment/Comment.vue\":\"Be3R\",\"./content/CommentReplyContent\":\"YTxy\",\"./content/CommentReplyContent.vue\":\"YTxy\",\"./form/CommentForm\":\"9R5h\",\"./form/CommentForm.vue\":\"9R5h\",\"./form/EditCommentReplyForm\":\"kEu8\",\"./form/EditCommentReplyForm.vue\":\"kEu8\",\"./form/ReplyForm\":\"d5jH\",\"./form/ReplyForm.vue\":\"d5jH\",\"./form/box/ResponseBox\":\"PejF\",\"./form/box/ResponseBox.vue\":\"PejF\",\"./form/group/SubmitCancelButtonsGroup\":\"5Mig\",\"./form/group/SubmitCancelButtonsGroup.vue\":\"5Mig\",\"./modal/ConfirmDeleteCommentReplyModal\":\"kvx8\",\"./modal/ConfirmDeleteCommentReplyModal.vue\":\"kvx8\",\"./profile/CommentAvatar\":\"GQXB\",\"./profile/CommentAvatar.vue\":\"GQXB\",\"./profile/CommentUserLink\":\"Xbww\",\"./profile/CommentUserLink.vue\":\"Xbww\",\"./reply/Reply\":\"RDkJ\",\"./reply/Reply.vue\":\"RDkJ\"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=\"HKyA\"},Hu75:function(e,t,n){},IKdh:function(e,t){e.exports=tui.require(\"totara_comment/components/profile/CommentUserLink\")},IXRp:function(e,t,n){var i={\".\":\"9ebf\",\"./\":\"9ebf\",\"./index\":\"9ebf\",\"./index.js\":\"9ebf\",\"./size\":\"hXJh\",\"./size.js\":\"hXJh\"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=\"IXRp\"},Jnj1:function(e,t,n){},KGcv:function(e,t){e.exports=tui.require(\"tui/components/dropdown/DropdownItem\")},\"KHd+\":function(e,t,n){\"use strict\";function i(e,t,n,i,a,r,o,l){var m,d=\"function\"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),i&&(d.functional=!0),r&&(d._scopeId=\"data-v-\"+r),o?(m=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=m):a&&(m=l?function(){a.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:a),m)if(d.functional){d._injectStyles=m;var s=d.render;d.render=function(e,t){return m.call(t),s(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,m):[m]}return{exports:e,options:d}}n.d(t,\"a\",(function(){return i}))},KKPO:function(e,t,n){\"use strict\";var i=n(\"Jnj1\");n.n(i).a},Mnur:function(e,t){e.exports=tui.require(\"tui/components/modal/ModalPresenter\")},Ngjb:function(e,t,n){\"use strict\";var i=n(\"4hva\");n.n(i).a},NnhT:function(e,t){e.exports=tui.require(\"totara_comment/components/profile/CommentAvatar\")},O3Nd:function(e,t,n){},PejF:function(e,t,n){\"use strict\";n.r(t);var i=n(\"NnhT\"),a={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_comment_get_actor\"},variableDefinitions:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"user\"},name:{kind:\"Name\",value:\"totara_comment_actor\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimageurl\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimagealt\"},arguments:[],directives:[]}]}}]}}]},r={components:{Avatar:n.n(i).a},apollo:{user:{query:a}},data:()=>({user:{}})},o=(n(\"eHZ5\"),n(\"KHd+\")),l=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-commentResponseBox\"},[e.$apollo.loading?e._e():n(\"div\",{staticClass:\"tui-commentResponseBox__profilePicture\"},[n(\"Avatar\",{attrs:{\"image-alt\":e.user.profileimagealt||\"\",\"image-src\":e.user.profileimageurl,\"profile-url\":e.$url(\"/user/profile.php\",{id:e.user.id})}})],1),e._v(\" \"),n(\"div\",{staticClass:\"tui-commentResponseBox__formBox\"},[e._t(\"default\")],2)])}),[],!1,null,null,null);l.options.__hasBlocks={script:!0,template:!0};t.default=l.exports},QUny:function(e,t,n){\"use strict\";var i=n(\"repu\");n.n(i).a},QYEq:function(e,t,n){\"use strict\";var i=n(\"0LNn\");n.n(i).a},Qla0:function(e,t,n){},RDkJ:function(e,t,n){\"use strict\";n.r(t);var i=n(\"NnhT\"),a=n.n(i),r=n(\"kJKs\"),o=n.n(r),l=n(\"p7Bt\"),m=n.n(l),d=n(\"yAFK\"),s=n(\"Tqau\"),u=n.n(s),c=n(\"5G/C\"),p=n.n(c),v=n(\"vyVp\"),k={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"totara_comment_update_reply\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"content\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"String\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"format\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"draft_id\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"reply\"},name:{kind:\"Name\",value:\"totara_comment_update_reply\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"content\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"content\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"format\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"draft_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"draft_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"edited\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"deleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"content\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"HTML\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"commentid\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"timedescription\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimagealt\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimageurl\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"totalreactions\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reasondeleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"interactor\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_delete\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_report\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_update\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_react\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_follow_reply\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reacted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_view_author\"},arguments:[],directives:[]}]}}]}}]}}]},f={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"totara_comment_delete_reply\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"reply\"},name:{kind:\"Name\",value:\"totara_comment_delete_reply\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"edited\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"deleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"content\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"format\"},value:{kind:\"EnumValue\",value:\"HTML\"}}],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"commentid\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"timedescription\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"fullname\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimagealt\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"profileimageurl\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"totalreactions\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reasondeleted\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"interactor\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"user_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_delete\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_report\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_update\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_react\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"can_follow_reply\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"reacted\"},arguments:[],directives:[]}]}}]}}]}}]},_=n(\"hiKM\"),y={components:{ReplyHeader:u.a,CommentAction:m.a,ReplyCard:o.a,Avatar:a.a,ReplyContent:p.a},props:{replyId:{type:[Number,String],required:!0},commentId:{type:[String,Number],required:!0},component:{type:String,required:!0},submitting:Boolean,userFullName:{type:String,required:!0},userId:{type:[String,Number],required:!0},userProfileImageUrl:{type:String,required:!0},userProfileImageAlt:{type:String,default:\"\"},timeDescription:{type:String,required:!0},reportAble:{type:Boolean,required:!0},content:{type:String,required:!0},deleteAble:{type:Boolean,required:!0},updateAble:{type:Boolean,required:!0},size:{type:String,default:()=>d.SIZE_SMALL,validator:e=>Object(d.isValid)(e)},edited:{type:Boolean,required:!0},deleted:{type:Boolean,required:!0},totalReactions:[Number,String],reacted:Boolean,replyAble:{type:Boolean,default:!0},reactAble:{type:Boolean,default:!0},showLikeButton:{type:Boolean,default:!0},showLikeButtonText:Boolean,showReplyButtonText:Boolean,inlineHead:Boolean,canViewAuthor:Boolean,editor:{type:Object,validator:e=>\"compact\"in e&&\"variant\"in e,default:()=>({compact:!0,variant:void 0,contextId:void 0})}},data(){return{editting:!1,innerSubmitting:this.submitting}},computed:{profileUrl(){if(this.canViewAuthor)return this.$url(\"/user/profile.php\",{id:this.userId})},canInteract(){return this.replyAble||this.reactAble}},watch:{innerSubmitting(e){e!==this.submitting&&this.$emit(\"update-submitting\",e)},submitting(e){this.innerSubmitting=e}},methods:{handleReply(){const e={fullname:this.userFullName,userId:this.userId};this.$emit(\"reply-to\",e)},async updateReply({id:e,content:t,format:n,itemId:i}){if(!this.innerSubmitting){this.innerSubmitting=!0;try{let{data:{reply:a}}=await this.$apollo.mutate({mutation:k,refetchAll:!1,variables:{id:e,content:t,format:n,draft_id:i}});this.editting=!1,this.$emit(\"update-reply\",a)}finally{this.innerSubmitting=!1}}},async deleteReply(){if(!this.innerSubmitting){this.innerSubmitting=!0;try{let{data:{reply:e}}=await this.$apollo.mutate({mutation:f,refetchAll:!1,variables:{id:this.replyId}});this.$emit(\"delete-reply\",e)}finally{this.innerSubmitting=!1}}},async reportReply(){if(!this.innerSubmitting){this.innerSubmitting=!0;try{(await this.$apollo.mutate({mutation:_.a,refetchAll:!1,variables:{component:this.component,area:\"reply\",item_id:this.replyId,url:window.location.href}}).then(e=>e.data.review)).success?await Object(v.notify)({message:this.$str(\"reported\",\"totara_reportedcontent\"),type:\"success\"}):await Object(v.notify)({message:this.$str(\"reported_failed\",\"totara_reportedcontent\"),type:\"error\"})}catch(e){await Object(v.notify)({message:this.$str(\"error:reportreply\",\"totara_comment\"),type:\"error\"})}finally{this.innerSubmitting=!1}}},updateReactStatus(e){this.$emit(\"update-react-status\",{id:this.replyId,status:e})}}},g=(n(\"BO1+\"),n(\"KHd+\")),h=function(e){e.options.__langStrings={totara_comment:[\"error:reportreply\"],totara_reportedcontent:[\"reported\",\"reported_failed\"]}},b=Object(g.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ReplyCard\",{staticClass:\"tui-commentReply\",attrs:{\"data-id\":e.replyId}},[n(\"Avatar\",{attrs:{slot:\"profile-picture\",\"image-src\":e.userProfileImageUrl,\"image-alt\":e.userProfileImageAlt,\"profile-url\":e.profileUrl},slot:\"profile-picture\"}),e._v(\" \"),n(\"ReplyHeader\",{attrs:{slot:\"body-header\",size:e.size,\"user-full-name\":e.userFullName,\"profile-url\":e.profileUrl,\"time-description\":e.timeDescription,edited:e.edited,\"update-able\":e.updateAble,\"delete-able\":e.deleteAble,\"report-able\":e.reportAble,\"inline-head\":e.inlineHead},on:{\"confirm-delete\":e.deleteReply,\"click-report-content\":e.reportReply,\"click-edit\":function(t){e.editting=!0}},slot:\"body-header\"}),e._v(\" \"),n(\"ReplyContent\",{attrs:{slot:\"body-content\",\"item-id\":e.replyId,deleted:e.deleted,\"on-edit\":e.editting,content:e.content,\"is-reply\":!0,editor:e.editor,size:e.size},on:{\"cancel-editing\":function(t){e.editting=!1},\"update-item\":e.updateReply},slot:\"body-content\"}),e._v(\" \"),e.canInteract?n(\"CommentAction\",{staticClass:\"tui-commentReply__footer\",attrs:{slot:\"body-footer\",size:e.size,\"comment-id\":e.replyId,\"total-reactions\":e.totalReactions,reacted:e.reacted,\"react-able\":e.reactAble,\"reply-able\":e.replyAble,\"show-reply-button-text\":e.showReplyButtonText,\"show-like-button-text\":e.showLikeButtonText,\"show-like-button\":e.showLikeButton,area:\"reply\"},on:{\"click-reply\":e.handleReply,\"update-react-status\":e.updateReactStatus},slot:\"body-footer\"}):e._e()],1)}),[],!1,null,null,null);\"function\"==typeof h&&h(b),b.options.__hasBlocks={script:!0,template:!0};t.default=b.exports},RcLL:function(e,t,n){},SwU6:function(e,t,n){\"use strict\";var i=n(\"fZ8t\");n.n(i).a},\"TGM/\":function(e,t){e.exports=tui.require(\"tui/pending\")},TXEh:function(e,t){e.exports=tui.require(\"tui/util\")},Tqau:function(e,t){e.exports=tui.require(\"totara_comment/components/card/CommentReplyHeader\")},UpZR:function(e,t){e.exports=tui.require(\"tui/apollo_client\")},V2I2:function(e,t,n){},VSpl:function(e,t,n){\"use strict\";var i=n(\"RcLL\");n.n(i).a},WTOg:function(e,t,n){!function(){\"use strict\";\"undefined\"!=typeof tui&&tui._bundle.isLoaded(\"totara_comment\")?console.warn('[tui bundle] The bundle \"totara_comment\" is already loaded, skipping initialisation.'):(tui._bundle.register(\"totara_comment\"),tui._bundle.addModulesFromContext(\"totara_comment\",n(\"IXRp\")),tui._bundle.addModulesFromContext(\"totara_comment/components\",n(\"HKyA\")))}()},XQD0:function(e,t,n){},Xbww:function(e,t,n){\"use strict\";n.r(t);var i=n(\"yAFK\"),a={props:{userFullName:{type:String,required:!0},size:{type:String,default:()=>i.SIZE_SMALL,validator:e=>Object(i.isValid)(e)},profileUrl:String},computed:{isSmall(){return i.SIZE_SMALL===this.size},isLarge(){return i.SIZE_LARGE===this.size}}},r=(n(\"iuRN\"),n(\"KHd+\")),o=Object(r.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.profileUrl?n(\"a\",{staticClass:\"tui-commentUserLink\",class:{\"tui-commentUserLink--smallLink\":e.isSmall,\"tui-commentUserLink--largeLink\":e.isLarge},attrs:{href:e.profileUrl}},[e._v(\"\\n  \"+e._s(e.userFullName)+\"\\n\")]):n(\"span\",{staticClass:\"tui-commentUserLink\",class:{\"tui-commentUserLink--smallText\":e.isSmall,\"tui-commentUserLink--largeText\":e.isLarge}},[e._v(\"\\n  \"+e._s(e.userFullName)+\"\\n\")])}),[],!1,null,null,null);o.options.__hasBlocks={script:!0,template:!0};t.default=o.exports},Xi9X:function(e,t){e.exports=tui.require(\"tui/components/avatar/Avatar\")},Xkrd:function(e,t){e.exports=tui.require(\"totara_comment/components/box/CommentThread\")},YTxy:function(e,t,n){\"use strict\";n.r(t);var i=n(\"H/tB\"),a=n.n(i),r=n(\"2rKr\"),o=n.n(r),l=n(\"yAFK\"),m={components:{EditForm:o.a},props:{content:{type:String,required:!0},onEdit:{type:Boolean,default:!1},itemId:{type:[Number,String],required:!0,validator:e=>!isNaN(e)},isReply:{type:Boolean,default:!1},deleted:{type:Boolean,required:!0},size:{type:String,default:()=>l.SIZE_SMALL,validator:e=>Object(l.isValid)(e)},editor:{type:Object,validator:e=>\"compact\"in e&&\"variant\"in e,default:()=>({compact:!0,variant:void 0,contextId:void 0})}},mounted(){this.$_scan()},updated(){this.$_scan()},methods:{$_scan(){let e=this.$refs.content;e&&a.a.scan(e)}}},d=(n(\"QUny\"),n(\"KHd+\")),s=Object(d.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-commentReplyContent\"},[e.onEdit?n(\"EditForm\",{staticClass:\"tui-commentReplyContent__editForm\",attrs:{\"item-id\":e.itemId,size:e.size,editor:e.editor},on:{cancel:function(t){return e.$emit(\"cancel-editing\")},\"update-item\":function(t){return e.$emit(\"update-item\",t)}}}):n(\"div\",{ref:\"content\",staticClass:\"tui-commentReplyContent__content\",class:{\"tui-commentReplyContent__content--reply\":e.isReply,\"tui-commentReplyContent__content--deleted\":e.deleted},domProps:{innerHTML:e._s(e.content)}})],1)}),[],!1,null,null,null);s.options.__hasBlocks={script:!0,template:!0};t.default=s.exports},Z82V:function(e,t){e.exports=tui.require(\"totara_comment/components/box/CommentBox\")},aRM5:function(e,t,n){\"use strict\";n.r(t);var i=n(\"IKdh\"),a=n.n(i),r=n(\"jUiv\"),o=n.n(r),l=n(\"yAFK\"),m=n(\"GoPO\"),d=n.n(m),s=n(\"Mnur\"),u=n.n(s),c={components:{CommentUserLink:a.a,CommentActionDropDown:o.a,ConfirmDeleteCommentReplyModal:d.a,ModalPresenter:u.a},props:{size:{type:String,default:()=>l.SIZE_SMALL,validator:e=>Object(l.isValid)(e)},userFullName:{type:String,required:!0},timeDescription:{type:String,required:!0},deleteAble:{type:Boolean,default:!1},updateAble:{type:Boolean,default:!1},reportAble:{type:Boolean,default:!1},edited:{type:Boolean,required:!0},profileUrl:String,inlineHead:Boolean},data:()=>({openModal:!1}),methods:{confirmDelete(){this.openModal=!1,this.$emit(\"confirm-delete\")}}},p=(n(\"QYEq\"),n(\"KHd+\")),v=function(e){e.options.__langStrings={totara_comment:[\"edited\"]}},k=Object(p.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-commentReplyHeader\"},[n(\"ModalPresenter\",{attrs:{open:e.openModal},on:{\"request-close\":function(t){e.openModal=!1}}},[n(\"ConfirmDeleteCommentReplyModal\",{on:{\"confirm-delete\":e.confirmDelete,\"request-close\":function(t){e.openModal=!1}}})],1),e._v(\" \"),n(\"div\",{staticClass:\"tui-commentReplyHeader__content\",class:{\"tui-commentReplyHeader__content--inline\":e.inlineHead}},[n(\"CommentUserLink\",{staticClass:\"tui-commentReplyHeader__link\",class:{\"tui-commentReplyHeader__link--inline\":e.inlineHead},attrs:{size:e.size,\"profile-url\":e.profileUrl,\"user-full-name\":e.userFullName}}),e._v(\" \"),n(\"p\",{staticClass:\"tui-commentReplyHeader__timeDescription\",class:{\"tui-commentReplyHeader__timeDescription--inline\":e.inlineHead}},[n(\"span\",[e._v(e._s(e.timeDescription))]),e._v(\" \"),e.edited?n(\"span\",[e._v(e._s(e.$str(\"edited\",\"totara_comment\")))]):e._e()])],1),e._v(\" \"),n(\"CommentActionDropDown\",{staticClass:\"tui-commentReplyHeader__menu\",attrs:{\"show-delete-action\":e.deleteAble,\"show-update-action\":e.updateAble,\"show-report-action\":e.reportAble},on:{\"click-edit\":function(t){return e.$emit(\"click-edit\")},\"click-report-content\":function(t){return e.$emit(\"click-report-content\")},\"click-delete\":function(t){e.openModal=!0}}})],1)}),[],!1,null,null,null);\"function\"==typeof v&&v(k),k.options.__hasBlocks={script:!0,template:!0};t.default=k.exports},aZP4:function(e,t,n){},anG8:function(e,t,n){\"use strict\";var i=n(\"Hu75\");n.n(i).a},\"cH0+\":function(e,t,n){\"use strict\";var i=n(\"Qla0\");n.n(i).a},d5jH:function(e,t,n){\"use strict\";n.r(t);var i=n(\"2wx7\"),a=n.n(i),r=n(\"kkOl\"),o=n.n(r),l=n(\"nEm4\"),m=n.n(l),d=n(\"p9yr\"),s=n.n(d),u=n(\"FoZm\"),c=n(\"ibac\"),p=n(\"yAFK\"),v=n(\"nGKo\"),k=n.n(v),f=n(\"oMGV\"),_=n.n(f),y=n(\"y5S1\"),g={components:{Weka:a.a,Form:m.a,SubmitCancelButtonsGroup:s.a,ResponseBox:k.a,UnsavedChangesWarning:_.a},props:{size:{type:String,default:()=>p.SIZE_SMALL,validator:e=>Object(p.isValid)(e)},component:String,area:String,commentId:{type:[String,Number],required:!0},editor:{type:Object,validator:e=>\"compact\"in e&&\"variant\"in e,default:()=>({compact:!0,variant:void 0,contextId:void 0})},submitting:Boolean,replyTo:{type:Object,default:()=>null}},data:()=>({draftId:null,editorOption:null,content:o.a.empty()}),computed:{isSmall(){return p.SIZE_SMALL===this.size}},watch:{replyTo:{deep:!0,immediate:!0,handler(e){this.content=e?o.a.fromDoc(Object(c.createMentionContent)(e)):o.a.empty()}},editorOption(){console.warn(\"The data attribute 'editorOption' had been deprecated and no longer used, please update all calls\")}},async mounted(){await this.$_loadDraftId(),this.component&&console.warn('The prop \"component\" has been deprecated, please do not use.'),this.area&&console.warn('The prop \"area\" has been deprecated, please do not use.')},methods:{async $_loadDraftId(){const{data:{item_id:e}}=await this.$apollo.mutate({mutation:y.a});this.draftId=e},submit(){this.submitting||(this.$emit(\"submit\",{content:JSON.stringify(this.content.getDoc()),format:u.FORMAT_JSON_EDITOR,commentId:this.commentId,itemId:this.draftId}),this.content=o.a.empty(),this.$_loadDraftId())}}},h=(n(\"KKPO\"),n(\"KHd+\")),b=function(e){e.options.__langStrings={totara_comment:[\"enterreply\",\"reply\"]}},N=Object(h.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ResponseBox\",{staticClass:\"tui-commentReplyForm\"},[n(\"Form\",{staticClass:\"tui-commentReplyForm__form\"},[e.content.isEmpty||e.submitting?e._e():n(\"UnsavedChangesWarning\",{attrs:{value:e.content}}),e._v(\" \"),e.draftId?n(\"Weka\",{staticClass:\"tui-commentReplyForm__editor\",attrs:{compact:e.editor.compact,variant:e.editor.variant,\"usage-identifier\":{component:\"totara_comment\",area:\"reply\"},placeholder:e.$str(\"enterreply\",\"totara_comment\"),\"file-item-id\":e.draftId,\"data-file-item-id\":e.draftId,\"context-id\":e.editor.contextId},on:{ready:function(t){return e.$emit(\"form-ready\")}},model:{value:e.content,callback:function(t){e.content=t},expression:\"content\"}}):e._e(),e._v(\" \"),n(\"SubmitCancelButtonsGroup\",{attrs:{\"submit-text\":e.$str(\"reply\",\"totara_comment\"),size:e.size,\"disable-submit\":e.content.isEmpty||e.submitting,\"disable-cancel\":e.submitting},on:{\"click-submit\":e.submit,\"click-cancel\":function(t){return e.$emit(\"cancel\")}}})],1)],1)}),[],!1,null,null,null);\"function\"==typeof b&&b(N),N.options.__hasBlocks={script:!0,template:!0};t.default=N.exports},d8cU:function(e,t,n){\"use strict\";n.r(t);var i=n(\"Z82V\"),a=n.n(i),r=n(\"yAFK\"),o=n(\"fPwS\"),l=n.n(o),m={components:{CommentBox:a.a,Loading:l.a},props:{component:{type:String,required:!0},area:{type:String,required:!0},instanceId:{type:[String,Number],required:!0},editorVariant:{type:String,default(){return`${this.component}-${this.area}`}},editorContextId:[String,Number],showCommentForm:{type:Boolean,default:!0},showComment:{type:Boolean,default:!0},showLikeButton:{type:Boolean,default:!0},interactor:{type:Object}},data:()=>({size:r.SIZE_SMALL,totalComments:0,submitting:!1,commentsLoading:!1}),computed:{reallyCommentAble(){return Boolean(this.interactor?this.interactor.can_comment:this.showComment)}}},d=(n(\"Gj80\"),n(\"KHd+\")),s=function(e){e.options.__langStrings={totara_comment:[\"comments\"],totara_engage:[\"comments\"]}},u=Object(d.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-sidePanelCommentBox\"},[n(\"h4\",{staticClass:\"tui-sidePanelCommentBox__header\"},[e.commentsLoading?n(\"span\",[e._v(e._s(e.$str(\"comments\",\"totara_engage\")))]):n(\"span\",[e._v(\"\\n      \"+e._s(e.$str(\"comments\",\"totara_comment\",e.totalComments)))]),e._v(\" \"),e.submitting?n(\"Loading\"):e._e()],1),e._v(\" \"),n(\"CommentBox\",{staticClass:\"tui-sidePanelCommentBox__box\",attrs:{\"instance-id\":e.instanceId,component:e.component,area:e.area,size:e.size,submitting:e.submitting,editor:{compact:!0,variant:e.editorVariant,contextId:e.editorContextId},\"show-comment-form\":e.showCommentForm,\"show-like-button\":e.showLikeButton,\"comment-able\":e.reallyCommentAble},on:{\"fetch-comments\":function(t){e.commentsLoading=t},\"update-total-comments\":function(t){e.totalComments=t},\"update-submitting\":function(t){e.submitting=t}}})],1)}),[],!1,null,null,null);\"function\"==typeof s&&s(u),u.options.__hasBlocks={script:!0,template:!0};t.default=u.exports},eHZ5:function(e,t,n){\"use strict\";var i=n(\"78h+\");n.n(i).a},elWf:function(e,t,n){},fPwS:function(e,t){e.exports=tui.require(\"tui/components/icons/Loading\")},fZ8t:function(e,t,n){},gLvT:function(e,t){e.exports=tui.require(\"tui/components/dropdown/Dropdown\")},hXJh:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"SIZE_LARGE\",(function(){return i})),n.d(t,\"SIZE_SMALL\",(function(){return a})),n.d(t,\"isValid\",(function(){return r}));const i=\"large\",a=\"small\";function r(e){return i===e||a===e}},hiKM:function(e,t,n){\"use strict\";t.a={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"totara_reportedcontent_create_review\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"component\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_component\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"area\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_area\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"item_id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"url\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_url\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"review\"},name:{kind:\"Name\",value:\"totara_reportedcontent_create_review\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"component\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"component\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"area\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"area\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"item_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"item_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"url\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"url\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"success\"},arguments:[],directives:[]}]}}]}}]}},i3R1:function(e,t,n){\"use strict\";var i=n(\"O3Nd\");n.n(i).a},ibac:function(e,t){e.exports=tui.require(\"editor_weka/helpers/mention\")},iuRN:function(e,t,n){\"use strict\";var i=n(\"V2I2\");n.n(i).a},ixux:function(e,t){e.exports=tui.require(\"totara_comment/components/box/ReplyBox\")},jUiv:function(e,t){e.exports=tui.require(\"totara_comment/components/action/CommentActionDropDown\")},jx0T:function(e,t){e.exports=tui.require(\"totara_comment/components/form/ReplyForm\")},kEu8:function(e,t,n){\"use strict\";n.r(t);var i=n(\"2wx7\"),a=n.n(i),r=n(\"kkOl\"),o=n.n(r),l=n(\"nEm4\"),m=n.n(l),d=n(\"yAFK\"),s=n(\"p9yr\"),u=n.n(s),c=n(\"oMGV\"),p=n.n(c),v={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_comment_get_draft_item\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"id\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_integer\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"draftitem\"},name:{kind:\"Name\",value:\"totara_comment_draft_item\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"content\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"component\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"area\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"format\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"comment_area\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"file_draft_id\"},arguments:[],directives:[]}]}}]}}]},k={components:{Weka:a.a,Form:m.a,SubmitCancelButtonsGroup:u.a,UnsavedChangesWarning:p.a},apollo:{item:{query:v,fetchPolicy:\"network-only\",variables(){return{id:this.itemId}},result({data:{draftitem:e}}){this.content=o.a.fromDoc(JSON.parse(e.content))},update:({draftitem:e})=>e}},props:{size:{type:String,default:()=>d.SIZE_SMALL,validator:e=>Object(d.isValid)(e)},itemId:{type:[String,Number],required:!0},editor:{type:Object,validator:e=>\"compact\"in e&&\"variant\"in e,default:()=>({contextId:void 0,variant:void 0,compact:!0})},submitting:Boolean},data:()=>({editorOption:null,item:{},content:o.a.empty()}),computed:{commentArea(){return this.item.comment_area?this.item.comment_area.toLowerCase():\"comment\"}},watch:{editorOption(){console.warn(\"The data attribute 'editorOption' had been deprecated and no longer used\")}},methods:{submit(){const e={id:this.itemId,content:JSON.stringify(this.content.getDoc()),format:this.item.format,itemId:this.content.fileStorageItemId};this.$emit(\"update-item\",e)}}},f=(n(\"Bq6n\"),n(\"KHd+\")),_=function(e){e.options.__langStrings={totara_comment:[\"done\"]}},y=Object(f.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Form\",{staticClass:\"tui-editCommentReplyForm\"},[e.$apollo.loading?e._e():[e.content.isEmpty||e.submitting?e._e():n(\"UnsavedChangesWarning\",{attrs:{value:e.content}}),e._v(\" \"),e.$apollo.queries.item.loading?e._e():n(\"Weka\",{staticClass:\"tui-editCommentReplyForm__editor\",attrs:{\"file-item-id\":e.item.file_draft_id,\"usage-identifier\":{component:\"totara_comment\",area:e.commentArea,instanceId:e.itemId},compact:e.editor.compact,\"context-id\":e.editor.contextId,variant:e.editor.variant},model:{value:e.content,callback:function(t){e.content=t},expression:\"content\"}}),e._v(\" \"),n(\"SubmitCancelButtonsGroup\",{attrs:{\"submit-text\":e.$str(\"done\",\"totara_comment\"),\"disable-submit\":e.content.isEmpty||e.submitting,size:e.size},on:{\"click-submit\":e.submit,\"click-cancel\":function(t){return e.$emit(\"cancel\")}}})]],2)}),[],!1,null,null,null);\"function\"==typeof _&&_(y),y.options.__hasBlocks={script:!0,template:!0};t.default=y.exports},kJKs:function(e,t){e.exports=tui.require(\"totara_comment/components/card/ReplyCard\")},kkOl:function(e,t){e.exports=tui.require(\"editor_weka/WekaValue\")},kvx8:function(e,t,n){\"use strict\";n.r(t);var i=n(\"tkAW\"),a=n.n(i),r=n(\"u5iS\"),o=n.n(r),l=n(\"BN8m\"),m=n.n(l),d=n(\"vF5l\"),s=n.n(d),u=n(\"lLj0\"),c=n.n(u),p={components:{Modal:a.a,ModalContent:o.a,ButtonGroup:m.a,Button:s.a,Warning:c.a},props:{title:{type:String,default:\"\"}},computed:{id(){return this.$id(this.title)}}},v=(n(\"y7f9\"),n(\"KHd+\")),k=function(e){e.options.__langStrings={core:[\"cancel\",\"confirm\"],totara_comment:[\"deletecommentconfirm\"]}},f=Object(v.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"Modal\",{staticClass:\"tui-confirmDeleteCommentReplyModal\",attrs:{size:\"small\",\"aria-labelledby\":e.id}},[n(\"ModalContent\",{staticClass:\"tui-confirmDeleteCommentReplyModal__content\",attrs:{\"close-button\":!0,title:e.title,\"title-id\":e.id},on:{dismiss:function(t){return e.$emit(\"request-close\")}}},[n(\"div\",{staticClass:\"tui-confirmDeleteCommentReplyModal__textBox\"},[n(\"Warning\",{attrs:{size:700,\"custom-class\":[\"tui-icon--warning\",\"tui-confirmDeleteCommentReplyModal__icon\"]}}),e._v(\" \"),n(\"p\",{staticClass:\"tui-confirmDeleteCommentReplyModal__textBox-text\"},[e._v(\"\\n        \"+e._s(e.$str(\"deletecommentconfirm\",\"totara_comment\"))+\"\\n      \")])],1),e._v(\" \"),n(\"ButtonGroup\",{staticClass:\"tui-confirmDeleteCommentReplyModal__buttons\",attrs:{slot:\"buttons\"},slot:\"buttons\"},[n(\"Button\",{attrs:{text:e.$str(\"confirm\",\"core\"),styleclass:{primary:!0,small:!0}},on:{click:function(t){return t.preventDefault(),e.$emit(\"confirm-delete\")}}}),e._v(\" \"),n(\"Button\",{attrs:{text:e.$str(\"cancel\",\"core\"),styleclass:{small:!0}},on:{click:function(t){return t.preventDefault(),e.$emit(\"request-close\")}}})],1)],1)],1)}),[],!1,null,null,null);\"function\"==typeof k&&k(f),f.options.__hasBlocks={script:!0,template:!0};t.default=f.exports},\"l/zP\":function(e,t,n){\"use strict\";var i=n(\"yGju\");n.n(i).a},lLj0:function(e,t){e.exports=tui.require(\"tui/components/icons/Warning\")},mSAN:function(e,t,n){\"use strict\";n.r(t);var i=n(\"w20f\"),a=n.n(i),r=n(\"fPwS\"),o=n.n(r),l=n(\"yAFK\"),m=n(\"sqa2\"),d=n.n(m),s=n(\"UpZR\"),u=n.n(s),c=n(\"5Dry\"),p={components:{Comment:a.a,CommentActionLink:d.a,Loading:o.a},props:{firstCursor:{type:String,default:null},size:{type:String,required:!0,validator:e=>Object(l.isValid)(e)},component:{type:String,required:!0},area:{type:String,required:!0},instanceId:{type:[String,Number],required:!0},submitting:Boolean,showLikeButtonText:Boolean,showReplyButtonText:Boolean,withBorder:Boolean,commentInlineHead:Boolean,showLikeButton:{type:Boolean,default:!0},editor:{type:Object,validator:e=>\"compact\"in e&&\"variant\"in e,default:()=>({compact:!0,variant:void 0,contextId:void 0})}},apollo:{thread:{query:c.a,context:{batch:!0},watchLoading(e){this.$emit(\"fetch-comments\",e)},variables(){return{component:this.component,area:this.area,instanceid:this.instanceId,cursor:this.firstCursor}},update:({cursor:e,comments:t})=>({cursor:e,comments:t}),result({data:{comments:e,cursor:t}}){this.hasMoreComments=e.length<t.total,this.$emit(\"update-total-comments\",t.total)}}},data:()=>({loading:0,hasMoreComments:!1,thread:{comments:[],cursor:null}}),computed:{isLarge(){return l.SIZE_LARGE===this.size}},methods:{async loadMore(){await this.$apollo.queries.thread.fetchMore({variables:{component:this.component,area:this.area,instanceid:this.instanceId,cursor:this.thread.cursor.next},updateQuery:(e,{fetchMoreResult:{comments:t,cursor:n}})=>{let i=Array.prototype.slice.call(e.comments);return t=Array.prototype.filter.call(t,e=>void 0===Array.prototype.find.call(i,t=>e.id==t.id)),t=Array.prototype.concat.call(t,i),this.hasMoreComments=t.length<n.total,{comments:t,cursor:n}}})},updateCommentsCache(e){const t={instanceid:this.instanceId,component:this.component,area:this.area,cursor:this.firstCursor};let{comments:n,cursor:i}=u.a.readQuery({query:c.a,variables:t});u.a.writeQuery({query:c.a,variables:t,data:{count:i,comments:Array.prototype.map.call(n,t=>t.id==e.id?e:t)}})},addReplyToComment(e){const t={instanceid:this.instanceId,component:this.component,area:this.area,cursor:this.firstCursor};let{comments:n,cursor:i}=u.a.readQuery({query:c.a,variables:t});u.a.writeQuery({query:c.a,variables:t,data:{cursor:i,comments:Array.prototype.map.call(n,t=>{if(e==t.id){let e=Object.assign({},t);return e.totalreplies+=1,e}return t})}})},updateReactStatus({id:e,status:t}){const n={instanceid:this.instanceId,component:this.component,area:this.area,cursor:this.firstCursor};let{comments:i,cursor:a}=u.a.readQuery({query:c.a,variables:n});u.a.writeQuery({query:c.a,variables:n,data:{cursor:a,comments:Array.prototype.map.call(i,n=>{if(n.id==e){let e=Object.assign({},n),i=Object.assign({},e.interactor);return i.reacted=t,e.interactor=i,t?e.totalreactions+=1:0!=e.totalreactions&&(e.totalreactions-=1),e}return n})}})}}},v=(n(\"Ngjb\"),n(\"KHd+\")),k=Object(v.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{ref:\"comments\",staticClass:\"tui-commentThread\"},[n(\"CommentActionLink\",{staticClass:\"tui-commentThread__actionLink\",class:{\"tui-commentThread__actionLink--withBorder\":e.withBorder},attrs:{size:e.size,\"show-load-more\":e.hasMoreComments,loading:e.$apollo.queries.thread.loading},on:{\"load-more\":e.loadMore}}),e._v(\" \"),n(\"div\",{staticClass:\"tui-commentThread__comments\"},[e.$apollo.queries.thread.loading?n(\"div\",{staticClass:\"tui-commentThread__loading\"},[n(\"Loading\")],1):e._e(),e._v(\" \"),e._l(e.thread.comments,(function(t,i){return[n(\"Comment\",{key:t.id,staticClass:\"tui-commentThread__comment\",class:{\"tui-commentThread__comment--large\":e.isLarge,\"tui-commentThread__comment--withBorderBottom\":e.withBorder},attrs:{\"data-counter\":i,content:t.content,\"comment-id\":t.id,\"user-full-name\":t.user.fullname,\"user-id\":t.user.id,\"user-profile-image-url\":t.user.profileimageurl,\"user-profile-image-alt\":t.user.profileimagealt,\"time-description\":t.timedescription,\"total-replies\":t.totalreplies,\"delete-able\":t.interactor.can_delete,\"update-able\":t.interactor.can_update,\"report-able\":t.interactor.can_report,\"reply-able\":t.interactor.can_reply,\"react-able\":t.interactor.can_react,edited:t.edited,deleted:t.deleted,component:e.component,area:e.area,size:e.size,\"instance-id\":e.instanceId,submitting:e.submitting,\"total-reactions\":t.totalreactions,reacted:t.interactor.reacted,\"show-like-button\":e.showLikeButton,\"show-like-button-text\":e.showLikeButtonText,\"show-reply-button-text\":e.showReplyButtonText,\"inline-head\":e.commentInlineHead,\"can-view-author\":t.interactor.can_view_author,editor:e.editor},on:{\"update-submitting\":function(t){return e.$emit(\"update-submitting\",t)},\"update-comment\":e.updateCommentsCache,\"delete-comment\":e.updateCommentsCache,\"add-reply\":e.addReplyToComment,\"update-react-status\":e.updateReactStatus}})]}))],2)],1)}),[],!1,null,null,null);k.options.__hasBlocks={script:!0,template:!0};t.default=k.exports},nEm4:function(e,t){e.exports=tui.require(\"tui/components/form/Form\")},nGKo:function(e,t){e.exports=tui.require(\"totara_comment/components/form/box/ResponseBox\")},oMGV:function(e,t){e.exports=tui.require(\"totara_engage/components/form/UnsavedChangesWarning\")},p7Bt:function(e,t){e.exports=tui.require(\"totara_comment/components/action/CommentAction\")},p9yr:function(e,t){e.exports=tui.require(\"totara_comment/components/form/group/SubmitCancelButtonsGroup\")},psza:function(e,t,n){\"use strict\";n.r(t);var i=n(\"CKzT\"),a={props:{loading:{type:Boolean,default:!1},showLoadMore:{type:Boolean,default:!1},size:{type:String,default:()=>i.SIZE_SMALL,validator:e=>Object(i.isValid)(e)}},computed:{isSmall(){return i.SIZE_SMALL===this.size},linkText(){return this.showLoadMore?this.$str(\"loadmorecomments\",\"totara_comment\"):\"\"}},methods:{handleClick(){this.loading||this.showLoadMore&&this.$emit(\"load-more\")}}},r=(n(\"VSpl\"),n(\"KHd+\")),o=function(e){e.options.__langStrings={totara_comment:[\"loadmorecomments\"]}},l=Object(r.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-commentActionLink\"},[e.linkText?n(\"a\",{staticClass:\"tui-commentActionLink__link\",class:{\"tui-commentActionLink__link--small\":e.isSmall,\"tui-commentActionLink__link--disabled\":e.loading||!e.showLoadMore},attrs:{href:\"#\"},on:{click:function(t){return t.preventDefault(),e.handleClick(t)}}},[n(\"span\",[e._v(e._s(e.linkText))])]):e._e()])}),[],!1,null,null,null);\"function\"==typeof o&&o(l),l.options.__hasBlocks={script:!0,template:!0};t.default=l.exports},r63H:function(e,t,n){\"use strict\";n.r(t);var i=n(\"088a\"),a=n.n(i),r=n(\"yAFK\"),o=n(\"1R7l\"),l=n.n(o),m={components:{ReplyButtonIcon:a.a,SimpleLike:l.a},props:{commentId:{type:[Number,String],required:!0},area:{type:String,required:!0,validator:e=>[\"comment\",\"reply\"].includes(e)},size:{type:String,default:()=>r.SIZE_SMALL,validator:e=>Object(r.isValid)(e)},totalReplies:{type:[Number,String],default:0},totalReactions:[Number,String],reacted:Boolean,reactAble:{type:Boolean,default:!0},replyAble:{type:Boolean,default:!0},showLikeButton:{type:Boolean,default:!0},showLikeButtonText:Boolean,showReplyButtonText:Boolean},computed:{isSmall(){return r.SIZE_SMALL===this.size},likeButtonAriaLabel(){return this.reacted?this.$str(\"removelikeforcomment\",\"totara_comment\"):this.$str(\"likecomment\",\"totara_comment\")}}},d=(n(\"l/zP\"),n(\"KHd+\")),s=function(e){e.options.__langStrings={totara_comment:[\"bracketnumber\",\"likecomment\",\"removelikeforcomment\"]}},u=Object(d.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-commentAction\"},[e.showLikeButton?n(\"SimpleLike\",{staticClass:\"tui-commentAction__likeButton\",attrs:{\"instance-id\":e.commentId,component:\"totara_comment\",area:e.area,\"total-likes\":e.totalReactions,liked:e.reacted,\"button-aria-label\":e.likeButtonAriaLabel,disabled:!e.reactAble,\"show-text\":e.showLikeButtonText},on:{\"update-like-status\":function(t){return e.$emit(\"update-react-status\",t)},\"created-like\":function(t){return e.$emit(\"update-react-status\",!0)},\"removed-like\":function(t){return e.$emit(\"update-react-status\",!1)}}}):e._e(),e._v(\" \"),n(\"div\",{staticClass:\"tui-commentAction__replyBox\"},[n(\"ReplyButtonIcon\",{attrs:{\"show-text\":e.showReplyButtonText,disabled:!e.replyAble},on:{click:function(t){return e.$emit(\"click-reply\")}}}),e._v(\" \"),e.totalReplies?n(\"span\",{staticClass:\"tui-commentAction__replyBox-text\",class:{\"tui-commentAction__replyBox-text--small\":e.isSmall}},[e._v(\"\\n      \"+e._s(e.$str(\"bracketnumber\",\"totara_comment\",e.totalReplies))+\"\\n    \")]):e._e()],1)],1)}),[],!1,null,null,null);\"function\"==typeof s&&s(u),u.options.__hasBlocks={script:!0,template:!0};t.default=u.exports},repu:function(e,t,n){},rfSk:function(e,t,n){},rkhB:function(e,t){e.exports=tui.require(\"totara_comment/components/card/CommentCard\")},sLQy:function(e,t,n){},snEI:function(e,t,n){},sqa2:function(e,t){e.exports=tui.require(\"totara_comment/components/action/CommentActionLink\")},sxi1:function(e,t){e.exports=tui.require(\"tui/components/icons/More\")},tGKU:function(e,t,n){\"use strict\";n.r(t);n(\"cH0+\");var i=n(\"KHd+\"),a=Object(i.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tui-commentCard\"},[n(\"div\",{staticClass:\"tui-commentCard__comment\"},[n(\"div\",{staticClass:\"tui-commentCard__profilePicture\"},[e._t(\"profile-picture\")],2),e._v(\" \"),n(\"div\",{staticClass:\"tui-commentCard__body\"},[n(\"div\",{staticClass:\"tui-commentCard__header\"},[e._t(\"body-header\")],2),e._v(\" \"),n(\"div\",{staticClass:\"tui-commentCard__content\"},[e._t(\"body-content\")],2),e._v(\" \"),n(\"div\",{staticClass:\"tui-commentCard__footer\"},[e._t(\"body-footer\")],2)])]),e._v(\" \"),n(\"div\",{staticClass:\"tui-commentCard__replyBox\"},[e._t(\"reply-box\")],2)])}),[],!1,null,null,null);a.options.__hasBlocks={script:!1,template:!0};t.default=a.exports},tXwl:function(e,t){e.exports=tui.require(\"tui/components/icons/Reply\")},tkAW:function(e,t){e.exports=tui.require(\"tui/components/modal/Modal\")},u5iS:function(e,t){e.exports=tui.require(\"tui/components/modal/ModalContent\")},uFZJ:function(e,t,n){},vF5l:function(e,t){e.exports=tui.require(\"tui/components/buttons/Button\")},vyVp:function(e,t){e.exports=tui.require(\"tui/notifications\")},w20f:function(e,t){e.exports=tui.require(\"totara_comment/components/comment/Comment\")},y5S1:function(e,t,n){\"use strict\";t.a={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"core_file_unused_draft_item_id\"},variableDefinitions:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",alias:{kind:\"Name\",value:\"item_id\"},name:{kind:\"Name\",value:\"core_file_unused_draft_item_id\"},arguments:[],directives:[]}]}}]}},y7f9:function(e,t,n){\"use strict\";var i=n(\"XQD0\");n.n(i).a},yAFK:function(e,t){e.exports=tui.require(\"totara_comment/size\")},yGju:function(e,t,n){}});","extractedComments":[]}