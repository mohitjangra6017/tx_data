{"code":"!function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=\"iIua\")}({\"+IPl\":function(e,t,i){\"use strict\";i.r(t);var a=i(\"fCWf\"),n=i.n(a),r=i(\"yikf\"),s=i.n(r),o=i(\"5qAA\"),l=i.n(o),d=i(\"g8/U\"),u=i.n(d),m=i(\"KGot\"),c=i.n(m),f=i(\"rNse\"),p=i.n(f),h=i(\"Bx/y\"),v=i.n(h),g=i(\"PNFE\"),_=i.n(g),b=i(\"9wMC\"),k={components:{ActionLink:n.a,Table:s.a,HeaderCell:l.a,PageHeading:u.a,Cell:c.a,Edit:p.a,Download:v.a,Add:_.a,BackupAndRestoreButtons:b.default},props:{theme:{type:String,required:!0},themeName:String,tenants:{type:Array,required:!1,default:()=>[]}},data(){return{configLink:this.$url(\"/theme/kineo/theme_settings.php\",{theme_name:this.theme})}},methods:{tenantLink(e){return this.$url(\"/theme/kineo/theme_settings.php\",{theme_name:this.theme,tenant_id:e})},backupLink(e){return this.$url(\"/theme/kineo/theme_backup.php\",{theme_name:this.theme,tenant_id:e})},restoreLink(e){return this.$url(\"/theme/kineo/theme_restore.php\",{theme_name:this.theme,tenant_id:e})}}},y=(i(\"uzCs\"),i(\"KHd+\")),S=function(e){e.options.__langStrings={core:[\"actions\",\"restore\"],totara_tui:[\"branding\",\"custom\",\"editsitebranding\",\"edittenantsetting\",\"site\",\"sitebrandinginformation\",\"sitebranding\",\"tenantbranding\"],totara_tenant:[\"tenant\",\"tenantidnumber\"]}},F=Object(y.a)(k,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"tui-themeTenants\"},[i(\"PageHeading\",{attrs:{title:e.themeName||e.theme}}),e._v(\" \"),i(\"div\",{staticClass:\"tui-themeTenants__content\"},[i(\"div\",{staticClass:\"tui-themeTenants__section\"},[i(\"h3\",[e._v(e._s(e.$str(\"sitebranding\",\"totara_tui\")))]),e._v(\" \"),i(\"p\",[e._v(e._s(e.$str(\"sitebrandinginformation\",\"totara_tui\")))]),e._v(\" \"),i(\"ActionLink\",{attrs:{href:e.configLink,text:e.$str(\"editsitebranding\",\"totara_tui\"),styleclass:{primary:!0}}})],1),e._v(\" \"),i(\"BackupAndRestoreButtons\",{attrs:{\"selected-tenant-id\":0,\"theme-name\":e.theme}})],1),e._v(\" \"),i(\"div\",{staticClass:\"tui-themeTenants__section\"},[i(\"h3\",[e._v(e._s(e.$str(\"tenantbranding\",\"totara_tui\")))]),e._v(\" \"),i(\"Table\",{attrs:{data:e.tenants},scopedSlots:e._u([{key:\"header-row\",fn:function(){return[i(\"HeaderCell\",[e._v(e._s(e.$str(\"tenant\",\"totara_tenant\")))]),e._v(\" \"),i(\"HeaderCell\",[e._v(\"\\n            \"+e._s(e.$str(\"tenantidnumber\",\"totara_tenant\"))+\"\\n          \")]),e._v(\" \"),i(\"HeaderCell\",[e._v(e._s(e.$str(\"branding\",\"totara_tui\")))]),e._v(\" \"),i(\"HeaderCell\",[e._v(e._s(e.$str(\"actions\",\"core\")))])]},proxy:!0},{key:\"row\",fn:function(t){var a=t.row;return[i(\"Cell\",[e._v(\"\\n            \"+e._s(a.name)+\"\\n          \")]),e._v(\" \"),i(\"Cell\",[e._v(\"\\n            \"+e._s(a.idnumber)+\"\\n          \")]),e._v(\" \"),i(\"Cell\",[e._v(\"\\n            \"+e._s(a.customBranding?e.$str(\"custom\",\"totara_tui\"):e.$str(\"site\",\"totara_tui\"))+\"\\n          \")]),e._v(\" \"),i(\"Cell\",[i(\"a\",{attrs:{href:e.tenantLink(a.id)}},[i(\"Edit\",{attrs:{alt:e.$str(\"edittenantsetting\",\"totara_tui\",a.name)}})],1),e._v(\" \"),i(\"a\",{attrs:{href:e.backupLink(a.id),target:\"_blank\"}},[i(\"Download\",{attrs:{alt:e.$str(\"edittenantsetting\",\"totara_tui\",a.name)}})],1),e._v(\" \"),i(\"a\",{attrs:{href:e.restoreLink(a.id)}},[i(\"Add\",{attrs:{alt:e.$str(\"restore\",\"core\",a.name)}})],1)])]}}])})],1)],1)}),[],!1,null,null,null);\"function\"==typeof S&&S(F),F.options.__hasBlocks={script:!0,template:!0};t.default=F.exports},\"+yxl\":function(e,t,i){\"use strict\";var a=i(\"mX8v\");i.n(a).a},\"138x\":function(e,t){e.exports=tui.require(\"tui/components/theme_settings/ImageUploadSetting\")},\"1i2V\":function(e,t){e.exports=tui.require(\"tui/components/tabs/Tab\")},\"20FL\":function(e,t,i){\"use strict\";i.r(t);i(\"2nYW\");var a=i(\"KHd+\"),n=Object(a.a)({},void 0,void 0,!1,null,null,null);n.options.__hasBlocks={script:!1,template:!1},tui._processOverride(n.exports,\"tui/components/tabs/Tabs\"),t.default=n.exports},\"2nYW\":function(e,t,i){\"use strict\";var a=i(\"GTHw\");i.n(a).a},\"2tE6\":function(e,t,i){var a={\"./form/UploadWrapper\":\"gsrG\",\"./form/UploadWrapper.vue\":\"gsrG\",\"./overrides/container_workspace/card/OriginalSpaceCard\":\"qM48\",\"./overrides/container_workspace/card/OriginalSpaceCard.vue\":\"qM48\",\"./overrides/tui/buttons/Button\":\"wY/E\",\"./overrides/tui/buttons/Button.vue\":\"wY/E\",\"./overrides/tui/form/ImageUpload\":\"ifgw\",\"./overrides/tui/form/ImageUpload.vue\":\"ifgw\",\"./overrides/tui/form/Input\":\"rH3o\",\"./overrides/tui/form/Input.vue\":\"rH3o\",\"./overrides/tui/form/InputColor\":\"Oc0M\",\"./overrides/tui/form/InputColor.vue\":\"Oc0M\",\"./overrides/tui/form/Textarea\":\"Smff\",\"./overrides/tui/form/Textarea.vue\":\"Smff\",\"./overrides/tui/sidepanel/SidePanelNavLinkItem\":\"KpCl\",\"./overrides/tui/sidepanel/SidePanelNavLinkItem.vue\":\"KpCl\",\"./overrides/tui/tabs/Tabs\":\"20FL\",\"./overrides/tui/tabs/Tabs.vue\":\"20FL\",\"./theme_settings/BackupAndRestoreButtons\":\"9wMC\",\"./theme_settings/BackupAndRestoreButtons.vue\":\"9wMC\",\"./theme_settings/SettingsFormGeneric\":\"wGlA\",\"./theme_settings/SettingsFormGeneric.vue\":\"wGlA\",\"./theme_settings/SettingsFormRow\":\"YuSn\",\"./theme_settings/SettingsFormRow.vue\":\"YuSn\"};function n(e){var t=r(e);return i(t)}function r(e){if(!i.o(a,e)){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id=\"2tE6\"},\"4BlC\":function(e,t){e.exports=tui.require(\"tui/validation\")},\"4k6g\":function(e,t){e.exports=tui.require(\"theme_kineo/components/form/UploadWrapper\")},\"4qPj\":function(e,t,i){},\"59Wh\":function(e,t,i){},\"5h9J\":function(e,t){e.exports=tui.require(\"tui/components/buttons/ButtonIcon\")},\"5qAA\":function(e,t){e.exports=tui.require(\"tui/components/datatable/HeaderCell\")},\"6Li/\":function(e,t){e.exports=tui.require(\"tui/components/form/form_common\")},\"8Zry\":function(e,t,i){var a={\"./customValidation\":\"hhzo\",\"./customValidation.js\":\"hhzo\"};function n(e){var t=r(e);return i(t)}function r(e){if(!i.o(a,e)){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id=\"8Zry\"},\"9wMC\":function(e,t,i){\"use strict\";i.r(t);var a=i(\"fCWf\"),n={components:{ActionLink:i.n(a).a},props:{selectedTenantId:Number,themeName:String},methods:{backupLink(e,t){return this.$url(\"/theme/kineo/theme_backup.php\",{theme_name:t,tenant_id:e})},restoreLink(e,t){return this.$url(\"/theme/kineo/theme_restore.php\",{theme_name:t,tenant_id:e})}}},r=(i(\"+yxl\"),i(\"KHd+\")),s=function(e){e.options.__langStrings={theme_kineo:[\"theme_backup:title\",\"theme_restore:title\"]}},o=Object(r.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"backup-restore__section\"},[i(\"ActionLink\",{attrs:{href:e.backupLink(e.selectedTenantId,e.themeName),target:\"_blank\",text:e.$str(\"theme_backup:title\",\"theme_kineo\"),styleclass:{primary:!0}}}),e._v(\" \"),i(\"ActionLink\",{attrs:{href:e.restoreLink(e.selectedTenantId,e.themeName),text:e.$str(\"theme_restore:title\",\"theme_kineo\"),styleclass:{primary:!0}}})],1)}),[],!1,null,null,null);\"function\"==typeof s&&s(o),o.options.__hasBlocks={script:!0,template:!0};t.default=o.exports},BLQa:function(e,t,i){},BN8m:function(e,t){e.exports=tui.require(\"tui/components/buttons/ButtonGroup\")},\"Bx/y\":function(e,t){e.exports=tui.require(\"tui/components/icons/Download\")},GEK5:function(e,t){e.exports=tui.require(\"tui/components/form/FormRowDefaults\")},GQru:function(e,t){e.exports=tui.require(\"theme_kineo/customValidation\")},GTHw:function(e,t,i){},Hndx:function(e,t,i){},IBd2:function(e,t){e.exports=tui.require(\"tui/components/images/ResponsiveImage\")},IqB1:function(e,t){e.exports=tui.require(\"tui/components/collapsible/Collapsible\")},Ir5P:function(e,t){e.exports=tui.require(\"theme_kineo/components/theme_settings/SettingsFormGeneric\")},JXQf:function(e,t){e.exports=tui.require(\"tui/components/loading/Loader\")},KGot:function(e,t){e.exports=tui.require(\"tui/components/datatable/Cell\")},\"KHd+\":function(e,t,i){\"use strict\";function a(e,t,i,a,n,r,s,o){var l,d=\"function\"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=i,d._compiled=!0),a&&(d.functional=!0),r&&(d._scopeId=\"data-v-\"+r),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=l):n&&(l=o?function(){n.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(d.functional){d._injectStyles=l;var u=d.render;d.render=function(e,t){return l.call(t),u(e,t)}}else{var m=d.beforeCreate;d.beforeCreate=m?[].concat(m,l):[l]}return{exports:e,options:d}}i.d(t,\"a\",(function(){return a}))},KpCl:function(e,t,i){\"use strict\";i.r(t);i(\"MlBC\");var a=i(\"KHd+\"),n=Object(a.a)({},void 0,void 0,!1,null,null,null);n.options.__hasBlocks={script:!1,template:!1},tui._processOverride(n.exports,\"tui/components/sidepanel/SidePanelNavLinkItem\"),t.default=n.exports},MlBC:function(e,t,i){\"use strict\";var a=i(\"c7BU\");i.n(a).a},NEm0:function(e,t){e.exports=tui.require(\"tui/components/form/Upload\")},Oc0M:function(e,t,i){\"use strict\";i.r(t);var a=i(\"obVy\"),n={components:{Input:i.n(a).a},inheritAttrs:!1,props:[\"ariaDescribedby\",\"ariaInvalid\",\"ariaLabel\",\"ariaLabelledby\",\"autofocus\",\"disabled\",\"id\",\"name\",\"readonly\",\"required\",\"styleclass\",\"value\",\"charLength\"],data:()=>({isIE:document.body.classList.contains(\"ie\"),resolvedHexValue:null,keywordColours:{}}),mounted(){this.resolvedHexValue=this.resolveColour(this.value)},created(){this.keywordColours=this.custom_validation.getKeywordColours()},inject:[\"custom_validation\"],methods:{resolveColour(e){if(\"\"===e)return;if(null===(e=this.custom_validation.resolveSetting(e)))return;let t=null;return this.custom_validation.isValidHexColour(e)?t=e:this.custom_validation.isValidRgbColour(e)?t=this.convertRgbToHex(e):this.custom_validation.isValidRgbaColour(e)?t=this.convertRgbaToHex(e):this.custom_validation.isValidKeywordColour(e)&&(t=this.convertKeywordToHex(e)),t},handleTextChange(e){this.resolvedHexValue=this.resolveColour(e.target.value),this.$emit(\"input\",e.target.value)},handlePickerInput(e){this.readonly||(this.resolvedHexValue=this.resolveColour(e),this.$emit(\"input\",e))},isValidHexCode:e=>/^#[0-9A-F]{6}$/i.test(e),convertRgbToHex(e){return e=this.custom_validation.getRgbRegEx().exec(e),\"#\"+((1<<24)+(parseInt(e.groups.r,10)<<16)+(parseInt(e.groups.g,10)<<8)+parseInt(e.groups.b,10)).toString(16).slice(1).toUpperCase()},convertRgbaToHex(e){return e=this.custom_validation.getRgbaRegEx().exec(e),\"#\"+((1<<24)+(parseInt(e.groups.r,10)<<16)+(parseInt(e.groups.g,10)<<8)+parseInt(e.groups.b,10)).toString(16).slice(1).toUpperCase()},convertKeywordToHex(e){let t,i=this.keywordColours;return void 0!==i[e]&&(t=i[e]),t}}},r=(i(\"yhO6\"),i(\"KHd+\")),s=Object(r.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"tui-inputColor\",class:[e.charLength?\"tui-inputColor--charLength-\"+e.charLength:null,e.charLength?\"tui-input--customSize\":null]},[i(\"div\",{staticClass:\"tui-inputColor__colorBlock\",class:[e.disabled?\"tui-inputColor__colorBlock--disabled\":\"\"],style:{backgroundColor:e.resolvedHexValue}}),e._v(\" \"),e.isIE?e._e():i(\"Input\",e._g({staticClass:\"tui-inputColor__picker\",attrs:{value:e.resolvedHexValue,type:\"color\",tabindex:\"-1\",disabled:e.disabled,readonly:e.readonly,\"aria-hidden\":\"true\"},on:{input:e.handlePickerInput}},e.$listeners)),e._v(\" \"),i(\"Input\",e._g(e._b({staticClass:\"tui-inputColor__input\",attrs:{\"char-length\":\"full\",type:\"text\"},on:{blur:e.handleTextChange}},\"Input\",e.$props,!1),e.$listeners))],1)}),[],!1,null,null,null);s.options.__hasBlocks={script:!0,template:!0},tui._processOverride(s.exports,\"tui/components/form/InputColor\");t.default=s.exports},PNFE:function(e,t){e.exports=tui.require(\"tui/components/icons/Add\")},QtBu:function(e,t){e.exports=tui.require(\"theme_kineo/components/theme_settings/SettingsFormRow\")},\"R/6L\":function(e,t,i){\"use strict\";var a=i(\"BLQa\");i.n(a).a},RIWe:function(e,t,i){\"use strict\";i.r(t);var a=i(\"JXQf\"),n=i.n(a),r=i(\"1i2V\"),s=i.n(r),o=i(\"txsu\"),l=i.n(o),d=i(\"WBvU\"),u=i(\"vGF0\"),m=i.n(u),c=i(\"g8/U\"),f=i.n(c),p={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"totara_tui_themes_with_variables\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"theme\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_component\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"totara_tui_themes_with_variables\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"theme\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"theme\"}}}],directives:[]}]}}]},h={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",name:{kind:\"Name\",value:\"core_get_theme_settings\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"theme\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_component\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"tenant_id\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"draft_id\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"Int\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"core_get_theme_settings\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"theme\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"theme\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"tenant_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"tenant_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"draft_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"draft_id\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"categories\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"properties\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"value\"},arguments:[],directives:[]}]}}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"flavours\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"engage\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"learn\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"perform\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"files\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"ui_key\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"type\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"category\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"valid_extensions\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"default_url\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"current_url\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"file_area\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"repository_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"draft_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"url\"},arguments:[],directives:[]}]}}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"context_id\"},arguments:[],directives:[]}]}}]}}]},v={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"core_update_theme_settings\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"theme\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"param_component\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"tenant_id\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"categories\"}},type:{kind:\"NonNullType\",type:{kind:\"ListType\",type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_theme_category_input\"}}}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"files\"}},type:{kind:\"NonNullType\",type:{kind:\"ListType\",type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_theme_file_input\"}}}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"core_update_theme_settings\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"theme\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"theme\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"tenant_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"tenant_id\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"categories\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"categories\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"files\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"files\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"categories\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"properties\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"name\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"type\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"value\"},arguments:[],directives:[]}]}}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"flavours\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"engage\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"learn\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"perform\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"files\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"ui_key\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"type\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"category\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"valid_extensions\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"default_url\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"current_url\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"file_area\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"repository_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"draft_id\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"url\"},arguments:[],directives:[]}]}}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"context_id\"},arguments:[],directives:[]}]}}]}}]},g=i(\"BN8m\"),_=i.n(g),b=i(\"vyVp\"),k=i(\"Y7GP\"),y=i.n(k),S=i(\"Ir5P\"),F=i.n(S),x=i(\"9wMC\"),N=i(\"GQru\"),I={components:{Loader:n.a,Tabs:l.a,Tab:s.a,Uniform:d.Uniform,FormRow:d.FormRow,FormRowDetails:m.a,FormToggleSwitch:d.FormToggleSwitch,PageHeading:f.a,SettingsFormGeneric:F.a,ButtonGroup:_.a,BackupAndRestoreButtons:x.default},props:{theme:{type:String,required:!0},themeName:String,selectedTenantId:Number,selectedTenantName:String,themeSettings:Object,customizableTenantSettings:Object},data(){let e={formtenant_field_tenant:{value:!1,type:\"boolean\"}};return this.themeSettings.settings.forEach(t=>{\"image\"!==t.type&&(e[t.identifier]={value:t.default,type:\"value\"})}),{tenantOverridesEnabled:!1,query:h,theme_settings:y.a,initialValues:e,embeddedFormData:{flavours:null,formFieldData:{tenant:[],elements:[],fonts:[],navigation:[],brand:[],pages:[],blocks:[],isotope:[],custom:[],images:[]},mergedDefaultCSSVariableData:[],fileData:[]},customCSSEnabled:!0,errorsForm:null,valuesForm:null,resultForm:null,dataIsReady:!1,isSaving:!1,rawCSSVariableData:null,tenantCategories:{},allThemeVariables:{}}},computed:{pageTitle(){return this.selectedTenantName?this.$str(\"editthemetenant\",\"totara_core\",this.selectedTenantName):this.$str(\"edittheme\",\"totara_core\",this.themeName||this.theme)},allFetchesLoaded(){return!!this.rawCSSVariableData},allQueriesLoaded(){return!!this.core_get_theme_settings&&!!this.totara_tui_themes_with_variables},allDataLoaded(){return!!this.core_get_theme_settings&&!!this.totara_tui_themes_with_variables&&!!this.rawCSSVariableData},getSelectedTenant(){return this.selectedTenantId?this.selectedTenantId:0}},watch:{allQueriesLoaded(e){e&&this.loadCSSVariableData()},allDataLoaded(){this.transformQueryAndFetchData(this.core_get_theme_settings,this.rawCSSVariableData),this.setTenantFormValues()}},methods:{getSettingsInTab(e){return this.themeSettings.settings.filter(t=>t.tab===e)},setTenantFormValues(){let e=this.theme_settings.mergeFormData(this.initialValues,[this.embeddedFormData.formFieldData.tenant]);this.initialValues=this.theme_settings.getResolvedInitialValues(e),this.tenantOverridesEnabled=this.initialValues.formtenant_field_tenant.value},async loadCSSVariableData(){let e=await Promise.all(this.totara_tui_themes_with_variables.map(async e=>{const t=await fetch(this.$url(\"/totara/tui/json.php\",{bundle:\"theme_\"+e,file:\"css_variables\"})),i=await t.json();return i?i.vars:(console.error(\"[ThemeSettings] Configuration error: 'css_variables' file is missing for the selected theme.Please follow the TUI build instructions in order to generate the required file.\"),{})}));this.rawCSSVariableData=e.filter(e=>null!==e)},transformQueryAndFetchData(e,t){this.embeddedFormData.flavours=e.flavours,this.embeddedFormData.fileData=e.files,this.embeddedFormData.contextId=parseInt(e.context_id);const i=e.categories;for(let e=0;e<i.length;e++)this.embeddedFormData.formFieldData[i[e].name]=i[e].properties;let a={};this.themeSettings.settings.forEach(e=>{let t={};\"string\"==typeof e.default&&0===e.default.indexOf(\"@\")?(t.type=\"var\",t.value=e.default.substring(1)):(t.type=\"value\",t.value=e.default),a[e.identifier]=t});let n=this.theme_settings.mergeCSSVariableData(t.concat(a)),r=this.theme_settings.processCSSVariableData(n);this.embeddedFormData.mergedDefaultCSSVariableData=n,this.embeddedFormData.mergedProcessedCSSVariableData=r,r.forEach(e=>this.allThemeVariables[e.name]={type:e.type,value:e.value}),N.customValidation.initSettings(this.allThemeVariables),this.dataIsReady=!0},validate:()=>({}),canEditCategory(e){return!this.selectedTenantId||this.customizableTenantSettings&&!!this.customizableTenantSettings[e]},customizableTenantCategorySettings(e){return this.customizableTenantSettings&&this.customizableTenantSettings[e]?this.customizableTenantSettings[e]:null},formatDataForMutation:e=>({form:\"tenant\",fields:[{name:\"formtenant_field_tenant\",type:\"boolean\",value:String(e.formtenant_field_tenant.value)}]}),autoSubmitTenantForm(e){this.valuesForm=e,this.errorsForm&&(this.errorsForm=null),this.resultForm=e,void 0!==e.formtenant_field_tenant&&(this.tenantOverridesEnabled=e.formtenant_field_tenant.value);let t=this.formatDataForMutation(e);this.submit(t,this.selectedTenantId&&this.tenantOverridesEnabled)},setInitialTenantCategoryValues(e){let t=e.category;this.customizableTenantSettings&&this.customizableTenantSettings[t]&&(this.tenantCategories[t]=e.values)},async submit(e,t){let i=[{name:e.form,properties:e.fields}];t&&Object.keys(this.tenantCategories).forEach((function(e){this.tenantCategories[e].form&&i.push({name:this.tenantCategories[e].form,properties:this.tenantCategories[e].fields})}),this);let a=[];e.files&&(a=e.files.map(e=>({ui_key:e.ui_key,draft_id:e.file_area.draft_id,action:e.action||\"SAVE\"}))),this.isSaving=!0;try{await this.$apollo.mutate({mutation:v,variables:{theme:this.theme,tenant_id:this.selectedTenantId,categories:i,files:a},update:(e,{data:t})=>{e.writeQuery({query:h,variables:{theme:this.theme,tenant_id:this.selectedTenantId},data:{core_get_theme_settings:t.core_update_theme_settings}}),this.transformQueryAndFetchData(t.core_update_theme_settings,this.rawCSSVariableData)}}),Object(b.notify)({message:this.$str(\"settings_success_save\",\"totara_tui\"),type:\"success\"})}catch(e){Object(b.notify)({message:this.$str(\"settings_error_save\",\"totara_tui\"),type:\"error\"}),console.error(e)}this.isSaving=!1},updateAllThemeVariables(e){Object.keys(e).forEach(t=>{this.allThemeVariables.hasOwnProperty(t)&&(this.allThemeVariables[t].value=e[t].value)})}},apollo:{core_get_theme_settings:{query:h,variables(){return{theme:this.theme,tenant_id:this.selectedTenantId}}},totara_tui_themes_with_variables:{query:p,variables(){return{theme:this.theme}}}}},w=(i(\"zn7s\"),i(\"KHd+\")),T=function(e){e.options.__langStrings={totara_tui:[\"formtenant_label_tenant\",\"formtenant_details_tenant\",\"settings_error_save\",\"settings_success_save\",\"tabbrand\",\"tabcolours\",\"tabimages\",\"tabcustom\"],totara_core:[\"edittheme\",\"editthemetenant\",\"save\",\"saveextended\",\"settings\"]}},C=Object(w.a)(I,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"tui-themeSettings\"},[i(\"PageHeading\",{attrs:{title:e.pageTitle}}),e._v(\" \"),i(\"BackupAndRestoreButtons\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.selectedTenantId||e.selectedTenantId&&e.tenantOverridesEnabled,expression:\"!selectedTenantId || (selectedTenantId && tenantOverridesEnabled)\"}],attrs:{\"selected-tenant-id\":e.getSelectedTenant,\"theme-name\":e.theme}}),e._v(\" \"),i(\"div\",{staticClass:\"tui-themeSettings__content\"},[i(\"Loader\",{attrs:{loading:!e.allDataLoaded}},[e.dataIsReady&&e.embeddedFormData.formFieldData.brand?i(\"div\",{staticClass:\"tui-themeSettings__forms\"},[e.initialValues&&e.selectedTenantId?i(\"Uniform\",{attrs:{\"initial-values\":e.initialValues,errors:e.errorsForm,validate:e.validate},on:{change:e.autoSubmitTenantForm}},[i(\"FormRow\",{attrs:{label:e.$str(\"formtenant_label_tenant\",\"totara_tui\"),\"is-stacked\":!0},scopedSlots:e._u([{key:\"default\",fn:function(t){var a=t.label;return[i(\"FormToggleSwitch\",{attrs:{name:[\"formtenant_field_tenant\",\"value\"],\"toggle-first\":!0,\"aria-label\":a}}),e._v(\" \"),i(\"FormRowDetails\",[e._v(\"\\n              \"+e._s(e.$str(\"formtenant_details_tenant\",\"totara_tui\"))+\"\\n            \")])]}}],null,!1,1707464100)})],1):e._e(),e._v(\" \"),i(\"Tabs\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.selectedTenantId||e.selectedTenantId&&e.tenantOverridesEnabled,expression:\"\\n            !selectedTenantId || (selectedTenantId && tenantOverridesEnabled)\\n          \"}],attrs:{\"data-selected\":\"0\",\"content-spacing\":\"large\"}},e._l(e.themeSettings.tabs,(function(t){return e.themeSettings.settings.filter((function(e){return e.tab===t.identifier})).length>0?i(\"Tab\",{key:t.identifier,attrs:{id:t.identifier,name:t.name,\"always-render\":!0}},[t.description.length>0?i(\"article\",{staticClass:\"settings-tab-description\",domProps:{innerHTML:e._s(t.description)}}):e._e(),e._v(\" \"),i(\"SettingsFormGeneric\",{attrs:{\"is-saving\":e.isSaving,\"context-id\":e.embeddedFormData.contextId,settings:e.getSettingsInTab(t.identifier),\"all-theme-variables\":e.allThemeVariables,\"active-tab\":t,headings:t.headings,\"saved-form-field-data\":e.embeddedFormData.formFieldData[t.identifier],\"merged-default-css-variable-data\":e.embeddedFormData.mergedDefaultCSSVariableData,\"merged-processed-css-variable-data\":e.embeddedFormData.mergedProcessedCSSVariableData,\"file-form-field-data\":e.embeddedFormData.fileData},on:{submit:e.submit,mounted:e.setInitialTenantCategoryValues,updateAllThemeVariables:e.updateAllThemeVariables}})],1):e._e()})),1)],1):e._e()])],1)],1)}),[],!1,null,null,null);\"function\"==typeof T&&T(C),C.options.__hasBlocks={script:!0,template:!0};t.default=C.exports},Slh4:function(e,t){e.exports=tui.require(\"tui/components/progress/Progress\")},Smff:function(e,t,i){\"use strict\";i.r(t);i(\"go/L\");var a=i(\"KHd+\"),n=Object(a.a)({},void 0,void 0,!1,null,null,null);n.options.__hasBlocks={script:!1,template:!1},tui._processOverride(n.exports,\"tui/components/form/Textarea\"),t.default=n.exports},UMYj:function(e,t){e.exports=tui.require(\"tui/components/editor/Editor\")},V68o:function(e,t){e.exports=tui.require(\"tui/i18n\")},W4o7:function(e,t,i){},WBvU:function(e,t){e.exports=tui.require(\"tui/components/uniform\")},Y7GP:function(e,t){e.exports=tui.require(\"tui/lib/theme_settings\")},YuSn:function(e,t,i){\"use strict\";i.r(t);var a=i(\"Y7GP\"),n=i.n(a),r=i(\"vGF0\"),s=i.n(r),o=i(\"GEK5\"),l=i.n(o),d=i(\"csKv\"),u=i.n(d),m=i(\"WBvU\"),c=i(\"dB5e\"),f=i(\"UMYj\"),p=i.n(f),h=i(\"138x\"),v=i.n(h),g=i(\"4BlC\"),_=i(\"GQru\"),b={components:{theme_settings:n.a,FormColor:m.FormColor,FormField:m.FormField,FormText:m.FormText,FormSelect:m.FormSelect,FormToggleSwitch:m.FormToggleSwitch,FormTextarea:m.FormTextarea,FormRow:m.FormRow,FormRowDetails:s.a,FormRowDefaults:l.a,FormRowStack:u.a,FormUrl:m.FormUrl,Format:c.Format,Editor:p.a,ImageUploadSetting:v.a},props:{settings:Array,allThemeVariables:Object,contextId:Number,fileData:Object},data(){return _.customValidation.initSettings(this.allThemeVariables),{theme_settings:n.a,custom_validation:_.customValidation}},methods:{validations(e){let t=[];return void 0===e.options.validation||e.options.validation.forEach(e=>{if(\"object\"==typeof e){let i=e.id;_.customValidation.hasOwnProperty(i)&&t.push(_.customValidation[i](e.value))}else\"string\"==typeof e&&(_.customValidation.hasOwnProperty(e)&&t.push(_.customValidation[e]()),\"required\"===e&&t.push(g.v.required()))}),()=>t},getUrlValidationFn(e){return t=>({validate:t=>new RegExp(e.options.pattern).test(t),message:()=>this.$str(\"invalid_url\",\"theme_kineo\")})},getHtmlFormat:()=>c.Format.HTML,getSettingDefaultLabel:e=>e.options.default_label||e.default,getIdentifierLabel:e=>\"@\"+e.identifier},provide(){return{custom_validation:this.custom_validation}}},k=i(\"KHd+\"),y=function(e){e.options.__langStrings={theme_kineo:[\"invalid_url\",\"invalid_font_size\",\"invalid_size\",\"invalid_colour\",\"invalid_min_value\",\"invalid_pixel_size\",\"invalid_max_value\"]}},S=Object(k.a)(b,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"FormRowStack\",{attrs:{spacing:\"large\"}},e._l(e.settings,(function(t){return i(\"FormRow\",{key:t.identifier,attrs:{label:t.name,\"is-stacked\":!0}},[\"colour\"===t.type?i(\"FormColor\",{attrs:{id:t.identifier,name:[t.identifier,\"value\"],validations:e.validations(t),\"aria-describedby\":t.identifier}}):\"dropdown\"===t.type?i(\"FormSelect\",{attrs:{id:t.identifier,name:[t.identifier,\"value\"],options:t.options.dropdown_options,\"aria-describedby\":t.identifier}}):\"text\"===t.type?i(\"FormText\",{attrs:{id:t.identifier,name:[t.identifier,\"value\"],\"aria-describedby\":t.identifier,value:t.default,validations:e.validations(t)}}):\"textarea\"===t.type?i(\"FormTextarea\",{attrs:{id:t.identifier,name:[t.identifier,\"value\"],\"aria-describedby\":t.identifier,value:t.default}}):\"toggle\"===t.type?i(\"FormToggleSwitch\",{attrs:{id:t.identifier,text:t.identifier,name:[t.identifier,\"value\"],\"aria-describedby\":t.identifier}}):\"url\"===t.type?i(\"FormUrl\",{attrs:{id:t.identifier,text:t.identifier,name:[t.identifier,\"value\"],\"aria-describedby\":t.identifier,validations:e.getUrlValidationFn(t)}}):\"image\"===t.type?i(\"ImageUploadSetting\",{attrs:{metadata:e.fileData[t.identifier],\"context-id\":e.contextId,\"show-delete\":!0},on:{update:function(t){return e.$emit(\"updateImage\",t)},delete:function(t){return e.$emit(\"deleteImage\",t)}}}):\"editor\"===t.type?i(\"FormField\",{attrs:{name:[t.identifier,\"value\"],\"char-length\":\"full\"},scopedSlots:e._u([{key:\"default\",fn:function(a){var n=a.value,r=a.update;return[i(\"Editor\",{attrs:{id:t.identifier,value:n,\"default-format\":e.getHtmlFormat(),\"context-id\":e.contextId,\"usage-identifier\":{component:t.options.component,area:t.options.area},variant:\"standard\"},on:{input:r}})]}}],null,!0)}):e._e(),e._v(\" \"),t.options.show_default?i(\"FormRowDefaults\",[e._v(\"\\n      \"+e._s(e.getSettingDefaultLabel(t))+\"\\n    \")]):e._e(),e._v(\" \"),t.options.show_identifier?i(\"FormRowDetails\",[e._v(\"\\n      \"+e._s(e.getIdentifierLabel(t))+\"\\n    \")]):e._e(),e._v(\" \"),i(\"FormRowDetails\",[e._v(\"\\n      \"+e._s(t.description)+\"\\n    \")])],1)})),1)}),[],!1,null,null,null);\"function\"==typeof y&&y(S),S.options.__hasBlocks={script:!0,template:!0};t.default=S.exports},c7BU:function(e,t,i){},cgTy:function(e,t,i){\"use strict\";var a=i(\"59Wh\");i.n(a).a},csKv:function(e,t){e.exports=tui.require(\"tui/components/form/FormRowStack\")},dB5e:function(e,t){e.exports=tui.require(\"tui/editor\")},dbqV:function(e,t,i){\"use strict\";var a=i(\"wwhc\");i.n(a).a},e3MU:function(e,t){e.exports=tui.require(\"tui/components/buttons/InfoIconButton\")},eXim:function(e,t,i){var a={\"./ThemeRestore\":\"kr2t\",\"./ThemeRestore.vue\":\"kr2t\",\"./ThemeSettings\":\"RIWe\",\"./ThemeSettings.vue\":\"RIWe\",\"./ThemeTenants\":\"+IPl\",\"./ThemeTenants.vue\":\"+IPl\"};function n(e){var t=r(e);return i(t)}function r(e){if(!i.o(a,e)){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id=\"eXim\"},fCWf:function(e,t){e.exports=tui.require(\"tui/components/links/ActionLink\")},fZkr:function(e,t){e.exports=tui.require(\"tui/components/form/InputHidden\")},\"g8/U\":function(e,t){e.exports=tui.require(\"tui/components/layouts/PageHeading\")},\"go/L\":function(e,t,i){\"use strict\";var a=i(\"Hndx\");i.n(a).a},gsrG:function(e,t,i){\"use strict\";i.r(t);var a=i(\"NEm0\"),n=i.n(a),r=i(\"vF5l\"),s=i.n(r),o=i(\"5h9J\"),l=i.n(o),d=i(\"vH83\"),u=i.n(d),m={components:{Upload:n.a,Button:s.a,ButtonIcon:l.a,DeleteIcon:u.a},props:{href:{type:String,required:!0},itemId:{type:Number,required:!0},repositoryId:{type:Number,required:!0}},data:()=>({isUploading:!1}),methods:{fileUpdated(e){this.isUploading=!1,this.$emit(\"file-updated\",e)},fileStarted(e){this.isUploading=!0},getFileProgress(e){return e.progress>0?Math.floor(e.progress)+\"%\":e.done?this.$str(\"theme_restore:uploaded\",\"theme_kineo\"):this.$str(\"theme_restore:uploading\",\"theme_kineo\")+\"...\"}}},c=i(\"KHd+\"),f=function(e){e.options.__langStrings={core:[\"delete\"],theme_kineo:[\"theme_restore:select_file\",\"theme_restore:uploading\",\"theme_restore:uploaded\"]}},p=Object(c.a)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"Upload\",{attrs:{\"repository-id\":e.repositoryId,\"item-id\":e.itemId,href:e.href,\"one-file\":!0},on:{\"upload-finished\":e.fileUpdated,\"upload-started\":e.fileStarted},scopedSlots:e._u([{key:\"default\",fn:function(t){var a=t.selectEvents,n=t.inputEvents,r=t.dragEvents,s=(t.dragAttrs,t.deleteDraft),o=t.files,l=t.isDrag;return[i(\"div\",e._g({staticClass:\"tui-uploadWrapper\",class:{\"tui-uploadWrapper--highlight\":l}},r),[i(\"input\",e._g({directives:[{name:\"show\",rawName:\"v-show\",value:!1,expression:\"false\"}],ref:\"inputFile\",attrs:{type:\"file\"}},n)),e._v(\" \"),i(\"Button\",e._g({attrs:{disabled:e.isUploading,text:e.$str(\"theme_restore:select_file\",\"theme_kineo\"),\"aria-label\":e.$str(\"theme_restore:select_file\",\"theme_kineo\")}},a)),e._v(\" \"),i(\"ul\",e._l(o,(function(t){return i(\"li\",{key:t.name,class:{\"tui-uploadWrapper__file--done\":t.done}},[e._v(\"\\n          \"+e._s(t.name)+\" \"+e._s(e.getFileProgress(t))+\"\\n          \"),i(\"ButtonIcon\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.done,expression:\"file.done\"}],attrs:{styleclass:{transparent:!0},\"aria-label\":e.$str(\"delete\",\"core\")},on:{click:function(e){return s(t)}}},[i(\"DeleteIcon\")],1)],1)})),0)],1)]}}])},[e._t(\"default\")],2)}),[],!1,null,null,null);\"function\"==typeof f&&f(p),p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},hUzn:function(e,t,i){},hhzo:function(e,t,i){\"use strict\";i.r(t),i.d(t,\"customValidation\",(function(){return r}));var a=i(\"V68o\");function n(e,t,i){return Math.min(i,Math.max(t,e))}const r={allThemeVariables:{},font_size:()=>({validate:e=>function(e,t){let i=t(e),a=[\"xx-small\",\"x-small\",\"small\",\"medium\",\"large\",\"x-large\",\"xx-large\",\"xxx-large\",\"smaller\",\"larger\",\"inherit\",\"initial\",\"unset\"].includes(i),n=/^\\d+(\\.\\d+)?(ch|em|ex|rem|vh|vw|vmin|vmax|px|cm|mm|in|pc|pt|%)$/.test(i);return\"0\"===i||n||a}(e,r.resolveSetting),message:()=>Object(a.langString)(\"invalid_font_size\",\"theme_kineo\")}),size:()=>({validate:e=>function(e,t){let i=t(e),a=/^-?\\d+(\\.\\d+)?(ch|em|ex|rem|vh|vw|vmin|vmax|px|cm|mm|in|pc|pt|%)$/.test(i);return\"0\"===i||a}(e,r.resolveSetting),message:()=>Object(a.langString)(\"invalid_size\",\"theme_kineo\")}),colour:()=>({validate:e=>{let t=r.resolveSetting,i=r.resolveSetting(e,0),a=r.isValidHexColour(i,t),n=r.isValidRgbColour(i,t),s=r.isValidRgbaColour(i,t),o=r.isValidKeywordColour(i,t);return a||n||s||o},message:()=>Object(a.langString)(\"invalid_colour\",\"theme_kineo\")}),pixel:()=>({validate:e=>function(e,t){let i=t(e),a=/^-?\\d+(\\.\\d+)?px$/.test(i);return\"0\"===i||a}(e,r.resolveSetting),message:()=>Object(a.langString)(\"invalid_pixel_size\",\"theme_kineo\")}),min_number:e=>({validate:t=>function(e,t,i){let a=i(e);return!1===Number.isNaN(a)&&Number.parseFloat(a)>=t}(t,e,r.resolveSetting),message:()=>Object(a.langString)(\"invalid_min_value\",\"theme_kineo\",e)}),max_number:e=>({validate:t=>function(e,t,i){let a=i(e);return!1===Number.isNaN(a)&&Number.parseFloat(a)<=t}(t,e,r.resolveSetting),message:()=>Object(a.langString)(\"invalid_max_value\",\"theme_kineo\",e)}),initSettings:e=>{r.allThemeVariables=e},resolveSetting:(e,t)=>{if(0!==e.indexOf(\"@\"))return e;if(isNaN(t)&&(t=0),t>100)return null;let i=e.replace(\"@\",\"\"),a=r.allThemeVariables[i];return void 0===a?null:r.resolveSetting(a.value,t+1)},getRgbRegEx:()=>/^rgb\\s?\\(\\s?(?<r>\\d{1,3})\\s?,\\s?(?<g>\\d{1,3})\\s?,\\s?(?<b>\\d{1,3})\\s?\\)$/,getRgbaRegEx:()=>/^rgba\\s?\\(\\s?(?<r>\\d{1,3})\\s?,\\s?(?<g>\\d{1,3})\\s?,\\s?(?<b>\\d{1,3})\\s?,\\s?(?<a>0\\.?([0-9]|[0-9]+)?|1|[0-9]{1,3}%)\\)$/,isValidHexColour:(e,t)=>{if(null===e)return!1;void 0===t&&(t=r.resolveSetting);let i=t(e);return/^#[0-9A-F]{6}$/i.test(i)},isValidRgbColour(e,t){if(null===e)return!1;void 0===t&&(t=r.resolveSetting);let i=t(e).match(r.getRgbRegEx());if(null===i)return!1;let a=parseInt(i.groups.r),s=parseInt(i.groups.g),o=parseInt(i.groups.b);return i&&a===n(a,0,255)&&s===n(s,0,255)&&o===n(o,0,255)},isValidRgbaColour:(e,t)=>{if(null===e)return!1;void 0===t&&(t=r.resolveSetting);let i=t(e).match(r.getRgbaRegEx());if(null===i)return!1;let a=parseInt(i.groups.r),s=parseInt(i.groups.g),o=parseInt(i.groups.b),l=parseInt(i.groups.a);return i&&a===n(a,0,255)&&s===n(s,0,255)&&o===n(o,0,255)&&l===n(l,0,1)},isValidKeywordColour(e,t){if(null===e)return!1;void 0===t&&(t=r.resolveSetting);let i=t(e);return 1===Object.keys(r.getKeywordColours()).filter(e=>e===i).length},getKeywordColours:()=>({transparent:\"#ffffff\",black:\"#000000\",silver:\"#c0c0c0\",gray:\"#808080\",white:\"#ffffff\",maroon:\"#800000\",red:\"#ff0000\",purple:\"#800080\",fuchsia:\"#ff00ff\",green:\"#008000\",lime:\"#00ff00\",olive:\"#808000\",yellow:\"#ffff00\",navy:\"#000080\",blue:\"#0000ff\",teal:\"#008080\",aqua:\"#00ffff\",orange:\"#ffa500\",aliceblue:\"#f0f8ff\",antiquewhite:\"#faebd7\",aquamarine:\"#7fffd4\",azure:\"#f0ffff\",beige:\"#f5f5dc\",bisque:\"#ffe4c4\",blanchedalmond:\"#ffebcd\",blueviolet:\"#8a2be2\",brown:\"#a52a2a\",burlywood:\"#deb887\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",cornflowerblue:\"#6495ed\",cornsilk:\"#fff8dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",darkkhaki:\"#bdb76b\",darkmagenta:\"#8b008b\",darkolivegreen:\"#556b2f\",darkorange:\"#ff8c00\",darkorchid:\"#9932cc\",darkred:\"#8b0000\",darksalmon:\"#e9967a\",darkseagreen:\"#8fbc8f\",darkslateblue:\"#483d8b\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",darkturquoise:\"#00ced1\",darkviolet:\"#9400d3\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",dimgray:\"#696969\",dimgrey:\"#696969\",dodgerblue:\"#1e90ff\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",forestgreen:\"#228b22\",gainsboro:\"#dcdcdc\",ghostwhite:\"#f8f8ff\",gold:\"#ffd700\",goldenrod:\"#daa520\",greenyellow:\"#adff2f\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",ivory:\"#fffff0\",khaki:\"#f0e68c\",lavender:\"#e6e6fa\",lavenderblush:\"#fff0f5\",lawngreen:\"#7cfc00\",lemonchiffon:\"#fffacd\",lightblue:\"#add8e6\",lightcoral:\"#f08080\",lightcyan:\"#e0ffff\",lightgoldenrodyellow:\"#fafad2\",lightgray:\"#d3d3d3\",lightgreen:\"#90ee90\",lightgrey:\"#d3d3d3\",lightpink:\"#ffb6c1\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",lightskyblue:\"#87cefa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",lightsteelblue:\"#b0c4de\",lightyellow:\"#ffffe0\",limegreen:\"#32cd32\",linen:\"#faf0e6\",magenta:\"#ff00ff\",mediumaquamarine:\"#66cdaa\",mediumblue:\"#0000cd\",mediumorchid:\"#ba55d3\",mediumpurple:\"#9370db\",mediumseagreen:\"#3cb371\",mediumslateblue:\"#7b68ee\",mediumspringgreen:\"#00fa9a\",mediumturquoise:\"#48d1cc\",mediumvioletred:\"#c71585\",midnightblue:\"#191970\",mintcream:\"#f5fffa\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",navajowhite:\"#ffdead\",oldlace:\"#fdf5e6\",olivedrab:\"#6b8e23\",orangered:\"#ff4500\",orchid:\"#da70d6\",palegoldenrod:\"#eee8aa\",palegreen:\"#98fb98\",paleturquoise:\"#afeeee\",palevioletred:\"#db7093\",papayawhip:\"#ffefd5\",peachpuff:\"#ffdab9\",peru:\"#cd853f\",pink:\"#ffc0cb\",plum:\"#dda0dd\",powderblue:\"#b0e0e6\",rosybrown:\"#bc8f8f\",royalblue:\"#4169e1\",saddlebrown:\"#8b4513\",salmon:\"#fa8072\",sandybrown:\"#f4a460\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",sienna:\"#a0522d\",skyblue:\"#87ceeb\",slateblue:\"#6a5acd\",slategray:\"#708090\",slategrey:\"#708090\",snow:\"#fffafa\",springgreen:\"#00ff7f\",steelblue:\"#4682b4\",tan:\"#d2b48c\",thistle:\"#d8bfd8\",tomato:\"#ff6347\",turquoise:\"#40e0d0\",violet:\"#ee82ee\",wheat:\"#f5deb3\",whitesmoke:\"#f5f5f5\",yellowgreen:\"#9acd32\",rebeccapurple:\"#663399\"})}},iIua:function(e,t,i){!function(){\"use strict\";\"undefined\"!=typeof tui&&tui._bundle.isLoaded(\"theme_kineo\")?console.warn('[tui bundle] The bundle \"theme_kineo\" is already loaded, skipping initialisation.'):(tui._bundle.register(\"theme_kineo\"),tui._bundle.addModulesFromContext(\"theme_kineo\",i(\"8Zry\")),tui._bundle.addModulesFromContext(\"theme_kineo/components\",i(\"2tE6\")),tui._bundle.addModulesFromContext(\"theme_kineo/pages\",i(\"eXim\")))}()},ifgw:function(e,t,i){\"use strict\";i.r(t);var a=i(\"NEm0\"),n=i.n(a),r=i(\"PNFE\"),s=i.n(r),o=i(\"IBd2\"),l=i.n(o),d=i(\"5h9J\"),u=i.n(d),m=i(\"vH83\"),c=i.n(m),f=i(\"Slh4\"),p=i.n(f),h=i(\"nBTD\"),v=i.n(h),g={components:{Upload:n.a,AddIcon:s.a,ResponsiveImage:l.a,ButtonIcon:u.a,DeleteIcon:c.a,Progress:p.a,FieldError:v.a},props:{href:{type:String,required:!0},itemId:{type:Number,required:!0},repositoryId:{type:Number,required:!0},currentUrl:String,defaultUrl:String,acceptedTypes:{type:Array,default:()=>[\"image/*\"]},ariaDescribedby:String,ariaLabelExtension:String,contextId:[Number,String],showDelete:Boolean},data(){return{selectedImageUrl:null,errorMessage:\"\",errorId:this.$id(\"field-error\")}},computed:{displayUrl(){return this.selectedImageUrl||this.currentUrl||this.defaultUrl},isError(){return\"\"!==this.errorMessage},ariaDescribedbyId(){let e=[];return this.isError&&e.push(this.errorId),this.ariaDescribedby&&e.push(this.ariaDescribedby),e.join(\" \")},isDefaultImage(){return null===this.currentUrl&&null!==this.defaultUrl},isEmpty(){return null===this.currentUrl}},methods:{handleFileLoaded({file:{url:e}}){this.selectedImageUrl=e,this.$emit(\"update\",{url:e}),this.errorMessage=\"\"},handleError(e){this.clearUpload();let t=this.$str(\"error:upload_failed\",\"totara_core\");\"string\"==typeof e.error&&(t=e.error),this.errorMessage=t},clearUpload(e,t){e&&t&&e(t),this.$refs.inputFile.value=\"\",t?(this.selectedImageUrl=this.currentUrl,this.$emit(\"delete\",{draft:!0})):(this.selectedImageUrl=this.defaultUrl,this.$emit(\"delete\",{draft:!1}))}}},_=(i(\"dbqV\"),i(\"KHd+\")),b=function(e){e.options.__langStrings={totara_core:[\"add\",\"addextended\",\"delete\",\"deleteextended\",\"error:upload_failed\"]}},k=Object(_.a)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"Upload\",{attrs:{\"repository-id\":e.repositoryId,\"item-id\":e.itemId,href:e.href,\"one-file\":!0,\"accepted-types\":e.acceptedTypes,\"context-id\":e.contextId},on:{load:e.handleFileLoaded,error:e.handleError},scopedSlots:e._u([{key:\"default\",fn:function(t){var a=t.inputEvents,n=t.dragEvents,r=t.deleteDraft,s=t.files,o=t.pickFile,l=t.isDrag;return[i(\"div\",e._g({staticClass:\"tui-formImageUpload\",class:{\"tui-formImageUpload--highlight\":l,\"tui-formImageUpload--isError\":e.isError}},n),[i(\"div\",{staticClass:\"tui-formImageUpload__actions\"},[i(\"ButtonIcon\",{attrs:{text:e.$str(\"add\",\"totara_core\"),\"aria-label\":e.ariaLabelExtension?e.$str(\"addextended\",\"totara_core\",e.ariaLabelExtension):e.$str(\"add\",\"totara_core\"),\"aria-describedby\":e.ariaDescribedbyId},on:{click:o}},[i(\"AddIcon\",{attrs:{size:\"200\"}})],1),e._v(\" \"),s&&s[0]&&!e.isError||e.showDelete&&!e.isDefaultImage&&!e.isEmpty?i(\"ButtonIcon\",{staticClass:\"tui-formImageUpload__deleteButton\",attrs:{styleclass:{stealth:!0},\"aria-label\":e.ariaLabelExtension?e.$str(\"deleteextended\",\"totara_core\",e.ariaLabelExtension):e.$str(\"delete\",\"totara_core\")},on:{click:function(t){return e.clearUpload(r,s&&s[0])}}},[i(\"DeleteIcon\")],1):e._e()],1),e._v(\" \"),i(\"div\",{staticClass:\"tui-formImageUpload__filearea\"},[i(\"input\",e._g({directives:[{name:\"show\",rawName:\"v-show\",value:!1,expression:\"false\"}],ref:\"inputFile\",attrs:{type:\"file\"}},a)),e._v(\" \"),e.displayUrl?i(\"div\",{staticClass:\"tui-formImageUpload__display\"},[i(\"ResponsiveImage\",{attrs:{src:e.displayUrl}})],1):e._e()]),e._v(\" \"),s&&s[0]&&!s[0].done?i(\"div\",{staticClass:\"tui-formImageUpload__progress\"},[[i(\"Progress\",{attrs:{value:Math.round(s[0].progress),small:!0}})]],2):e._e(),e._v(\" \"),e.isError?i(\"FieldError\",{attrs:{id:e.errorId,error:e.errorMessage}}):e._e()],1)]}}])})}),[],!1,null,null,null);\"function\"==typeof b&&b(k),k.options.__hasBlocks={script:!0,template:!0},tui._processOverride(k.exports,\"tui/components/form/ImageUpload\");t.default=k.exports},iycM:function(e,t){e.exports=tui.require(\"tui/components/form/InputSet\")},kr2t:function(e,t,i){\"use strict\";i.r(t);var a=i(\"WBvU\"),n=i(\"nEm4\"),r=i.n(n),s=i(\"4k6g\"),o=i.n(s),l=i(\"vF5l\"),d=i.n(l),u=i(\"BN8m\"),m=i.n(u),c=i(\"fZkr\"),f=i.n(c),p=i(\"zdti\"),h=i.n(p),v={components:{InputHidden:f.a,Button:d.a,ButtonGroup:m.a,FormRow:a.FormRow,Form:r.a,UploadWrapper:o.a,NotificationBanner:h.a},props:{contextId:Number,tenantId:Number,fileUrl:String,itemId:Number,repositoryId:Number,maxFileSize:String},data:()=>({draftId:null,uploaded:!1}),methods:{fileUploaded(e){this.draftId=this.itemId,this.uploaded=!0},getSaveButtonLabel(){return this.$str(\"save\",\"totara_core\")},getFormUrl:()=>window.location}},g=i(\"KHd+\"),_=function(e){e.options.__langStrings={totara_core:[\"save\"],theme_kineo:[\"theme_restore:info\"]}},b=Object(g.a)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"Form\",{attrs:{\"native-submit\":!0,method:\"POST\",action:e.getFormUrl()}},[i(\"InputHidden\",{attrs:{name:\"draft_id\",value:e.draftId}}),e._v(\" \"),i(\"NotificationBanner\",{attrs:{type:\"info\",message:this.$str(\"theme_restore:info\",\"theme_kineo\",this.maxFileSize)}}),e._v(\" \"),i(\"FormRow\",[i(\"UploadWrapper\",{attrs:{href:e.fileUrl,\"item-id\":e.itemId,\"repository-id\":e.repositoryId},on:{\"file-updated\":e.fileUploaded}})],1),e._v(\" \"),i(\"FormRow\",[i(\"ButtonGroup\",[i(\"Button\",{attrs:{disabled:!e.uploaded,styleclass:{primary:\"true\"},text:\"Save\",\"aria-label\":\"Save\",type:\"submit\"}})],1)],1)],1)}),[],!1,null,null,null);\"function\"==typeof _&&_(b),b.options.__hasBlocks={script:!0,template:!0};t.default=b.exports},mX8v:function(e,t,i){},nBTD:function(e,t){e.exports=tui.require(\"tui/components/form/FieldError\")},nEm4:function(e,t){e.exports=tui.require(\"tui/components/form/Form\")},obVy:function(e,t){e.exports=tui.require(\"tui/components/form/Input\")},qG1h:function(e,t,i){},qM48:function(e,t,i){\"use strict\";i.r(t);i(\"yudg\");var a=i(\"KHd+\"),n=Object(a.a)({},void 0,void 0,!1,null,null,null);n.options.__hasBlocks={script:!1,template:!1},tui._processOverride(n.exports,\"container_workspace/components/card/OriginalSpaceCard\"),t.default=n.exports},rH3o:function(e,t,i){\"use strict\";i.r(t);var a=i(\"6Li/\"),n={props:{ariaDescribedby:[String,Boolean],ariaInvalid:[String,Boolean],ariaLabel:[String,Boolean],ariaLabelledby:[String,Boolean],autocomplete:String,autofocus:Boolean,dir:{type:String,validator:e=>[\"auto\",\"ltr\",\"rtl\",null].includes(e)},disabled:Boolean,id:String,charLength:a.charLengthProp,list:String,max:Number,maxlength:Number,min:Number,minlength:Number,multiple:String,name:String,pattern:String,placeholder:String,readonly:Boolean,required:Boolean,size:Number,spellcheck:Boolean,step:Number,styleclass:{default:()=>({preIcon:!1,postIcon:!1,transparent:!1}),type:Object},type:{required:!0,type:String,validator:function(e){return-1!==[\"email\",\"hidden\",\"number\",\"password\",\"search\",\"tel\",\"text\",\"time\",\"url\",\"week\",\"color\"].indexOf(e)}},value:[Number,String]},mounted(){this.autofocus&&this.$el&&this.$el.focus()}},r=(i(\"R/6L\"),i(\"KHd+\")),s=Object(r.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)(\"input\",{staticClass:\"tui-formInput\",class:[e.styleclass.preIcon?\"tui-formInput--preIcon\":null,e.styleclass.postIcon?\"tui-formInput--postIcon\":null,e.styleclass.transparent?\"tui-formInput--transparent\":null,e.charLength?\"tui-formInput--charLength-\"+e.charLength:null,e.charLength?\"tui-input--customSize\":null],attrs:{id:e.id,\"aria-describedby\":e.ariaDescribedby,\"aria-invalid\":e.ariaInvalid,\"aria-label\":e.ariaLabel,\"aria-labelledby\":e.ariaLabelledby,autocomplete:e.autocomplete,dir:e.dir,disabled:e.disabled,list:e.list,max:e.max,maxlength:e.maxlength,min:e.min,minlength:e.minlength,multiple:e.multiple,name:e.name,pattern:e.pattern,placeholder:e.placeholder,readonly:e.readonly,required:e.required,size:e.size,spellcheck:e.spellcheck,step:e.step,type:e.type},domProps:{value:e.value},on:{input:function(t){return e.$emit(\"input\",t.target.value)},blur:function(t){return e.$emit(\"blur\",t)},keydown:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.$emit(\"submit\",t.target.value)}}})}),[],!1,null,null,null);s.options.__hasBlocks={script:!0,template:!0},tui._processOverride(s.exports,\"tui/components/form/Input\");t.default=s.exports},rNse:function(e,t){e.exports=tui.require(\"tui/components/icons/Edit\")},txsu:function(e,t){e.exports=tui.require(\"tui/components/tabs/Tabs\")},uzCs:function(e,t,i){\"use strict\";var a=i(\"hUzn\");i.n(a).a},vF5l:function(e,t){e.exports=tui.require(\"tui/components/buttons/Button\")},vGF0:function(e,t){e.exports=tui.require(\"tui/components/form/FormRowDetails\")},vH83:function(e,t){e.exports=tui.require(\"tui/components/icons/Delete\")},vyVp:function(e,t){e.exports=tui.require(\"tui/notifications\")},wGlA:function(e,t,i){\"use strict\";i.r(t);var a=i(\"Y7GP\"),n=i.n(a),r=i(\"IqB1\"),s=i.n(r),o=i(\"WBvU\"),l=i(\"csKv\"),d=i.n(l),u=i(\"vF5l\"),m=i.n(u),c=i(\"BN8m\"),f=i.n(c),p=i(\"QtBu\"),h=i.n(p),v=i(\"yMnV\"),g=i.n(v),_=i(\"dB5e\"),b=i(\"vyVp\"),k=i(\"e3MU\"),y=i.n(k),S=i(\"iycM\"),F=i.n(S),x={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"core_theme_settings_send_email_notification\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"html_header\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"String\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"html_footer\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"String\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"text_footer\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"String\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"tenant_id\"}},type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"core_id\"}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"core_theme_settings_send_email_notification\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"html_header\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"html_header\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"html_footer\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"html_footer\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"text_footer\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"text_footer\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"tenant_id\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"tenant_id\"}}}],directives:[]}]}}]},N={components:{SettingsFormRow:h.a,Collapsible:s.a,Uniform:o.Uniform,EditorContent:_.EditorContent,Format:_.Format,FormRow:o.FormRow,FormRowStack:d.a,Button:m.a,ButtonGroup:f.a,InputSet:F.a,InfoIconButton:y.a},mixins:[g.a],props:{savedFormFieldData:{type:Array,default:function(){return[]}},mergedDefaultCssVariableData:{type:Object,default:function(){return{}}},mergedProcessedCssVariableData:{type:Array,default:function(){return[]}},isSaving:{type:Boolean,default:function(){return!1}},settings:{type:Array,default:function(){return[]}},fileFormFieldData:{type:Array,default:function(){return[]}},contextId:Number,headings:Object,activeTab:Object,allThemeVariables:Object},data(){let e={},t={},i={};return this.settings.forEach(a=>{switch(a.type){case\"editor\":e[a.identifier]={value:new _.EditorContent({format:a.options.type,content:a.default}),type:\"value\"},i[a.identifier]={format:a.options.type};break;case\"image\":t[a.identifier]=null;break;default:e[a.identifier]={value:a.default,type:\"value\"}}}),{initialValues:e,editorFields:i,initialValuesSet:!1,colourOverridesEnabled:!1,errorsForm:null,valuesForm:null,resultForm:null,theme_settings:n.a,embeddedFormData:{flavours:null,mergedDefaultCSSVariableData:[],fileData:[]},fileData:t,isSending:!1}},mounted(){let e=this.theme_settings.mergeFormData(this.initialValues,[this.savedFormFieldData,this.valuesForm||[]]);this.initialValues=this.theme_settings.getResolvedInitialValues(e),this.initialValues=this.theme_settings.resolveEditorContentFields(this.initialValues,this.editorFields),Object.keys(this.initialValues).forEach(e=>{this.allThemeVariables[e].value=this.initialValues[e].value});for(let e=0;e<this.fileFormFieldData.length;e++){let t=this.fileFormFieldData[e];this.fileData[t.ui_key]=t}this.colourOverridesEnabled=!1,this.initialValuesSet=!0,this.$emit(\"mounted\",{category:this.activeTab.identifier,values:this.formatDataForMutation(this.initialValues)})},methods:{getHeadings(){let e={};for(const t in this.headings)this.getSettingsInHeading(t).length>0&&(e[t]=this.headings[t]);return e},getSettingsInHeading(e){return this.settings.filter(t=>t.heading===e)},validate:()=>({}),handleChange(e){this.valuesForm=e,this.$emit(\"updateAllThemeVariables\",e),this.errorsForm&&(this.errorsForm=null),void 0!==e.formcolours_field_useoverrides&&(this.colourOverridesEnabled=e.formcolours_field_useoverrides.value)},submit(e){this.errorsForm&&(this.errorsForm=null),this.resultForm=e;let t=this.formatDataForMutation(e);this.$emit(\"submit\",t)},formatDataForMutation(e){let t={form:this.activeTab.identifier,fields:[],files:[]};return Object.keys(e).forEach(i=>{let a;Object.keys(this.editorFields).find(e=>e===i)?(a=e[i].value.getContent(),\"string\"!=typeof a&&(a=null),a=a||\"\"):a=String(e[i].value),t.fields.push({name:i,type:e[i].type,value:a})}),Object.keys(this.fileData).forEach(e=>{this.fileData[e]&&t.files.push(this.fileData[e])}),t},resolveDerivedFields(e,t,i){let a=[];return t.map(n=>{let r=n.name;i.map(i=>{let n=this.mergedDefaultCssVariableData[r+\"-\"+i];if(n){let s=Object.assign(n,{});s.transform.type=\"value\",s.transform.source=e[r].value,a.push({name:r+\"-\"+i,type:\"value\",value:String(this.theme_settings.resolveCSSVariableValue(s,e))}),this.addSelectorState(t,r,i)}})}),a},addSelectorState(e,t,i){e.forEach(e=>{if(e.selectors){const a=t+\"-\"+i;!e.selectors.some(e=>e===a)&&e.selectors.some(e=>e===t)&&e.selectors.push(a)}})},getSaveButtonLabel(){return this.$str(\"save\",\"totara_core\")+\" \"+this.activeTab.name.replace(\"*\",\"\")},async sendEmailNotification(){this.isSending=!0;const e=this.valuesForm||this.initialValues;try{const{data:t}=await this.$apollo.mutate({mutation:x,variables:{html_header:e.formbrand_field_notificationshtmlheader.value.getContent(),html_footer:e.formbrand_field_notificationshtmlfooter.value.getContent(),text_footer:e.formbrand_field_notificationstextfooter.value,tenant_id:this.selectedTenantId}});t.core_theme_settings_send_email_notification?Object(b.notify)({message:this.$str(\"settings_email_send_success\",\"totara_tui\"),type:\"success\"}):Object(b.notify)({message:this.$str(\"settings_email_send_error\",\"totara_tui\"),type:\"error\"})}catch(e){Object(b.notify)({message:this.$str(\"settings_email_send_error\",\"totara_tui\"),type:\"error\"})}this.isSending=!1}}},I=i(\"KHd+\"),w=function(e){e.options.__langStrings={totara_tui:[\"settings_email_send_error\",\"settings_email_send_success\"],totara_core:[\"save\",\"saveextended\",\"settings\",\"test_email_notification\",\"test_email_notification_help\"]}},T=Object(I.a)(N,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.initialValuesSet?i(\"Uniform\",{attrs:{\"initial-values\":e.initialValues,errors:e.errorsForm,validate:e.validate,\"input-width\":\"custom\"===e.activeTab.identifier?\"full\":\"limited\"},on:{change:e.handleChange,submit:e.submit}},[e.getSettingsInHeading(null).length>0?i(\"SettingsFormRow\",{attrs:{settings:e.getSettingsInHeading(null),\"context-id\":e.contextId,\"all-theme-variables\":e.allThemeVariables,\"file-data\":e.fileData},on:{updateImage:e.saveImage,deleteImage:e.resetImage}}):e._e(),e._v(\" \"),i(\"FormRowStack\",{attrs:{spacing:\"large\"}},[e._l(e.getHeadings(),(function(t,a){return i(\"Collapsible\",{key:a,attrs:{label:t}},[e.getSettingsInHeading(a).length>0?i(\"SettingsFormRow\",{attrs:{settings:e.getSettingsInHeading(a),\"context-id\":e.contextId,\"all-theme-variables\":e.allThemeVariables,\"file-data\":e.fileData},on:{updateImage:e.saveImage,deleteImage:e.resetImage}}):e._e(),e._v(\" \"),\"email-notifications\"===a?i(\"FormRow\",[i(\"InputSet\",[i(\"Button\",{attrs:{styleclass:{primary:!1},text:e.$str(\"test_email_notification\",\"totara_core\"),disabled:e.isSending},on:{click:e.sendEmailNotification}}),e._v(\" \"),i(\"InfoIconButton\",{staticClass:\"tui-settingsFormBrand__testEmailInfoButton\",attrs:{\"is-help-for\":e.$str(\"test_email_notification\",\"totara_core\")}},[e._v(\"\\n            \"+e._s(e.$str(\"test_email_notification_help\",\"totara_core\"))+\"\\n          \")])],1)],1):e._e()],1)})),e._v(\" \"),i(\"FormRow\",[i(\"ButtonGroup\",[i(\"Button\",{attrs:{styleclass:{primary:\"true\"},text:e.getSaveButtonLabel(),\"aria-label\":e.getSaveButtonLabel(),disabled:e.isSaving,type:\"submit\"}})],1)],1)],2)],1):e._e()}),[],!1,null,null,null);\"function\"==typeof w&&w(T),T.options.__hasBlocks={script:!0,template:!0};t.default=T.exports},\"wY/E\":function(e,t,i){\"use strict\";i.r(t);i(\"cgTy\");var a=i(\"KHd+\"),n=Object(a.a)({},void 0,void 0,!1,null,null,null);n.options.__hasBlocks={script:!1,template:!1},tui._processOverride(n.exports,\"tui/components/buttons/Button\"),t.default=n.exports},wwhc:function(e,t,i){},yMnV:function(e,t){e.exports=tui.require(\"tui/mixins/settings_form_file_mixin\")},yhO6:function(e,t,i){\"use strict\";var a=i(\"4qPj\");i.n(a).a},yikf:function(e,t){e.exports=tui.require(\"tui/components/datatable/Table\")},yudg:function(e,t,i){\"use strict\";var a=i(\"W4o7\");i.n(a).a},zdti:function(e,t){e.exports=tui.require(\"tui/components/notifications/NotificationBanner\")},zn7s:function(e,t,i){\"use strict\";var a=i(\"qG1h\");i.n(a).a}});","extractedComments":[]}