!function(e){function i(i){for(var t,l,s=i[0],o=i[1],d=i[2],m=0,c=[];m<s.length;m++)l=s[m],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&c.push(n[l][0]),n[l]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t]);for(u&&u(i);c.length;)c.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var e,i=0;i<r.length;i++){for(var a=r[i],t=!0,s=1;s<a.length;s++){var o=a[s];0!==n[o]&&(t=!1)}t&&(r.splice(i--,1),e=l(l.s=a[0]))}return e}var t={},n={10:0},r=[];function l(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=t,l.d=function(e,i,a){l.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,i){if(1&i&&(e=l(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var t in e)l.d(a,t,function(i){return e[i]}.bind(null,t));return a},l.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(i,"a",i),i},l.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},l.p="";var s=window.webpackJsonp=window.webpackJsonp||[],o=s.push.bind(s);s.push=i,s=s.slice();for(var d=0;d<s.length;d++)i(s[d]);var u=o;r.push(["NTRL",0]),a()}({"+1Jo":function(e,i){e.exports=tui.require("totara_engage/components/icons/access/computed/AccessIcon")},"/NNS":function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-playlistPopover"},[a("Popover",{attrs:{triggers:["click"]},scopedSlots:e._u([{key:"trigger",fn:function(){return[a("Button",{attrs:{text:e.$str("addrating","totara_playlist"),styleclass:{small:!0,transparent:!0}}})]},proxy:!0},{key:"buttons",fn:function(i){var t=i.close;return[a("div",{staticClass:"tui-playlistPopover__buttons"},[a("Button",{staticClass:"tui-playlistPopover__yes",attrs:{text:e.$str("done","totara_engage"),styleclass:{primary:!0,small:!0}},on:{click:function(i){return e.$_handleClick(t)}}}),e._v(" "),a("Button",{attrs:{text:e.$str("cancel","moodle"),styleclass:{small:!0}},on:{click:t}})],1)]}}])},[e._v(" "),e._t("content")],2)],1)};t._withStripped=!0;var n=a("9G+f"),r=a.n(n),l=a("vF5l"),s=a.n(l),o={components:{Popover:r.a,Button:s.a},methods:{$_handleClick:function(e){e(),this.$emit("rating")}}},d=a("KHd+"),u=function(e){e.options.__langStrings={totara_playlist:["addrating"],totara_engage:["done"],moodle:["cancel"]}},m=Object(d.a)(o,t,[],!1,null,null,null);"function"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0},m.options.__file="client/src/totara_playlist/components/popover/PlaylistPopover.vue";i.default=m.exports},"/hNZ":function(e,i){e.exports=tui.require("totara_playlist/components/page/HeaderBox")},"0caj":function(e,i){e.exports=tui.require("totara_playlist/components/contribution/Adder")},"1i2V":function(e,i){e.exports=tui.require("tui/components/tabs/Tab")},"2wx7":function(e,i){e.exports=tui.require("editor_weka/components/Weka")},"3Eqo":function(e,i){e.exports=tui.require("totara_playlist/index")},"4ky8":function(e,i){e.exports=tui.require("totara_engage/components/card/compute/EngageCard")},"4yhk":function(e,i){e.exports=tui.require("totara_playlist/components/form/PlaylistForm")},"58cf":function(e,i,a){"use strict";a.r(i);var t=function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"tui-playlistSidePanelContent"},[i("PlaylistSidePanel",{attrs:{"playlist-id":this.playlistId}})],1)};t._withStripped=!0;var n=a("yHtf"),r=a.n(n),l=a("zEvk"),s=a.n(l),o={components:{PlaylistSidePanel:r.a},mixins:[s.a],computed:{playlistId:function(){return this.pageProps.playlistId}}},d=a("KHd+"),u=Object(d.a)(o,t,[],!1,null,null,null);u.options.__hasBlocks={script:!0,template:!0},u.options.__file="client/src/totara_playlist/components/sidepanel/content/Playlist.vue";i.default=u.exports},"5h9J":function(e,i){e.exports=tui.require("tui/components/buttons/ButtonIcon")},"5v9U":function(e,i){e.exports=tui.require("totara_comment/components/box/SidePanelCommentBox")},"6Omq":function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-playlistStarRating"},[a("div",{staticClass:"tui-playlistStarRating__icon"},[a("StarRating",{attrs:{"read-only":!0,"max-rating":5,increment:.1,title:e.starTitle,rating:e.showRating}})],1),e._v(" "),a("div",[a("span",{staticClass:"tui-playlistStarRating__rates"},[e._v("\n      "+e._s(e.showRatingCount)+"\n    ")]),e._v("\n\n    "+e._s(e.showRates)+"\n\n    "),e.showPopover?a("Popover",{on:{rating:function(i){e.$emit("rating",Math.ceil(e.innerValue))}},scopedSlots:e._u([{key:"content",fn:function(){return[a("StarRating",{attrs:{"read-only":!1,increment:1,"max-rating":5},model:{value:e.innerValue,callback:function(i){e.innerValue=i},expression:"innerValue"}})]},proxy:!0}],null,!1,506935594)}):e._e()],1)])};t._withStripped=!0;var n=a("HuWC"),r=a.n(n),l=a("JMfZ"),s=a.n(l),o={components:{StarRating:r.a,Popover:s.a},props:{owned:{type:Boolean,required:!0},count:{type:Number,required:!0},rating:{type:Number,required:!0},rated:{type:Boolean,required:!0}},data:function(){return{innerValue:null}},computed:{starTitle:function(){return this.count<=1?this.$str("numberofpersonrating","totara_engage",this.count):this.$str("numberofpeoplerating","totara_engage",this.count)},showRates:function(){return 1===this.count||0===this.count?this.$str("rating","totara_playlist"):this.$str("ratings","totara_playlist")},showRatingCount:function(){return this.count},showRating:function(){return this.rating},showPopover:function(){return!this.owned&&!this.rated}}},d=a("KHd+"),u=function(e){e.options.__langStrings={totara_playlist:["rating","ratings"],totara_engage:["numberofpeoplerating","numberofpersonrating"]}},m=Object(d.a)(o,t,[],!1,null,null,null);"function"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0},m.options.__file="client/src/totara_playlist/components/sidepanel/PlaylistStarRating.vue";i.default=m.exports},"6wqy":function(e,i){e.exports=tui.require("totara_engage/components/icons/Share")},"7Z/t":function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-totaraPlaylist-addNewPlaylistCard"},[a("Card",{staticClass:"tui-totaraPlaylist-addNewPlaylistCard__card"},[a("Contribute",{attrs:{adder:{text:e.$str("selectexistingresource","totara_playlist"),destination:e.$str("toaddplaylist","totara_playlist")},"show-text":!1,"show-icon":!0,styleclass:{circle:!0,primary:!0},size:500,container:e.container},on:{done:function(i){return e.$emit("contribute",i)},"open-adder":function(i){e.showAdder=!0}}})],1),e._v(" "),a("Adder",{attrs:{"grid-direction":"horizontal","playlist-id":e.playlistId,"show-adder":e.showAdder,units:12},on:{close:function(i){e.showAdder=!1}}})],1)};t._withStripped=!0;var n=a("jJ8l"),r=a.n(n),l=a("grGL"),s=a.n(l),o=a("tyu8"),d=a("0caj"),u={components:{Adder:a.n(d).a,Card:r.a,Contribute:s.a},props:{playlistId:{type:[Number,String],required:!0},access:{type:String,required:!0,validator:function(e){return o.AccessManager.isValid(e)}}},data:function(){return{showAdder:!1}},computed:{container:function(){return{instanceId:this.playlistId,component:"totara_playlist",access:this.access}}}},m=a("KHd+"),c=function(e){e.options.__langStrings={totara_playlist:["selectexistingresource","toaddplaylist"]}},p=Object(m.a)(u,t,[],!1,null,null,null);"function"==typeof c&&c(p),p.options.__hasBlocks={script:!0,template:!0},p.options.__file="client/src/totara_playlist/components/card/AddNewPlaylistCard.vue";i.default=p.exports},"993f":function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Form",{staticClass:"tui-playlistTitleForm",attrs:{vertical:!0,"input-width":"full"},on:{submit:function(i){return i.preventDefault(),e.submit(i)}}},[a("FormRow",{attrs:{label:e.$str("playlisttitle","totara_playlist"),hidden:!0},scopedSlots:e._u([{key:"default",fn:function(i){var t=i.id,n=i.label;return[a("InputText",{attrs:{id:t,placeholder:n,"aria-label":n,name:"playlist title"},model:{value:e.innerTitle,callback:function(i){e.innerTitle=i},expression:"innerTitle"}})]}}])}),e._v(" "),a("DoneCancelGroup",{attrs:{loading:e.submitting,disabled:0>=e.innerTitle.length},on:{done:function(i){return i.preventDefault(),e.submit(i)},cancel:function(i){return i.preventDefault(),e.$emit("cancel",i)}}})],1)};t._withStripped=!0;var n=a("nEm4"),r=a.n(n),l=a("i/kK"),s=a.n(l),o=a("oMuj"),d=a.n(o),u=a("QGXx"),m={components:{DoneCancelGroup:a.n(u).a,Form:r.a,FormRow:s.a,InputText:d.a},props:{submitting:Boolean,title:{type:String,default:""}},data:function(){return{innerTitle:this.title}},watch:{title:function(e){this.innerTitle=e}},methods:{submit:function(){this.$emit("submit",{title:this.innerTitle})}}},c=a("KHd+"),p=function(e){e.options.__langStrings={moodle:["edit"],totara_playlist:["playlisttitle"]}},k=Object(c.a)(m,t,[],!1,null,null,null);"function"==typeof p&&p(k),k.options.__hasBlocks={script:!0,template:!0},k.options.__file="client/src/totara_playlist/components/form/PlaylistTitleForm.vue";i.default=k.exports},"9G+f":function(e,i){e.exports=tui.require("tui/components/popover/Popover")},"9GUw":function(e,i,a){var t={".":"iz/O","./":"iz/O","./index":"iz/O","./index.js":"iz/O","./playlist_grid":"Df8L","./playlist_grid.js":"Df8L"};function n(e){var i=r(e);return a(i)}function r(e){if(!a.o(t,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return t[e]}n.keys=function(){return Object.keys(t)},n.resolve=r,e.exports=n,n.id="9GUw"},"9mdZ":function(e,i){e.exports=tui.require("totara_engage/components/icons/More")},"9rnn":function(e,i,a){"use strict";a.r(i);var t=function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"tui-resourcePlaylistBox"},[i("VirtualScroll",{attrs:{"data-list":this.box.playlists,"data-key":"id","aria-label":this.$str("playlists","totara_playlist"),"is-loading":this.$apollo.loading},on:{scrollbottom:this.loadMore},scopedSlots:this._u([{key:"item",fn:function(e){var a=e.item;return[i("SummaryPlaylistCard",{key:a.id,staticClass:"tui-resourcePlaylistBox__card",attrs:{"data-id":a.id,name:a.name,url:a.url,"playlist-id":a.id,author:a.user.fullname,"rated-count":a.rating.count,rating:a.rating.rating}})]}}])})],1)};t._withStripped=!0;var n=a("ry4p"),r=a.n(n),l=a("R5BP"),s=a.n(l),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_playlist_resource_playlists"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resource_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"playlists"},name:{kind:"Name",value:"totara_playlist_playlists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"resource_id"},value:{kind:"Variable",name:{kind:"Name",value:"resource_id"}}},{kind:"Argument",name:{kind:"Name",value:"sort"},value:{kind:"EnumValue",value:"RATING"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contextid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rated"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"updateable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalresources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bookmarked"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"totara_playlist_playlists_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"resource_id"},value:{kind:"Variable",name:{kind:"Name",value:"resource_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}}]}}]},d={components:{SummaryPlaylistCard:r.a,VirtualScroll:s.a},props:{resourceId:{type:[Number,String],required:!0}},apollo:{box:{query:o,watchLoading:function(e){this.$emit("load-records",e)},variables:function(){return{resource_id:this.resourceId}},update:function(e){return{playlists:e.playlists,cursor:e.cursor}},result:function(e){var i=e.data.cursor.total;i=parseInt(i,9),this.$emit("update-has-playlists",0<i)}}},data:function(){return{box:{playlists:[],cursor:null}}},methods:{loadMore:function(){this.box.cursor.next&&this.$apollo.queries.box.fetchMore({variables:{cursor:this.box.cursor.next,resource_id:this.resourceId},updateQuery:function(e,i){var a=e.playlists,t=i.fetchMoreResult,n=t.playlists,r=t.cursor;return{playlists:Array.prototype.concat(a,n),cursor:r}}})}}},u=a("KHd+"),m=function(e){e.options.__langStrings={totara_playlist:["playlists"]}},c=Object(u.a)(d,t,[],!1,null,null,null);"function"==typeof m&&m(c),c.options.__hasBlocks={script:!0,template:!0},c.options.__file="client/src/totara_playlist/components/box/ResourcePlaylistBox.vue";i.default=c.exports},AZAN:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Layout",{staticClass:"tui-playlistView",scopedSlots:e._u([{key:"column",fn:function(i){var t=i.direction,n=i.units,r=i.boundaryName;return[a("ContributionBaseContent",{attrs:{units:n,loading:!!e.$apollo.loading,"loading-more":e.loadingMore,"total-cards":e.contribution.cursor.total,"show-heading":!e.$apollo.loading&&"vertical"!==t,"grid-direction":t},scopedSlots:e._u([{key:"heading",fn:function(){return[a("HeaderBox",{attrs:{"playlist-id":e.playlistId,title:e.playlist.name,"update-able":e.playlist.owned},on:{"update-playlist":e.updatePlaylist}})]},proxy:!0},{key:"bookmark",fn:function(){return[e.playlist.owned?e._e():a("BookmarkButton",{attrs:{primary:!1,circle:!0,bookmarked:e.bookmarked,size:"300"},on:{click:e.updateBookmark}})]},proxy:!0},e.contribution.cards&&e.playlist.access?{key:"cards",fn:function(){return[a("PlaylistResourcesGrid",{attrs:{"max-units":n,"playlist-id":e.playlistId,size:r,cards:e.contribution.cards,contributable:e.playlist.contributable,access:e.playlist.access,"is-loading":e.$apollo.loading},on:{refetch:e.refetchCards,"resource-added":e.refetchCards,"scrolled-to-bottom":e.scrolledToBottom}}),e._v(" "),e.isLoadMoreVisible&&e.contribution.cards.length<e.contribution.cursor.total&&!e.$apollo.loading?a("div",{staticClass:"tui-playlistView__loadMoreContainer"},[a("div",{staticClass:"tui-playlistView__viewedResources"},[e._v("\n            "+e._s(e.$str("viewedresources","engage_article",e.contribution.cards.length))+"\n            "+e._s(e.$str("resourcecount","totara_engage",e.contribution.cursor.total))+"\n          ")]),e._v(" "),a("Button",{staticClass:"tui-playlistView__loadMore",attrs:{text:e.$str("loadmore","engage_article")},on:{click:e.loadMore}})],1):e._e()]},proxy:!0}:null],null,!0)})]}},{key:"sidepanel",fn:function(){return[a("PlaylistSidePanel",{attrs:{"playlist-id":e.playlistId},on:{"playlist-updated":e.refetchCards}})]},proxy:!0}])})};t._withStripped=!0;var n=a("o0o1"),r=a.n(n),l=a("yXPU"),s=a.n(l),o=a("Ms3t"),d=a.n(o),u=a("yHtf"),m=a.n(u),c=a("bxuo"),p=a.n(c),k=a("s5vj"),v=a.n(k),y=a("/hNZ"),g=a.n(y),_=a("WwIe"),f=a.n(_),N=a("UpZR"),b=a.n(N),h=a("VOFu"),S=a("gR9B"),F=a("vN5C"),x={components:{PlaylistResourcesGrid:d.a,PlaylistSidePanel:m.a,BookmarkButton:p.a,ContributionBaseContent:v.a,HeaderBox:g.a,Layout:f.a},props:{playlistId:{required:!0,type:Number}},apollo:{playlist:{query:h.a,variables:function(){return{id:this.playlistId}},result:function(e){var i=e.data.playlist;this.bookmarked=i.bookmarked}},contribution:{query:S.a,variables:function(){return{id:this.playlistId}}}},data:function(){return{playlist:{},bookmarked:!1,contribution:{cursor:{total:0,next:null},cards:[]},isLoadMoreVisible:!1,loadingMore:!1}},methods:{updateBookmark:function(){this.bookmarked=!this.bookmarked,this.$apollo.mutate({mutation:F.a,refetchAll:!1,variables:{itemid:this.playlistId,component:"totara_playlist",bookmarked:this.bookmarked}})},refetchCards:function(){this.$apollo.queries.contribution.refetch()},scrolledToBottom:function(){var e=this;return s()(r.a.mark((function i(){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!e.isLoadMoreVisible){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,e.loadMoreItems();case 4:e.isLoadMoreVisible=!0;case 5:case"end":return i.stop()}}),i)})))()},loadMore:function(){var e=this;return s()(r.a.mark((function i(){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.loadMoreItems();case 2:e.isLoadMoreVisible=!1;case 3:case"end":return i.stop()}}),i)})))()},loadMoreItems:function(){var e=this;return s()(r.a.mark((function i(){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.contribution.cursor.next){i.next=2;break}return i.abrupt("return");case 2:e.loadingMore=!0,e.$apollo.queries.contribution.fetchMore({variables:{id:e.pageProps.playlistId,cursor:e.contribution.cursor.next},updateQuery:function(i,a){var t=a.fetchMoreResult,n=i.contribution,r=t.contribution,l=n.cards.concat(r.cards);return e.loadingMore=!1,{contribution:{cursor:r.cursor,cards:l}}}});case 4:case"end":return i.stop()}}),i)})))()},updatePlaylist:function(e){b.a.writeQuery({query:h.a,variables:{id:this.playlistId},data:{playlist:e}})}}},C=a("KHd+"),P=function(e){e.options.__langStrings={totara_engage:["resourcecount"],engage_article:["loadmore","viewedresources"]}},V=Object(C.a)(x,t,[],!1,null,null,null);"function"==typeof P&&P(V),V.options.__hasBlocks={script:!0,template:!0},V.options.__file="client/src/totara_playlist/pages/PlaylistView.vue";i.default=V.exports},AdjL:function(e,i){e.exports=tui.require("tui/components/loader/Loader")},BN8m:function(e,i){e.exports=tui.require("tui/components/buttons/ButtonGroup")},C3CV:function(e,i){e.exports=tui.require("totara_playlist/components/sidepanel/Related")},D6YV:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-summaryPlaylistCard"},[a("div",{staticClass:"tui-summaryPlaylistCard__top"},[a("a",{staticClass:"tui-summaryPlaylistCard__top__title",attrs:{href:e.url}},[e._v("\n      "+e._s(e.name)+"\n    ")]),e._v(" "),a("StarRating",{staticClass:"tui-summaryPlaylistCard__top__stars",attrs:{"read-only":!0,"max-rating":5,increment:1,rating:e.rating,title:e.ratingTitle}})],1),e._v(" "),a("p",{staticClass:"tui-summaryPlaylistCard__author"},[e._v("\n    "+e._s(e.$str("by_author","totara_playlist",e.author))+"\n  ")])])};t._withStripped=!0;var n=a("HuWC"),r={components:{StarRating:a.n(n).a},props:{playlistId:{type:[Number,String],required:!0},name:{type:String,required:!0},url:{type:String,default:function(){return this.$url("/totara/playlist/index.php",{id:this.playlistId})}},author:{type:String,required:!0},rating:{type:[String,Number],required:!0},ratedCount:{type:[String,Number],required:!0}},computed:{ratingTitle:function(){return this.ratedCount<=1?this.$str("numberofpersonrating","totara_engage",this.ratedCount):this.$str("numberofpeoplerating","totara_engage",this.ratedCount)}}},l=a("KHd+"),s=function(e){e.options.__langStrings={totara_playlist:["by_author"],totara_engage:["numberofpeoplerating","numberofpersonrating"]}},o=Object(l.a)(r,t,[],!1,null,null,null);"function"==typeof s&&s(o),o.options.__hasBlocks={script:!0,template:!0},o.options.__file="client/src/totara_playlist/components/card/SummaryPlaylistCard.vue";i.default=o.exports},D9If:function(e,i){e.exports=tui.require("tui/components/grid/GridItem")},Df8L:function(e,i,a){"use strict";a.r(i),i.default={xsmall:{name:"xsmall",boundaries:[0,480],gridDirection:"horizontal",cardDirection:"vertical",maxItemsPerRow:1,cardUnits:9},small:{name:"small",boundaries:[481,794],gridDirection:"horizontal",cardDirection:"vertical",maxItemsPerRow:2,cardUnits:9},medium:{name:"medium",boundaries:[795,1089],gridDirection:"horizontal",cardDirection:"horizontal",maxItemsPerRow:4,cardUnits:3},large:{name:"large",boundaries:[1090,1396],gridDirection:"horizontal",cardDirection:"horizontal",maxItemsPerRow:4,cardUnits:3},xlarge:{name:"xlarge",boundaries:[1397,1672],gridDirection:"horizontal",cardDirection:"horizontal",maxItemsPerRow:4,cardUnits:2}}},FhEx:function(e,i){e.exports=tui.require("totara_engage/components/sidepanel/media/MediaSetting")},FoZm:function(e,i){e.exports=tui.require("tui/format")},HuWC:function(e,i){e.exports=tui.require("totara_engage/components/icons/StarRating")},JMfZ:function(e,i){e.exports=tui.require("totara_playlist/components/popover/PlaylistPopover")},KxSD:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-playlistResourcesGrid",attrs:{"data-max-units":e.maxUnits,"data-single-card-units":e.cardUnits,"data-size":e.size}},[[a("VirtualScroll",{attrs:{"data-key":"index","data-list":e.rows,"page-mode":!0,"aria-label":e.$str("playlist_resource","totara_playlist"),"is-loading":e.isLoading},on:{scrollbottom:e.scrolledToBottom},scopedSlots:e._u([{key:"item",fn:function(i){var t=i.item;return[a("CoreGrid",{staticClass:"tui-playlistResourcesGrid__row",attrs:{direction:e.gridDirection,"max-units":e.maxUnits}},e._l(t.items,(function(i,n){return a("GridItem",{key:n,staticClass:"tui-playlistResourcesGrid__card",attrs:{units:e.cardUnits}},["AddNewPlaylistCard"==i.component?[a("AddNewPlaylistCard",{attrs:{"playlist-id":e.playlistId,access:e.access},on:{contribute:e.addResource}})]:[a("EngageCard",{attrs:{"card-attribute":i,"aria-labelledby":e.$id("row-"+t.index+"-"+n+"-label"),"label-id":e.$id("row-"+t.index+"-"+n+"-label"),"aria-posinset":t.index*e.itemsPerRow+n+1,"aria-setsize":e.cards.length},on:{refetch:function(i){return e.$emit("refetch",i)}}})]],2)})),1)]}},{key:"footer",fn:function(){return[a("Loader",{attrs:{fullpage:!1,loading:e.isLoading}})]},proxy:!0}])})]],2)};t._withStripped=!0;var n=a("NAOU"),r=a.n(n),l=a("D9If"),s=a.n(l),o=a("tyu8"),d=a("3Eqo"),u=a("V8v5"),m=a.n(u),c=a("4ky8"),p=a.n(c),k=a("AdjL"),v=a.n(k),y=a("R5BP"),g=a.n(y),_=a("ZTUP"),f={components:{GridItem:s.a,CoreGrid:r.a,AddNewPlaylistCard:m.a,EngageCard:p.a,Loader:v.a,VirtualScroll:g.a},props:{maxUnits:{type:[String,Number],required:!0},playlistId:{type:[Number,String],required:!0},contributable:{type:Boolean,default:!0},size:{type:String,required:!0},cards:{type:Array,required:!0},access:{type:String,required:!0},isLoading:{type:Boolean,required:!0},libraryView:Boolean},data:function(){return{loadingComponents:!1}},computed:{gridSize:function(){return d.playlistGrid[this.size]},itemsPerRow:function(){if(1>=this.maxUnits)return 1;var e=Math.floor(this.maxUnits/this.cardUnits),i=this.gridSize.maxItemsPerRow;return e>i?i:1>=e?"small"===this.size&&this.libraryView?2:1:e},rows:function(){return Object(o.calculateRow)(this.allCards,this.itemsPerRow)},cardUnits:function(){return"small"===this.size&&this.libraryView?Math.floor(this.maxUnits/2):this.gridSize.cardUnits},gridDirection:function(){if(this.libraryView){if("small"===this.size)return"horizontal";if("xsmall"===this.size)return"vertical"}return this.gridSize.cardDirection},allCards:function(){return this.contributable?[{component:"AddNewPlaylistCard"}].concat(this.cards):this.cards}},methods:{addResource:function(e){var i=this,a=e.resourceId;this.$apollo.mutate({mutation:_.a,refetchAll:!1,refetchQueries:["totara_playlist_cards"],variables:{playlistid:this.playlistId,resources:[a]}}).then((function(){i.$emit("resource-added")}))},scrolledToBottom:function(){this.$emit("scrolledtobottom")}}},N=a("KHd+"),b=function(e){e.options.__langStrings={totara_playlist:["playlist_resource"]}},h=Object(N.a)(f,t,[],!1,null,null,null);"function"==typeof b&&b(h),h.options.__hasBlocks={script:!0,template:!0},h.options.__file="client/src/totara_playlist/components/grid/PlaylistResourcesGrid.vue";i.default=h.exports},LJiL:function(e,i){e.exports=tui.require("totara_engage/components/sidepanel/access/AccessDisplay")},Mnur:function(e,i){e.exports=tui.require("tui/components/modal/ModalPresenter")},Ms3t:function(e,i){e.exports=tui.require("totara_playlist/components/grid/PlaylistResourcesGrid")},NAOU:function(e,i){e.exports=tui.require("tui/components/grid/Grid")},NOp9:function(e,i){e.exports=tui.require("totara_core/components/card/Card")},NTRL:function(e,i,a){!function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("totara_playlist")?console.warn('[tui bundle] The bundle "totara_playlist" is already loaded, skipping initialisation.'):(tui._bundle.register("totara_playlist"),tui._bundle.addModulesFromContext("totara_playlist",a("9GUw")),tui._bundle.addModulesFromContext("totara_playlist/components",a("q/4r")),tui._bundle.addModulesFromContext("totara_playlist/pages",a("tzaz")))}()},Ou4H:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("BaseCard",{staticClass:"tui-totaraPlaylist-playlistCard",attrs:{"data-card-unique":e.instanceId,href:e.$url("/totara/playlist/index.php",{id:e.instanceId}),"show-footnotes":e.showFootnotes,footnotes:e.footnotes},on:{mouseover:function(i){return e.$_handleHovered(!0)},mouseleave:function(i){return e.$_handleHovered(!1)}}},[a("ImageHeader",{attrs:{slot:"header-image","show-cover":e.hovered},slot:"header-image"},[a("div",{staticClass:"tui-totaraPlaylist-playlistCard__imageHeader",attrs:{slot:"image"},slot:"image"},[a("div",{staticClass:"tui-totaraPlaylist-playlistCard__numberOfResourcesContainer"},[a("div",{staticClass:"tui-totaraPlaylist-playlistCard__numberOfResources"},[a("p",[e._v(e._s(e.extraData.resources))])])]),e._v(" "),a("div",{staticClass:"tui-totaraPlaylist-playlistCard__imageContainer"},[a("img",{staticClass:"tui-totaraPlaylist-playlistCard__image",attrs:{alt:e.name,src:e.extraData.image}})])]),e._v(" "),a("div",{staticClass:"tui-totaraPlaylist-playlistCard__icons",attrs:{slot:"actions"},slot:"actions"},[a("ButtonIcon",{attrs:{"aria-label":e.$str("share","totara_engage"),styleclass:{primary:!1,circle:!0}},on:{click:function(i){return i.preventDefault(),e.$_handleShare(i)}}},[a("ShareIcon")],1),e._v(" "),e.extraData.actions?a("ButtonIcon",{attrs:{"aria-label":e.$str("more","totara_engage"),styleclass:{primary:!1,circle:!0}},on:{click:function(i){return i.preventDefault(),e.$_handleMoreActions(i)}}},[a("MoreIcon")],1):e._e()],1)]),e._v(" "),a("CardHeader",{staticClass:"tui-totaraPlaylist-playlistCard__header",attrs:{slot:"header"},slot:"header"},[a("BookmarkButton",{directives:[{name:"show",rawName:"v-show",value:!e.owned,expression:"!owned"}],staticClass:"tui-totaraPlaylist-playlistCard__bookmark",attrs:{slot:"first",size:"300",bookmarked:e.innerBookmarked,primary:!1,circle:!1,small:!0,transparent:!0},on:{click:e.updateBookmark},slot:"first"}),e._v(" "),a("h4",{staticClass:"tui-totaraPlaylist-playlistCard__title",attrs:{slot:"second",id:e.labelId},slot:"second"},[e._v("\n      "+e._s(e.name)+"\n    ")])],1),e._v(" "),a("StarRating",{staticClass:"tui-totaraPlaylist-playlistCard__rating",attrs:{slot:"info-content",rating:e.showRating,"read-only":!0,increment:.1,"max-rating":5,title:e.starTitle},slot:"info-content"}),e._v(" "),a("div",{staticClass:"tui-totaraPlaylist-playlistCard__footer",attrs:{slot:"footer"},slot:"footer"},[e._l(e.statIcons,(function(e){return a("StatIcon",{key:e.type,attrs:{icon:e.icon,title:e.title,"stat-number":e.statNumber}})})),e._v(" "),a("AccessIcon",{attrs:{access:e.access,size:"300","custom-class":"tui-totaraPlaylist-playlistCard__visibilityIcon"}})],2)],1)};t._withStripped=!0;var n=a("kQ5c"),r=a.n(n),l=a("qyfC"),s=a.n(l),o=a("ccUt"),d=a.n(o),u=a("5h9J"),m=a.n(u),c=a("Xpd9"),p=a.n(c),k=a("HuWC"),v=a.n(k),y=a("6wqy"),g=a.n(y),_=a("9mdZ"),f=a.n(_),N=a("tyu8"),b=a("+1Jo"),h=a.n(b),S=a("bxuo"),F=a.n(S),x=a("vN5C"),C={components:{ButtonIcon:m.a,BaseCard:r.a,ImageHeader:s.a,CardHeader:d.a,StatIcon:p.a,StarRating:v.a,ShareIcon:g.a,MoreIcon:f.a,AccessIcon:h.a,BookmarkButton:F.a},mixins:[N.cardMixin],data:function(){return{innerBookmarked:this.bookmarked,hovered:!1,extraData:JSON.parse(this.extra),statIcons:[{type:"comment",icon:"totara_engage|comment",title:this.$str("numberofcomments","totara_engage",this.totalComments),statNumber:this.totalComments}]}},computed:{showRating:function(){return this.rating},starTitle:function(){return this.extraData.ratingCount<=1?this.$str("numberofpersonrating","totara_engage",this.extraData.ratingCount):this.$str("numberofpeoplerating","totara_engage",this.extraData.ratingCount)}},created:function(){N.AccessManager.isPublic(this.access)&&this.statIcons.push({type:"share",icon:"totara_engage|share",title:this.$str("numberofshares","totara_engage",this.sharedbycount),statNumber:this.sharedbycount})},methods:{$_handleHovered:function(e){this.hovered=e},$_handleShare:function(){},$_handleMoreActions:function(){},updateBookmark:function(){this.innerBookmarked=!this.innerBookmarked,this.$apollo.mutate({mutation:x.a,refetchAll:!1,refetchQueries:["totara_playlist_playlist_links","totara_engage_contribution_cards"],variables:{itemid:this.instanceId,component:"totara_playlist",bookmarked:this.innerBookmarked}})}}},P=a("KHd+"),V=function(e){e.options.__langStrings={totara_engage:["numberofcomments","numberofshares","share","more","numberofpeoplerating","numberofpersonrating"]}},w=Object(P.a)(C,t,[],!1,null,null,null);"function"==typeof V&&V(w),w.options.__hasBlocks={script:!0,template:!0},w.options.__file="client/src/totara_playlist/components/card/PlaylistCard.vue";i.default=w.exports},QGXx:function(e,i){e.exports=tui.require("totara_engage/components/buttons/DoneCancelGroup")},R5BP:function(e,i){e.exports=tui.require("tui/components/virtualscroll/VirtualScroll")},TXEh:function(e,i){e.exports=tui.require("tui/util")},TonO:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-playlistRelated"},e._l(e.playlists,(function(i){var t=i.bookmarked,n=i.fullname,r=i.instanceid,l=i.image,s=i.name,o=i.rating,d=i.resources;return a("article",{key:r},[a("RelatedCard",{attrs:{"playlist-id":r,bookmarked:t,fullname:n,image:l,name:s,rating:o,resources:d},on:{update:e.update}})],1)})),0)};t._withStripped=!0;var n=a("VXX2"),r=a.n(n),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ml_recommender_get_recommended_playlists"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"playlist_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"ml_recommender_recommended_playlists_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"playlist_id"},value:{kind:"Variable",name:{kind:"Name",value:"playlist_id"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"playlists"},name:{kind:"Name",value:"ml_recommender_recommended_playlists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"playlist_id"},value:{kind:"Variable",name:{kind:"Name",value:"playlist_id"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"instanceid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timecreated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bookmarked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extra"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]}}]},s=a("vN5C"),o={components:{RelatedCard:r.a},props:{playlistId:{type:[Number,String],required:!0}},data:function(){return{playlists:[]}},mounted:function(){this.getRecommendations()},methods:{getRecommendations:function(){var e=this;this.$apollo.mutate({mutation:l,refetchAll:!1,variables:{playlist_id:this.playlistId}}).then((function(i){var a=i.data;e.playlists=a.playlists.map((function(e){var i=e.bookmarked,a=e.extra,t=e.name,n=e.instanceid,r=e.user,l=JSON.parse(a),s=l.image,o=l.rating,d=l.resources;return{bookmarked:i,fullname:r.fullname,instanceid:n,image:s,name:t,rating:o,resources:d}}))}))},update:function(e,i){this.$apollo.mutate({mutation:s.a,refetchAll:!1,variables:{itemid:e,component:"totara_playlist",bookmarked:i}})}}},d=a("KHd+"),u=Object(d.a)(o,t,[],!1,null,null,null);u.options.__hasBlocks={script:!0,template:!0},u.options.__file="client/src/totara_playlist/components/sidepanel/Related.vue";i.default=u.exports},Umwc:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Card",{staticClass:"tui-playlistRelatedCard",attrs:{clickable:!0},on:{click:e.handleClickCard}},[a("a",{attrs:{href:e.href}}),e._v(" "),a("div",{staticClass:"tui-playlistRelatedCard__header",style:{"background-image":"url('"+e.image+"')"}},[a("span",[e._v(e._s(e.resources))])]),e._v(" "),a("section",{staticClass:"tui-playlistRelatedCard__content"},[a("span",[e._v(e._s(e.name))]),e._v(" "),a("span",[e._v(e._s(e.fullname))]),e._v(" "),a("StarRating",{attrs:{rating:e.rating,"read-only":!0,increment:.1,"max-rating":5}})],1),e._v(" "),a("BookmarkButton",{staticClass:"tui-playlistRelatedCard__bookmark",attrs:{size:"300",bookmarked:e.innerBookmarked,primary:!1,circle:!1,small:!0,transparent:!0},on:{click:e.handleClickBookmark}})],1)};t._withStripped=!0;var n=a("NOp9"),r=a.n(n),l=a("bxuo"),s=a.n(l),o=a("HuWC"),d=a.n(o),u={components:{BookmarkButton:s.a,Card:r.a,StarRating:d.a},props:{bookmarked:{type:Boolean,default:!1},fullname:{type:String,required:!0},image:{type:String,required:!0},name:{type:String,required:!0},playlistId:{type:[Number,String],required:!0},rating:{type:Number,required:!0},resources:{type:Number,required:!0}},data:function(){return{innerBookmarked:this.bookmarked}},computed:{href:function(){return this.$url("/totara/playlist/index.php",{id:this.playlistId})}},methods:{handleClickBookmark:function(){this.innerBookmarked=!this.innerBookmarked,this.$emit("update",this.playlistId,this.innerBookmarked)},handleClickCard:function(){window.location.href=this.href}}},m=a("KHd+"),c=Object(m.a)(u,t,[],!1,null,null,null);c.options.__hasBlocks={script:!0,template:!0},c.options.__file="client/src/totara_playlist/components/card/RelatedCard.vue";i.default=c.exports},UpZR:function(e,i){e.exports=tui.require("tui/apollo_client")},V8v5:function(e,i){e.exports=tui.require("totara_playlist/components/card/AddNewPlaylistCard")},VOFu:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_playlist_get_playlist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"playlist"},name:{kind:"Name",value:"totara_playlist_instance"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contextid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rated"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"updateable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalresources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bookmarked"},arguments:[],directives:[]}]}}]}}]}},VXX2:function(e,i){e.exports=tui.require("totara_playlist/components/card/RelatedCard")},W27q:function(e,i){e.exports=tui.require("totara_engage/components/sidepanel/EngageSidePanel")},WHZl:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Form",{staticClass:"tui-playlistForm",attrs:{vertical:!0,"input-width":"full"}},[a("FormRow",{staticClass:"tui-playlistForm__title",attrs:{label:e.$str("playlisttitle","totara_playlist"),hidden:!0,required:!0},scopedSlots:e._u([{key:"default",fn:function(i){var t=i.id;return[a("InputText",{attrs:{id:t,name:"playlist-title",max:60,placeholder:e.$str("entertitle","totara_playlist"),disabled:e.submitting,required:!0},model:{value:e.playlist.name,callback:function(i){e.$set(e.playlist,"name",i)},expression:"playlist.name"}})]}}])}),e._v(" "),a("div",{staticClass:"tui-playlistForm__description"},[a("FormRow",{staticClass:"tui-playlistForm__description__formRow",attrs:{required:!0,hidden:!0,label:e.$str("playlistdescription","totara_playlist")},scopedSlots:e._u([{key:"default",fn:function(i){var t=i.id;return[a("Weka",{staticClass:"tui-playlistForm__description__formRow__textArea",attrs:{id:t,component:"totara_playlist",area:"summary",doc:e.summary.doc,placeholder:e.$str("adddescription","totara_playlist")},on:{update:e.handleUpdate}})]}}])}),e._v(" "),a("div",{staticClass:"tui-playlistForm__description__tip"},[a("p",[e._v(e._s(e.$str("contributetip","totara_engage")))]),e._v(" "),a("Popover",{attrs:{position:"right"},scopedSlots:e._u([{key:"trigger",fn:function(){return[a("InfoIcon",{attrs:{alt:e.$str("info","moodle")}})]},proxy:!0}])},[e._v(" "),a("p",{staticClass:"tui-playlistForm__description__tip__content"},[e._v("\n          "+e._s(e.$str("contributetip_help","totara_engage"))+"\n        ")])])],1)],1),e._v(" "),a("ButtonGroup",{staticClass:"tui-playlistForm__buttons"},[a("LoadingButton",{attrs:{loading:e.submitting,primary:!0,disabled:e.disabled,text:e.$str("save","totara_core")},on:{click:e.submit}}),e._v(" "),a("CancelButton",{attrs:{disabled:e.submitting},on:{click:function(i){return e.$emit("cancel")}}})],1)],1)};t._withStripped=!0;var n=a("oMuj"),r=a.n(n),l=a("BN8m"),s=a.n(l),o=a("nXMa"),d=a.n(o),u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_playlist_create_playlist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"summary"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"summary_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"access"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_access"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contextid"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"playlist"},name:{kind:"Name",value:"totara_playlist_create"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"summary"},value:{kind:"Variable",name:{kind:"Name",value:"summary"}}},{kind:"Argument",name:{kind:"Name",value:"summary_format"},value:{kind:"Variable",name:{kind:"Name",value:"summary_format"}}},{kind:"Argument",name:{kind:"Name",value:"access"},value:{kind:"Variable",name:{kind:"Name",value:"access"}}},{kind:"Argument",name:{kind:"Name",value:"contextid"},value:{kind:"Variable",name:{kind:"Name",value:"contextid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rated"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"updateable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributable"},arguments:[],directives:[]}]}}]}}]},m=a("rLBA"),c=a.n(m),p=a("9G+f"),k=a.n(p),v=a("i/kK"),y=a.n(v),g=a("nEm4"),_=a.n(g),f=a("jAnA"),N=a.n(f),b=a("2wx7"),h=a.n(b),S=a("TXEh"),F=a("FoZm"),x={components:{InputText:r.a,ButtonGroup:s.a,LoadingButton:c.a,CancelButton:d.a,Popover:k.a,InfoIcon:N.a,FormRow:y.a,Form:_.a,Weka:h.a},props:{playlist:{type:Object,default:function(){return{name:"",summary:""}}}},data:function(){return{description:this.$id("engageContribute-description"),submitting:!1,summary:{doc:null,isEmpty:!0}}},computed:{disabled:function(){return 0===this.playlist.name.length||this.submitting}},methods:{submit:function(){var e=this;this.submitting||(this.submitting=!0,this.$apollo.mutate({mutation:u,variables:{name:this.playlist.name,summary:JSON.stringify(this.summary.doc),summary_format:F.FORMAT_JSON_EDITOR},update:function(i,a){var t=a.data.playlist;window.location.href=e.$url("/totara/playlist/index.php",{id:t.id})}}))},handleUpdate:function(e){this.$_readJson(e)},$_readJson:Object(S.debounce)((function(e){this.summary.doc=e.getJSON(),this.summary.isEmpty=e.isEmpty()}),250,{perArgs:!1})}},C=a("KHd+"),P=function(e){e.options.__langStrings={moodle:["info"],totara_core:["save"],totara_playlist:["entertitle","adddescription","playlisttitle","playlistdescription"],totara_engage:["contributetip","contributetip_help"]}},V=Object(C.a)(x,t,[],!1,null,null,null);"function"==typeof P&&P(V),V.options.__hasBlocks={script:!0,template:!0},V.options.__file="client/src/totara_playlist/components/form/PlaylistForm.vue";i.default=V.exports},WwIe:function(e,i){e.exports=tui.require("tui/components/layouts/LayoutOneColumnWithSidePanel")},Xpd9:function(e,i){e.exports=tui.require("totara_engage/components/icons/StatIcon")},YPxT:function(e,i){e.exports=tui.require("totara_engage/components/modal/EngageAdderModal")},ZTUP:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_playlist_add_resources"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"playlistid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resources"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"playlist"},name:{kind:"Name",value:"totara_playlist_add_resources"},arguments:[{kind:"Argument",name:{kind:"Name",value:"playlistid"},value:{kind:"Variable",name:{kind:"Name",value:"playlistid"}}},{kind:"Argument",name:{kind:"Name",value:"resources"},value:{kind:"Variable",name:{kind:"Name",value:"resources"}}}],directives:[]}]}}]}},ZmuF:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement;return(e._self._c||i)("EngageAdderModal",{attrs:{title:e.$str("selectcontent","totara_playlist"),open:e.showAdder,cards:e.contribution.cards,"filter-value":e.filterValue,"filter-component":"totara_playlist","filter-area":"adder"},on:{added:e.adderUpdate,cancel:function(i){return e.$emit("close",i)},topic:e.filterTopic,search:e.filterSearch,section:e.filterSection}})};t._withStripped=!0;var n=a("YPxT"),r=a.n(n),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_playlist_resources"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"playlist_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"access"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_access"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topic"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"section"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"include_footnotes"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"resources"},name:{kind:"Name",value:"totara_playlist_resources"},arguments:[{kind:"Argument",name:{kind:"Name",value:"playlist_id"},value:{kind:"Variable",name:{kind:"Name",value:"playlist_id"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"access"},value:{kind:"Variable",name:{kind:"Name",value:"access"}}},{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}},{kind:"ObjectField",name:{kind:"Name",value:"topic"},value:{kind:"Variable",name:{kind:"Name",value:"topic"}}},{kind:"ObjectField",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"ObjectField",name:{kind:"Name",value:"search"},value:{kind:"Variable",name:{kind:"Name",value:"search"}}},{kind:"ObjectField",name:{kind:"Name",value:"section"},value:{kind:"Variable",name:{kind:"Name",value:"section"}}}]}},{kind:"Argument",name:{kind:"Name",value:"footnotes"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}}},{kind:"ObjectField",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}}},{kind:"ObjectField",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}}}]}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cards"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"instanceid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timecreated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bookmarked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extra"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"footnotes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}}},{kind:"Argument",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}}},{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"include_footnotes"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"props"},arguments:[],directives:[]}]}}]}}]}}]}}]},s=a("ZTUP"),o=a("pxdy"),d=a.n(o),u={components:{EngageAdderModal:r.a},mixins:[d.a],props:{playlistId:{type:[String,Number],required:!0},showAdder:Boolean},watch:{showAdder:function(e){this.skipCardsQuery=!e}},created:function(){this.skipCardsQuery=!0},apollo:{contribution:{query:l,fetchPolicy:"network-only",variables:function(){return Object.assign({},this.filterValue,{playlist_id:this.playlistId,area:"adder",include_footnotes:!1})},update:function(e){var i=e.resources,a=i.cursor,t=i.cards;return{cursor:a,cards:this.canContribute?this.$_addContributeCard(t):t}},skip:function(){return this.skipCardsQuery}}},methods:{adderUpdate:function(e){var i=this;this.$apollo.mutate({mutation:s.a,refetchAll:!1,refetchQueries:["totara_playlist_cards"],variables:{playlistid:this.playlistId,resources:e.map((function(e){return JSON.parse(e).itemid}))}}).finally((function(){i.$emit("close")}))}}},m=a("KHd+"),c=function(e){e.options.__langStrings={totara_playlist:["selectcontent"]}},p=Object(m.a)(u,t,[],!1,null,null,null);"function"==typeof c&&c(p),p.options.__hasBlocks={script:!0,template:!0},p.options.__file="client/src/totara_playlist/components/contribution/Adder.vue";i.default=p.exports},ajlF:function(e,i){e.exports=tui.require("totara_playlist/components/modal/ContributeModal")},av3q:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("section",{staticClass:"tui-playlistPageHeaderBox"},[e.editing?e._e():a("InlineEditing",{staticClass:"tui-playlistPageHeaderBox__titleBox",attrs:{"update-able":e.updateAble,"button-aria-label":e.$str("edit_playlist_title","totara_playlist")},on:{click:function(i){e.editing=!0}}},[a("h1",{staticClass:"tui-playlistPageHeaderBox__titleBox__title",attrs:{slot:"content"},slot:"content"},[e._v("\n      "+e._s(e.title)+"\n    ")])]),e._v(" "),e.editing?a("PlaylistTitleForm",{attrs:{title:e.title,submitting:e.submitting},on:{submit:e.updatePlaylistTitle,cancel:function(i){e.editing=!1}}}):e._e()],1)};t._withStripped=!0;var n=a("o0o1"),r=a.n(n),l=a("yXPU"),s=a.n(l),o=a("g0Fk"),d=a.n(o),u=a("kL7T"),m=a.n(u),c=a("vyVp"),p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_playlist_update_playlist_name"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"playlist"},name:{kind:"Name",value:"totara_playlist_update"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contextid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updateable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rated"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"totalresources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]}]}}]}}]},k={components:{InlineEditing:d.a,PlaylistTitleForm:m.a},props:{playlistId:{type:Number,required:!0},title:{type:String,required:!0},updateAble:{type:Boolean,default:!0}},data:function(){return{editing:!1,submitting:!1}},methods:{updatePlaylistTitle:function(e){var i=this,a=e.title;return s()(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.submitting){e.next=2;break}return e.abrupt("return");case 2:return i.submitting=!0,e.prev=3,e.next=6,i.$apollo.mutate({mutation:p,refetchAll:!1,variables:{id:i.playlistId,name:a}});case 6:t=e.sent,n=t.data.playlist,i.editing=!1,i.$emit("update-playlist",n),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(3),e.next=16,Object(c.notify)({message:i.$str("error:update","totara_playlist"),type:"error"});case 16:return e.prev=16,i.submitting=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,12,16,19]])})))()}}},v=a("KHd+"),y=function(e){e.options.__langStrings={totara_playlist:["error:update","edit_playlist_title"]}},g=Object(v.a)(k,t,[],!1,null,null,null);"function"==typeof y&&y(g),g.options.__hasBlocks={script:!0,template:!0},g.options.__file="client/src/totara_playlist/components/page/HeaderBox.vue";i.default=g.exports},bxuo:function(e,i){e.exports=tui.require("totara_engage/components/buttons/BookmarkButton")},ccUt:function(e,i){e.exports=tui.require("totara_engage/components/card/CardHeader")},dtfu:function(e,i){e.exports=tui.require("tui/components/responsive/Responsive")},efLV:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Modal",{attrs:{size:"large","aria-labelledby":e.$id("title"),dismissable:e.dismissable}},[a("ModalContent",{staticClass:"tui-contributeModal",attrs:{"close-button":!1}},[a("Tabs",{directives:[{name:"show",rawName:"v-show",value:!e.hideTabs,expression:"!hideTabs"}],staticClass:"tui-contributeModal__tabs"},[a("Tab",{attrs:{id:"playlist",name:e.$str("pluginname","totara_playlist")}})],1),e._v(" "),a("div",{staticClass:"tui-contributeModal__componentContent"},[a("PlaylistForm",{on:{done:function(i){return e.$emit("done",i)},cancel:function(i){return e.$emit("request-close")},"hide-tabs":function(i){e.hideTabs=i}}})],1)],1)],1)};t._withStripped=!0;var n=a("tkAW"),r=a.n(n),l=a("u5iS"),s=a.n(l),o=a("txsu"),d=a.n(o),u=a("1i2V"),m=a.n(u),c=a("4yhk"),p=a.n(c),k={components:{Modal:r.a,ModalContent:s.a,Tabs:d.a,Tab:m.a,PlaylistForm:p.a},data:function(){return{size:"large",dismissable:{overlayClose:!1,esc:!0,backdropClick:!1},hideTabs:!1}}},v=a("KHd+"),y=function(e){e.options.__langStrings={totara_playlist:["pluginname"]}},g=Object(v.a)(k,t,[],!1,null,null,null);"function"==typeof y&&y(g),g.options.__hasBlocks={script:!0,template:!0},g.options.__file="client/src/totara_playlist/components/modal/ContributeModal.vue";i.default=g.exports},f1n6:function(e,i){e.exports=tui.require("totara_engage/components/modal/EngageWarningModal")},g0Fk:function(e,i){e.exports=tui.require("totara_engage/components/form/InlineEditing")},g6UP:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Responsive",{staticClass:"tui-contributionPlaylistResources",attrs:{breakpoints:e.breakPoints},on:{"responsive-resize":function(i){e.size=i}}},[a("ContributionBaseContent",{attrs:{units:e.units,loading:!!e.$apollo.loading,"loading-more":e.loadingMore,"total-cards":e.contribution.cursor.total,"show-heading":!e.$apollo.loading&&"vertical"!==e.gridDirection,"grid-direction":e.gridDirection},scopedSlots:e._u([{key:"heading",fn:function(){return[a("HeaderBox",{attrs:{"playlist-id":e.pageProps.playlistId,title:e.playlist.name,owned:e.playlist.owned}})]},proxy:!0},{key:"bookmark",fn:function(){return[e.playlist.owned?e._e():a("BookmarkButton",{attrs:{primary:!1,circle:!0,bookmarked:e.bookmarked,size:"300"},on:{click:e.updateBookmark}})]},proxy:!0},e.contribution.cards&&e.playlist.access?{key:"cards",fn:function(){return[a("PlaylistResourcesGrid",{attrs:{"max-units":e.units,"playlist-id":e.pageProps.playlistId,size:e.size,"library-view":!0,cards:e.contribution.cards,contributable:e.playlist.contributable,access:e.playlist.access,"is-loading":e.$apollo.loading},on:{scrolledtobottom:e.scrolledToBottom}}),e._v(" "),e.isLoadMoreVisible&&e.contribution.cards.length<e.contribution.cursor.total&&!e.$apollo.loading?a("div",{staticClass:"tui-contributionPlaylistResources__loadMoreContainer"},[a("div",{staticClass:"tui-contributionBaseContent__viewedResources"},[e._v("\n          "+e._s(e.$str("viewedresources","engage_article",e.contribution.cards.length))+"\n          "+e._s(e.$str("resourcecount","totara_engage",e.contribution.cursor.total))+"\n        ")]),e._v(" "),a("Button",{staticClass:"tui-contributionPlaylistResources__loadMore",attrs:{text:e.$str("loadmore","engage_article")},on:{click:e.loadMore}})],1):e._e()]},proxy:!0}:null],null,!0)})],1)};t._withStripped=!0;var n=a("o0o1"),r=a.n(n),l=a("yXPU"),s=a.n(l),o=a("dtfu"),d=a.n(o),u=a("s5vj"),m=a.n(u),c=a("Ms3t"),p=a.n(c),k=a("/hNZ"),v=a.n(k),y=a("bxuo"),g=a.n(y),_=a("vF5l"),f=a.n(_),N=a("VOFu"),b=a("gR9B"),h=a("vN5C"),S=a("zEvk"),F=a.n(S),x=a("3Eqo"),C={components:{Responsive:d.a,ContributionBaseContent:m.a,PlaylistResourcesGrid:p.a,HeaderBox:v.a,BookmarkButton:g.a,Button:f.a},mixins:[F.a],props:{units:{type:[Number,String],required:!0},gridDirection:{type:String,required:!0}},data:function(){return{playlist:{},contribution:{cursor:{total:0,next:null},cards:[]},size:"",bookmarked:!1,isLoadMoreVisible:!1,loadingMore:!1}},computed:{breakPoints:function(){var e=Object.values(x.playlistGrid);return e.map((function(e){return{name:e.name,boundaries:e.boundaries}}))}},apollo:{playlist:{query:N.a,fetchPolicy:"network-only",variables:function(){return{id:this.pageProps.playlistId}},result:function(e){var i=e.data.playlist;this.bookmarked=i.bookmarked}},contribution:{query:b.a,fetchPolicy:"network-only",variables:function(){return{id:this.pageProps.playlistId}}}},methods:{updateBookmark:function(){this.bookmarked=!this.bookmarked,this.$apollo.mutate({mutation:h.a,refetchQueries:["savedplaylists"],variables:{itemid:this.pageProps.playlistId,component:"totara_playlist",bookmarked:this.bookmarked}})},scrolledToBottom:function(){var e=this;return s()(r.a.mark((function i(){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!e.isLoadMoreVisible){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,e.loadMoreItems();case 4:e.isLoadMoreVisible=!0;case 5:case"end":return i.stop()}}),i)})))()},loadMore:function(){var e=this;return s()(r.a.mark((function i(){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.loadMoreItems();case 2:e.isLoadMoreVisible=!1;case 3:case"end":return i.stop()}}),i)})))()},loadMoreItems:function(){var e=this;return s()(r.a.mark((function i(){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.contribution.cursor.next){i.next=2;break}return i.abrupt("return");case 2:e.loadingMore=!0,e.$apollo.queries.contribution.fetchMore({variables:{id:e.pageProps.playlistId,cursor:e.contribution.cursor.next},updateQuery:function(i,a){var t=a.fetchMoreResult,n=i.contribution,r=t.contribution,l=n.cards.concat(r.cards);return e.loadingMore=!1,{contribution:{cursor:r.cursor,cards:l}}}});case 4:case"end":return i.stop()}}),i)})))()}}},P=a("KHd+"),V=function(e){e.options.__langStrings={totara_engage:["resourcecount"],engage_article:["loadmore","viewedresources"]}},w=Object(P.a)(C,t,[],!1,null,null,null);"function"==typeof V&&V(w),w.options.__hasBlocks={script:!0,template:!0},w.options.__file="client/src/totara_playlist/components/contribution/PlaylistResources.vue";i.default=w.exports},gR9B:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_playlist_cards"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"contribution"},name:{kind:"Name",value:"totara_playlist_cards"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cards"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"instanceid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bookmarked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extra"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timecreated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]}}]}}]}},grGL:function(e,i){e.exports=tui.require("totara_engage/components/contribution/Contribute")},"i/kK":function(e,i){e.exports=tui.require("tui/components/form/FormRow")},iZsO:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return e.$apollo.loading?e._e():a("EngageSidePanel",{staticClass:"tui-playlistSidePanel",attrs:{owned:e.playlist.owned,"user-email":e.user.email,"user-id":e.user.id,"user-full-name":e.user.fullname,"user-profile-image-url":e.user.profileimageurl,"user-profile-image-alt":e.user.profileimagealt,actions:e.actions},scopedSlots:e._u([{key:"modal",fn:function(){return[a("ModalPresenter",{attrs:{open:e.modal.confirm},on:{"request-close":function(i){e.modal.confirm=!1}}},[a("EngageWarningModal",{attrs:{title:e.$str("deletewarningtitle","totara_playlist"),"message-content":e.$str("deletewarningmsg","totara_playlist")},on:{delete:e.handleDelete}})],1)]},proxy:!0},{key:"overview",fn:function(){return[a("div",{staticClass:"tui-playlistSidePanel__overview"},[a("PageLoader",{attrs:{fullpage:!0,loading:e.submitting}}),e._v(" "),a("p",{staticClass:"tui-playlistSidePanel__overview__timeDescription"},[e._v("\n        "+e._s(e.playlist.timedescription)+"\n      ")]),e._v(" "),e.playlist.owned?a("AccessSetting",{attrs:{"item-id":e.playlistId,component:"totara_playlist","access-value":e.playlist.access,topics:e.playlist.topics,submitting:e.submitting,"open-modal":e.openModalFromButtonLabel},on:{"access-update":e.updateAccess,"close-modal":function(i){e.openModalFromButtonLabel=!1}}}):a("AccessDisplay",{attrs:{"access-value":e.playlist.access,topics:e.playlist.topics,"show-button":!1}}),e._v(" "),a("PlaylistSummary",{staticClass:"tui-playlistSidePanel__overview__summary",attrs:{"update-able":e.playlist.updateable,summary:e.playlist.summary}}),e._v(" "),a("MediaSetting",{attrs:{owned:e.playlist.owned,"access-value":e.playlist.access,"instance-id":e.playlistId,"shared-by-count":e.playlist.sharedbycount,"show-like-button":!1,"component-name":"totara_playlist"},on:{"access-update":e.updateAccess,"access-modal":function(i){e.openModalFromButtonLabel=!0}}}),e._v(" "),a("PlaylistStarRating",{attrs:{owned:e.playlist.owned,count:e.playlist.rating.count,rating:e.playlist.rating.rating,rated:e.playlist.rating.rated},on:{rating:e.createRating}})],1)]},proxy:!0},{key:"comments",fn:function(){return[a("SidePanelCommentBox",{staticClass:"tui-playlistSidePanel__commentBox",attrs:{component:"totara_playlist",area:"comment","instance-id":e.playlist.id}})]},proxy:!0},{key:"related",fn:function(){return[a("Related",{attrs:{component:"totara_playlist",area:"related","playlist-id":e.playlist.id}})]},proxy:!0}],null,!1,3568863949)})};t._withStripped=!0;var n=a("W27q"),r=a.n(n),l=a("5v9U"),s=a.n(l),o=a("sy3s"),d=a.n(o),u=a("LJiL"),m=a.n(u),c=a("AdjL"),p=a.n(c),k=a("lKjL"),v=a.n(k),y=a("Mnur"),g=a.n(y),_=a("f1n6"),f=a.n(_),N=a("FhEx"),b=a.n(N),h=a("r5/8"),S=a.n(h),F=a("C3CV"),x=a.n(F),C=a("VOFu"),P={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_playlist_update_playlist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"access"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_access"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topics"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"shares"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_recipient_in"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"playlist"},name:{kind:"Name",value:"totara_playlist_update"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"access"},value:{kind:"Variable",name:{kind:"Name",value:"access"}}},{kind:"Argument",name:{kind:"Name",value:"topics"},value:{kind:"Variable",name:{kind:"Name",value:"topics"}}},{kind:"Argument",name:{kind:"Name",value:"shares"},value:{kind:"Variable",name:{kind:"Name",value:"shares"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contextid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updateable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rated"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"totalresources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]}]}}]}}]},V={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_playlist_delete_playlist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_playlist_delete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}]},w={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_playlist_add_rating"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"playlistid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"rating"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ratingarea"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_playlist_add_rating"},arguments:[{kind:"Argument",name:{kind:"Name",value:"playlistid"},value:{kind:"Variable",name:{kind:"Name",value:"playlistid"}}},{kind:"Argument",name:{kind:"Name",value:"rating"},value:{kind:"Variable",name:{kind:"Name",value:"rating"}}},{kind:"Argument",name:{kind:"Name",value:"ratingarea"},value:{kind:"Variable",name:{kind:"Name",value:"ratingarea"}}}],directives:[]}]}}]},A={components:{EngageWarningModal:f.a,EngageSidePanel:r.a,SidePanelCommentBox:s.a,AccessSetting:d.a,AccessDisplay:m.a,PlaylistSummary:v.a,PlaylistStarRating:S.a,PageLoader:p.a,ModalPresenter:g.a,MediaSetting:b.a,Related:x.a},props:{playlistId:{type:[Number,String],required:!0}},apollo:{playlist:{query:C.a,variables:function(){return{id:this.playlistId}}}},data:function(){return{playlist:{},submitting:!1,modal:{confirm:!1},openModalFromButtonLabel:!1}},computed:{user:function(){return this.playlist.user?this.playlist.user:{}},actions:function(){return[{label:this.$str("delete","moodle"),action:this.$_requestConfirm.bind(this)}]}},methods:{$_requestConfirm:function(){this.modal.confirm=!0},updateAccess:function(e){var i=this,a=e.access,t=e.topics,n=e.shares;t=Array.prototype.slice.call(t),this.submitting=!0,this.$apollo.mutate({mutation:P,refetchAll:!1,refetchQueries:["totara_playlist_cards"],variables:{id:this.playlistId,access:a,topics:t.map((function(e){return e.id})),shares:n},update:function(e,a){var t=a.data;e.writeQuery({query:C.a,variables:{id:i.playlistId},data:t})}}).finally((function(){i.submitting=!1,i.$emit("playlist-updated")}))},handleDelete:function(){var e=this;this.$apollo.mutate({mutation:V,variables:{id:this.playlistId},refetchAll:!1}).then((function(i){i.data.result&&(e.$children.openModal=!1,window.location.href=e.$url("/totara/engage/your_resources.php"))}))},createRating:function(e){var i=this;this.submitting||(this.submitting=!0),this.$apollo.mutate({mutation:w,variables:{playlistid:this.playlistId,rating:Math.ceil(e),ratingarea:"playlist"}}).then((function(e){e.data.result&&(i.submitting=!1)}))}}},q=a("KHd+"),B=function(e){e.options.__langStrings={totara_playlist:["deletewarningmsg","deletewarningtitle"],moodle:["delete"]}},D=Object(q.a)(A,t,[],!1,null,null,null);"function"==typeof B&&B(D),D.options.__hasBlocks={script:!0,template:!0},D.options.__file="client/src/totara_playlist/components/sidepanel/PlaylistSidePanel.vue";i.default=D.exports},"iz/O":function(e,i,a){"use strict";a.r(i);var t=a("Df8L");a.d(i,"playlistGrid",(function(){return t.default}))},jAnA:function(e,i){e.exports=tui.require("tui/components/icons/common/Info")},jJ8l:function(e,i){e.exports=tui.require("tui/components/card/Card")},kL7T:function(e,i){e.exports=tui.require("totara_playlist/components/form/PlaylistTitleForm")},kQ5c:function(e,i){e.exports=tui.require("totara_engage/components/card/BaseCard")},lKjL:function(e,i){e.exports=tui.require("totara_playlist/components/sidepanel/PlaylistSummary")},nEm4:function(e,i){e.exports=tui.require("tui/components/form/Form")},nXMa:function(e,i){e.exports=tui.require("tui/components/buttons/Cancel")},oHj5:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"tui-playlistSummary"},[i("p",[this._v(this._s(this.summary))])])};t._withStripped=!0;var n={props:{summary:{type:String},updateAble:{type:Boolean,default:!1}}},r=a("KHd+"),l=Object(r.a)(n,t,[],!1,null,null,null);l.options.__hasBlocks={script:!0,template:!0},l.options.__file="client/src/totara_playlist/components/sidepanel/PlaylistSummary.vue";i.default=l.exports},oMuj:function(e,i){e.exports=tui.require("tui/components/form/InputText")},oQSm:function(e,i){e.exports=tui.require("totara_engage/mixins/navigation_mixin")},puam:function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("section",{staticClass:"tui-playlistNavigation"},[a("div",{staticClass:"tui-navigationPanel__category tui-navigationPanel__contribute"},[a("h3",{staticClass:"tui-navigationPanel__header"},[e._v("\n      "+e._s(e.$str("yourplaylists","totara_playlist"))+"\n    ")]),e._v(" "),e.showContribute?a("Contribute",{attrs:{"show-text":!1,"show-icon":!0,styleclass:{circle:!0,xsmall:!0,primary:!1},"aria-label":e.$str("contributeplaylist","totara_playlist")},scopedSlots:e._u([{key:"modal",fn:function(){return[a("ContributeModal")]},proxy:!0}],null,!1,3432429443)}):e._e()],1),e._v(" "),e.$apollo.loading?e._e():e._l(e.collection.own,(function(i,t){return a("div",{key:"playlistLink_"+t,class:e.getNavigationLinkClass("playlist_"+i.id,t)},[a("a",{staticClass:"tui-navigationPanel__link__text",attrs:{href:i.url}},[e._v("\n        "+e._s(i.name)+"\n      ")])])})),e._v(" "),a("div",{staticClass:"tui-navigationPanel__category"},[a("h3",{staticClass:"tui-navigationPanel__header"},[e._v("\n      "+e._s(e.$str("savedplaylists","totara_playlist"))+"\n    ")])]),e._v(" "),e.$apollo.loading?e._e():e._l(e.collection.saved,(function(i,t){return a("div",{key:"playlistSaved_"+t,class:e.getNavigationLinkClass("playlist_"+i.id,t)},[a("a",{staticClass:"tui-navigationPanel__link__text",attrs:{href:i.url}},[e._v("\n        "+e._s(i.name)+"\n      ")])])}))],2)};t._withStripped=!0;var n=a("grGL"),r=a.n(n),l=a("ajlF"),s=a.n(l),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_playlist_playlist_links"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"own_playlists"},name:{kind:"Name",value:"totara_playlist_playlists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"StringValue",value:"eyJsaW1pdCI6MCwicGFnZSI6MX0=",block:!1}},{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"EnumValue",value:"OWN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"library_view"},value:{kind:"BooleanValue",value:!0}}],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"saved_playlists"},name:{kind:"Name",value:"totara_playlist_playlists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"StringValue",value:"eyJsaW1pdCI6MCwicGFnZSI6MX0=",block:!1}},{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"EnumValue",value:"BOOKMARKED"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"library_view"},value:{kind:"BooleanValue",value:!0}}],directives:[]}]}}]}}]},d=a("oQSm"),u=a.n(d),m={components:{Contribute:r.a,ContributeModal:s.a},mixins:[u.a],data:function(){return{collection:{own:[],saved:[]}}},apollo:{collection:{query:o,update:function(e){return{saved:e.saved_playlists,own:e.own_playlists}}}}},c=a("KHd+"),p=function(e){e.options.__langStrings={totara_playlist:["yourplaylists","savedplaylists","contributeplaylist"]}},k=Object(c.a)(m,t,[],!1,null,null,null);"function"==typeof p&&p(k),k.options.__hasBlocks={script:!0,template:!0},k.options.__file="client/src/totara_playlist/components/sidepanel/PlaylistNavigation.vue";i.default=k.exports},pxdy:function(e,i){e.exports=tui.require("totara_engage/mixins/contribution_mixin")},"q/4r":function(e,i,a){var t={"./box/ResourcePlaylistBox":"9rnn","./box/ResourcePlaylistBox.vue":"9rnn","./card/AddNewPlaylistCard":"7Z/t","./card/AddNewPlaylistCard.vue":"7Z/t","./card/PlaylistCard":"Ou4H","./card/PlaylistCard.vue":"Ou4H","./card/RelatedCard":"Umwc","./card/RelatedCard.vue":"Umwc","./card/SummaryPlaylistCard":"D6YV","./card/SummaryPlaylistCard.vue":"D6YV","./contribution/Adder":"ZmuF","./contribution/Adder.vue":"ZmuF","./contribution/PlaylistResources":"g6UP","./contribution/PlaylistResources.vue":"g6UP","./form/PlaylistForm":"WHZl","./form/PlaylistForm.vue":"WHZl","./form/PlaylistTitleForm":"993f","./form/PlaylistTitleForm.vue":"993f","./grid/PlaylistResourcesGrid":"KxSD","./grid/PlaylistResourcesGrid.vue":"KxSD","./modal/ContributeModal":"efLV","./modal/ContributeModal.vue":"efLV","./page/HeaderBox":"av3q","./page/HeaderBox.vue":"av3q","./popover/PlaylistPopover":"/NNS","./popover/PlaylistPopover.vue":"/NNS","./sidepanel/PlaylistNavigation":"puam","./sidepanel/PlaylistNavigation.vue":"puam","./sidepanel/PlaylistSidePanel":"iZsO","./sidepanel/PlaylistSidePanel.vue":"iZsO","./sidepanel/PlaylistStarRating":"6Omq","./sidepanel/PlaylistStarRating.vue":"6Omq","./sidepanel/PlaylistSummary":"oHj5","./sidepanel/PlaylistSummary.vue":"oHj5","./sidepanel/Related":"TonO","./sidepanel/Related.vue":"TonO","./sidepanel/content/Playlist":"58cf","./sidepanel/content/Playlist.vue":"58cf"};function n(e){var i=r(e);return a(i)}function r(e){if(!a.o(t,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return t[e]}n.keys=function(){return Object.keys(t)},n.resolve=r,e.exports=n,n.id="q/4r"},qyfC:function(e,i){e.exports=tui.require("totara_engage/components/card/ImageHeader")},"r5/8":function(e,i){e.exports=tui.require("totara_playlist/components/sidepanel/PlaylistStarRating")},rLBA:function(e,i){e.exports=tui.require("totara_engage/components/buttons/LoadingButton")},ry4p:function(e,i){e.exports=tui.require("totara_playlist/components/card/SummaryPlaylistCard")},s5vj:function(e,i){e.exports=tui.require("totara_engage/components/contribution/BaseContent")},sy3s:function(e,i){e.exports=tui.require("totara_engage/components/sidepanel/access/AccessSetting")},tkAW:function(e,i){e.exports=tui.require("tui/components/modal/Modal")},txsu:function(e,i){e.exports=tui.require("tui/components/tabs/Tabs")},tyu8:function(e,i){e.exports=tui.require("totara_engage/index")},tzaz:function(e,i,a){var t={"./PlaylistView":"AZAN","./PlaylistView.vue":"AZAN"};function n(e){var i=r(e);return a(i)}function r(e){if(!a.o(t,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return t[e]}n.keys=function(){return Object.keys(t)},n.resolve=r,e.exports=n,n.id="tzaz"},u5iS:function(e,i){e.exports=tui.require("tui/components/modal/ModalContent")},vF5l:function(e,i){e.exports=tui.require("tui/components/buttons/Button")},vN5C:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_engage_update_bookmark"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"itemid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"bookmarked"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_engage_update_bookmark"},arguments:[{kind:"Argument",name:{kind:"Name",value:"itemid"},value:{kind:"Variable",name:{kind:"Name",value:"itemid"}}},{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"bookmarked"},value:{kind:"Variable",name:{kind:"Name",value:"bookmarked"}}}],directives:[]}]}}]}},vyVp:function(e,i){e.exports=tui.require("tui/notifications")},yHtf:function(e,i){e.exports=tui.require("totara_playlist/components/sidepanel/PlaylistSidePanel")},zEvk:function(e,i){e.exports=tui.require("totara_engage/mixins/library_mixin")}});