!function(e){function i(i){for(var n,s,o=i[0],d=i[1],l=i[2],u=0,m=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(t,s)&&t[s]&&m.push(t[s][0]),t[s]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(e[n]=d[n]);for(c&&c(i);m.length;)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,i=0;i<r.length;i++){for(var a=r[i],n=!0,o=1;o<a.length;o++){var d=a[o];0!==t[d]&&(n=!1)}n&&(r.splice(i--,1),e=s(s.s=a[0]))}return e}var n={},t={1:0},r=[];function s(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,i,a){s.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,i){if(1&i&&(e=s(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)s.d(a,n,function(i){return e[i]}.bind(null,n));return a},s.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(i,"a",i),i},s.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],d=o.push.bind(o);o.push=i,o=o.slice();for(var l=0;l<o.length;l++)i(o[l]);var c=d;r.push(["uV17",0]),a()}({"+1Jo":function(e,i){e.exports=tui.require("totara_engage/components/icons/access/computed/AccessIcon")},"+MEP":function(e,i){e.exports=tui.require("tui/components/profile/MiniProfileCard")},"+ukd":function(e,i){e.exports=tui.require("container_workspace/components/profile/DiscussionAvatar")},"0viy":function(e,i){e.exports=tui.require("tui/components/icons/common/Spinner")},"1G8L":function(e,i){e.exports=tui.require("container_workspace/components/form/EditPostDiscussionForm")},"1R7l":function(e,i){e.exports=tui.require("totara_reaction/components/SimpleLike")},"1i2V":function(e,i){e.exports=tui.require("tui/components/tabs/Tab")},"1l6u":function(e,i){e.exports=tui.require("container_workspace/components/recommend/RecommendedSpaces")},"1qGZ":function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Responsive",{staticClass:"tui-spacesPage",attrs:{breakpoints:e.boundaries},on:{"responsive-resize":function(i){e.currentBoundaryName=i}}},[a("h1",{staticClass:"tui-spacesPage__header"},[e._v("\n    "+e._s(e.$str("find_spaces","container_workspace"))+"\n  ")]),e._v(" "),a("Loader",{attrs:{loading:e.$apollo.loading,fullpage:!0}}),e._v(" "),a("WorkspaceFilter",{staticClass:"tui-spacesPage__filter",attrs:{"selected-topic":e.inner.selectedTopic,"selected-source":e.inner.selectedSource,"selected-sort":e.inner.selectedSort,"search-term":e.inner.searchTerm},on:{"submit-search":e.updateFilter}}),e._v(" "),e.$apollo.loading?e._e():a("SpaceCardsGrid",{staticClass:"tui-spacesPage__grid",attrs:{"max-grid-units":12,submitting:e.submitting,"workspace-units":e.cardUnits,workspaces:e.workspace.items},on:{"join-workspace":e.joinWorkspace}})],1)};n._withStripped=!0;var t=a("dtfu"),r=a.n(t),s=a("zkAu"),o=a.n(s),d=a("AdjL"),l=a.n(d),c=a("yc2X"),u=a.n(c),m=a("dTgY"),p=a("vyVp"),k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_find_workspaces"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"source"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_workspace_source"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topic_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_workspace_sort"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search_term"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"container_workspace_workspace_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"Variable",name:{kind:"Name",value:"source"}}},{kind:"Argument",name:{kind:"Name",value:"topic_id"},value:{kind:"Variable",name:{kind:"Name",value:"topic_id"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"workspaces"},name:{kind:"Name",value:"container_workspace_workspaces"},arguments:[{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"Variable",name:{kind:"Name",value:"source"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"topic_id"},value:{kind:"Variable",name:{kind:"Name",value:"topic_id"}}},{kind:"Argument",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]}]}}]}}]},v=a("x4nq");const _=Object.prototype.hasOwnProperty;var g={components:{SpaceCardsGrid:u.a,WorkspaceFilter:o.a,Responsive:r.a,Loader:l.a},props:{selectedTopic:{type:[String,Number],default:0},selectedSource:{type:[String,Number],default:null},selectedSort:{type:String,required:!0}},apollo:{workspace:{query:k,fetchPolicy:"network-only",variables(){return{topic_id:this.inner.selectedTopic,source:this.inner.selectedSource,sort:this.inner.selectedSort,search_term:this.inner.searchTerm}},update:({workspaces:e,cursor:i})=>({cursor:i,items:e})}},data(){return{workspace:{items:[],cursor:null},inner:{selectedTopic:this.selectedTopic,selectedSource:this.selectedSource,selectedSort:this.selectedSort,searchTerm:this.searchTerm},submitting:!1,currentBoundaryName:"l"}},computed:{boundaries(){let e=Object.values(m.cardGrid);return Array.prototype.map.call(e,({boundaries:e,name:i})=>({boundaries:e,name:i}))},cardUnits(){if(!_.call(m.cardGrid,this.currentBoundaryName))return 2;let{cardUnits:e}=m.cardGrid[this.currentBoundaryName];return e}},methods:{updateFilter({topic:e,source:i,sort:a,searchTerm:n}){this.inner.selectedTopic=e,this.inner.selectedSource=i,this.inner.selectedSort=a,this.inner.searchTerm=n},async joinWorkspace(e){if(!this.submitting){this.submitting=!0;try{await this.$apollo.mutate({mutation:v.a,refetchAll:!1,variables:{workspace_id:e},update:(i,{data:{member:{workspace_interactor:a}}})=>{const n={topic_id:this.inner.selectedTopic,source:this.inner.selectedSource,sort:this.inner.selectedSort,search_term:this.inner.searchTerm};let{workspaces:t,cursor:r}=i.readQuery({query:k,variables:n});i.writeQuery({query:k,variables:n,data:{cursor:r,workspaces:Array.prototype.map.call(t,i=>(i.id==e&&((i=Object.assign({},i)).interactor=a),i))}})}})}catch(e){await Object(p.notify)({message:this.$str("error:join_space","container_workspace"),type:"error"})}finally{this.submitting=!1}}}}},f=a("KHd+"),b=function(e){e.options.__langStrings={container_workspace:["find_spaces","error:join_space"]}},N=Object(f.a)(g,n,[],!1,null,null,null);"function"==typeof b&&b(N),N.options.__hasBlocks={script:!0,template:!0},N.options.__file="client/src/container_workspace/pages/SpacesPage.vue";i.default=N.exports},"2wx7":function(e,i){e.exports=tui.require("editor_weka/components/Weka")},"3MFw":function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Form",{staticClass:"tui-workspaceDescriptionForm",attrs:{vertical:!0,"input-width":"full"}},[e.editorMounted?e._e():a("div",{staticClass:"tui-workspaceDescriptionForm__loader"},[a("Spinner")],1),e._v(" "),a("FormRow",{directives:[{name:"show",rawName:"v-show",value:e.editorMounted,expression:"editorMounted"}],staticClass:"tui-workspaceDescriptionForm__formRow",attrs:{label:e.$str("description_label","container_workspace"),hidden:!0},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id,t=i.label;return[a("Weka",{staticClass:"tui-workspaceDescriptionForm__formRow__editor",attrs:{id:n,"aria-disabled":e.submitting,doc:e.description.content,placeholder:t,component:"container_workspace",area:"description"},on:{"editor-mounted":function(i){e.editorMounted=!0},update:e.updateDescription}})]}}])}),e._v(" "),a("ButtonGroup",{staticClass:"tui-workspaceDescriptionForm__buttonGroup"},[a("LoadingButton",{attrs:{type:"submit",small:!0,primary:!0,text:e.$str("save","container_workspace"),disabled:e.submitting,loading:e.submitting},on:{click:function(i){return i.preventDefault(),e.submit(i)}}}),e._v(" "),a("Button",{attrs:{type:"button",text:e.$str("cancel","moodle"),styleclass:{small:!0},disabled:e.submitting},on:{click:function(i){return i.preventDefault(),e.$emit("cancel")}}})],1)],1)};n._withStripped=!0;var t=a("nEm4"),r=a.n(t),s=a("i/kK"),o=a.n(s),d=a("2wx7"),l=a.n(d),c=a("0viy"),u=a.n(c),m=a("BN8m"),p=a.n(m),k=a("vF5l"),v=a.n(k),_=a("rLBA"),g=a.n(_),f=a("TXEh"),b={components:{LoadingButton:g.a,Form:r.a,FormRow:o.a,Weka:l.a,Spinner:u.a,Button:v.a,ButtonGroup:p.a},props:{submitting:Boolean,descriptionContent:{type:Object,default:()=>null}},data:()=>({description:{content:null,empty:!0},editorMounted:!1}),watch:{descriptionContent(e){this.description.content=e,this.description.empty=!1,null===e&&(this.description.empty=!0)}},created(){this.descriptionContent&&(this.description.content=JSON.parse(this.descriptionContent),this.description.empty=!1)},methods:{$_readJSON:Object(f.debounce)((function(e){this.description.content=e.getJSON(),this.description.empty=e.isEmpty()}),250),updateDescription(e){this.$_readJSON(e)},submit(){let e=null;this.description.empty||(e=JSON.stringify(this.description.content)),this.$emit("submit",{description:e})}}},N=a("KHd+"),w=function(e){e.options.__langStrings={container_workspace:["description_label","save"],moodle:["cancel"]}},h=Object(N.a)(b,n,[],!1,null,null,null);"function"==typeof w&&w(h),h.options.__hasBlocks={script:!0,template:!0},h.options.__file="client/src/container_workspace/components/form/WorkspaceDescriptionForm.vue";i.default=h.exports},"3wZ/":function(e,i){e.exports=tui.require("tui/components/icons/common/Warning")},"48jh":function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-discussionFilter"},[a("div",{staticClass:"tui-discussionFilter__search"},[a("SearchBox",{staticClass:"tui-discussionFilter__search__searchBox",attrs:{"aria-label":e.$str("search_discussions","container_workspace"),"label-visible":!1,placeholder:e.$str("search_discussions","container_workspace")},on:{submit:function(i){return e.$emit("update-search-term",e.innerSearchTerm)}},model:{value:e.innerSearchTerm,callback:function(i){e.innerSearchTerm=i},expression:"innerSearchTerm"}}),e._v(" "),a("a",{staticClass:"tui-discussionFilter__search__link",attrs:{href:e.$url("/container/type/workspace/workspace_files.php",{id:e.workspaceId})}},[e._v("\n      "+e._s(e.$str("browse_files","container_workspace"))+"\n    ")])],1),e._v(" "),e._t("pinned-discussions"),e._v(" "),a("div",{staticClass:"tui-discussionFilter__sortBox"},[a("SelectFilter",{attrs:{label:e.$str("sortby","moodle"),"show-label":!0,options:e.sortOptions},model:{value:e.innerSort,callback:function(i){e.innerSort=i},expression:"innerSort"}})],1)],2)};n._withStripped=!0;var t=a("HSAV"),r=a.n(t),s=a("49h4"),o=a.n(s),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_discussion_filter_options"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"sorts"},name:{kind:"Name",value:"container_workspace_discussion_sorts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]},l={components:{SearchBox:r.a,SelectFilter:o.a},props:{searchTerm:String,sort:{type:String,required:!0},workspaceId:{type:[Number,String],required:!0}},apollo:{sortOptions:{query:d,update:({sorts:e})=>Array.prototype.map.call(e,({value:e,label:i})=>({label:i,id:e}))}},data(){return{innerSearchTerm:this.searchTerm,innerSort:this.sort,sortOptions:[]}},watch:{sort(e){e!==this.innerSort&&(this.innerSort=e)},searchTerm(e){this.innerSearchTerm=e},innerSort(e){e!==this.sort&&this.$emit("update-sort",e)}}},c=a("KHd+"),u=function(e){e.options.__langStrings={container_workspace:["search_discussions","browse_files"],moodle:["sortby"]}},m=Object(c.a)(l,n,[],!1,null,null,null);"function"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0},m.options.__file="client/src/container_workspace/components/filter/DiscussionFilter.vue";i.default=m.exports},"49h4":function(e,i){e.exports=tui.require("tui/components/filters/SelectFilter")},"4B50":function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceContributeCard"},[a("Card",{staticClass:"tui-workspaceContributeCard__card"},[a("Contribute",{attrs:{adder:{text:e.$str("select_existing_resource","container_workspace"),destination:e.$str("to_share_with_workspace","container_workspace")},"show-text":!1,"show-icon":!0,styleclass:{circle:!0,primary:!0},size:500,container:e.container},on:{done:function(i){return e.$emit("contribute",i)},"open-adder":function(i){e.showAdder=!0}}})],1),e._v(" "),a("Share",{attrs:{"grid-direction":"horizontal","workspace-id":e.instanceId,"show-adder":e.showAdder,units:12},on:{close:function(i){e.showAdder=!1}}})],1)};n._withStripped=!0;var t=a("jJ8l"),r=a.n(t),s=a("grGL"),o=a.n(s),d=a("tyu8"),l=a("LgKJ"),c=a.n(l),u=a("QgbB"),m={components:{Card:r.a,Contribute:o.a,Share:c.a},props:{instanceId:{type:[Number,String],required:!0}},data:()=>({workspace:{},showAdder:!1}),apollo:{workspace:{query:u.a,variables(){return{id:this.instanceId}}}},computed:{container(){return{instanceId:this.instanceId,component:"container_workspace",access:d.AccessManager.PUBLIC,autoShareRecipient:!0,area:"LIBRARY",name:this.workspace.name}}}},p=a("KHd+"),k=function(e){e.options.__langStrings={container_workspace:["select_existing_resource","to_share_with_workspace"]}},v=Object(p.a)(m,n,[],!1,null,null,null);"function"==typeof k&&k(v),v.options.__hasBlocks={script:!0,template:!0},v.options.__file="client/src/container_workspace/components/card/WorkspaceContributeCard.vue";i.default=v.exports},"4Mpf":function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceFileFilter"},[e.$apollo.loading?e._e():[a("FilterBar",{staticClass:"tui-workspaceFileFilter__filter",attrs:{title:e.$str("files","container_workspace")},scopedSlots:e._u([{key:"filters-left",fn:function(i){var n=i.stacked;return[a("SelectFilter",{staticClass:"tui-workspaceFileFilter__label",attrs:{label:e.$str("file_format","container_workspace"),"show-label":!0,options:e.filter.extensions,stacked:n},on:{input:function(i){return e.$emit("update-filter",e.selection)}},model:{value:e.selection.extension,callback:function(i){e.$set(e.selection,"extension",i)},expression:"selection.extension"}})]}}],null,!1,1626062552)}),e._v(" "),e.showSort?a("SelectFilter",{staticClass:"tui-workspaceFileFilter__sortFilter",attrs:{label:e.$str("sortby","moodle"),"show-label":!0,options:e.filter.sorts},on:{input:function(i){return e.$emit("update-filter",e.selection)}},model:{value:e.selection.sort,callback:function(i){e.$set(e.selection,"sort",i)},expression:"selection.sort"}}):e._e()]],2)};n._withStripped=!0;var t=a("59Wj"),r=a.n(t),s=a("49h4"),o=a.n(s),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_file_filter_options"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"sorts"},name:{kind:"Name",value:"container_workspace_file_sorts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"extensions"},name:{kind:"Name",value:"container_workspace_file_extensions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]},l={components:{FilterBar:r.a,SelectFilter:o.a},props:{selectedSort:{type:String,required:!0},selectedExtension:{type:String,default:""},workspaceId:{type:[Number,String],required:!0},showSort:{type:Boolean,required:!0}},apollo:{filter:{query:d,variables(){return{workspace_id:this.workspaceId}},update({sorts:e,extensions:i}){return(i=Array.prototype.map.call(i,({value:e,label:i})=>({id:e,label:i}))).unshift({id:"",label:this.$str("all","moodle")}),{extensions:i,sorts:Array.prototype.map.call(e,({label:e,value:i})=>({id:i,label:e}))}}}},data(){return{selection:{sort:this.selectedSort,extension:this.selectedExtension}}}},c=a("KHd+"),u=function(e){e.options.__langStrings={container_workspace:["file_format","files","no_file_found"],moodle:["sortby","all"]}},m=Object(c.a)(l,n,[],!1,null,null,null);"function"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0},m.options.__file="client/src/container_workspace/components/filter/WorkspaceFileFilter.vue";i.default=m.exports},"59Wj":function(e,i){e.exports=tui.require("tui/components/filters/FilterBar")},"5gBL":function(e,i){e.exports=tui.require("container_workspace/components/card/DiscussionCard")},"5h9J":function(e,i){e.exports=tui.require("tui/components/buttons/ButtonIcon")},"5qAA":function(e,i){e.exports=tui.require("tui/components/datatable/HeaderCell")},"6bRg":function(e,i){e.exports=tui.require("container_workspace/components/sidepanel/WorkspaceControlMenu")},"8opU":function(e,i){e.exports=tui.require("container_workspace/components/form/WorkspaceAccessForm")},"8shQ":function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Layout",{staticClass:"tui-workspacePage",attrs:{"show-left-side-panel-control":!1,"show-left-side-panel":!0,"show-right-side-panel":!0,"left-side-panel-initially-open":!0,"right-side-panel-initially-open":!0,"right-side-panel-animated":!0,breakpoints:e.breakPoints,boundaries:e.boundaries},on:{"responsive-resize":function(i){e.currentBoundaryName=i}},scopedSlots:e._u([e.$apollo.loading?null:{key:"sidePanelLeft",fn:function(){return[e.onLargeScreen?a("WorkspaceMenu",{attrs:{"selected-workspace-id":e.workspaceId}}):a("WorkspacePageHeader",{staticClass:"tui-workspacePage__head",attrs:{"workspace-id":e.workspace.id,"workspace-image":e.workspace.image,"workspace-name":e.workspace.name,"show-navigation":!0}})]},proxy:!0},{key:"column",fn:function(i){var n=i.units,t=i.gridDirection;return[e.$apollo.loading?e._e():a("div",{staticClass:"tui-workspacePage__mainContent"},["large"===e.currentBoundaryName?a("WorkspacePageHeader",{staticClass:"tui-workspacePage__mainContent__head",attrs:{"workspace-id":e.workspace.id,"workspace-image":e.workspace.image,"workspace-name":e.workspace.name}}):e._e(),e._v(" "),a("Tabs",{staticClass:"tui-workspacePage__mainContent__tabs",attrs:{direction:"horizontal"},model:{value:e.innerSelectedTab,callback:function(i){e.innerSelectedTab=i},expression:"innerSelectedTab"}},e._l(e.tabs,(function(e,i){var n=e.id,t=e.name;return a("Tab",{key:i,staticClass:"tui-workspacePage__mainContent__tabs__tab",attrs:{id:n,name:t}})})),1),e._v(" "),"members"===e.innerSelectedTab?a("WorkspaceMembersTab",{attrs:{"workspace-id":e.workspaceId,"total-members":e.workspace.total_members,"selected-sort":e.memberSortOption}}):e._e(),e._v(" "),"discussion"===e.innerSelectedTab?a("WorkspaceDiscussionTab",{attrs:{"selected-sort":e.discussionSortOption,"workspace-id":e.workspaceId}}):e._e(),e._v(" "),"library"===e.innerSelectedTab?a("WorkspaceLibraryTab",{attrs:{"workspace-id":e.workspaceId,units:n,"grid-direction":t}}):e._e()],1)]}},{key:"sidePanelRight",fn:function(i){i.units;return[a("WorkspaceSidePanel",{attrs:{"workspace-id":e.workspaceId}})]}}],null,!0)})};n._withStripped=!0;var t=a("AMZF"),r=a.n(t),s=a("Hl3G"),o=a.n(s),d=a("NHyM"),l=a.n(d),c=a("txsu"),u=a.n(c),m=a("1i2V"),p=a.n(m),k=a("Pn5P"),v=a.n(k),_=a("DPa1"),g=a.n(_),f=a("tBMW"),b=a.n(f),N=a("TBZn"),w=a("O3Z6"),h=a.n(w),y=a("vyVp"),S=a("QgbB"),F=a("t5mg"),C={components:{Layout:r.a,WorkspaceMenu:o.a,WorkspaceSidePanel:l.a,Tabs:u.a,Tab:p.a,WorkspaceMembersTab:v.a,WorkspaceDiscussionTab:g.a,WorkspaceLibraryTab:b.a,WorkspacePageHeader:h.a},props:{workspaceId:{type:[Number,String],required:!0},memberSortOption:{type:String,required:!0},discussionSortOption:{type:String,required:!0},selectedTab:{type:String,default:"discussion",validator:e=>"discussion"===e||"members"===e||"library"===e}},apollo:{workspace:{query:S.a,variables(){return{id:this.workspaceId}}},notifications:{query:F.a,update:()=>[],result({data:{notifications:e}}){Array.prototype.forEach.call(e,({message:e,type:i})=>{Object(y.notify)({message:e,type:i,duration:5e3})})}}},data(){return{innerSelectedTab:this.selectedTab,workspace:{},currentBoundaryName:"large"}},computed:{breakPoints:()=>N.workspaceBreakPoint,boundaries:()=>N.workspaceBoundaries,onLargeScreen(){return"large"===this.currentBoundaryName},tabs(){return[{id:"discussion",name:this.$str("discuss_tab_label","container_workspace")},{id:"library",name:this.$str("library_tab_label","container_workspace")},{id:"members",name:this.$str("member_tab_label","container_workspace",this.workspace.total_members)}]}}},x=a("KHd+"),A=function(e){e.options.__langStrings={container_workspace:["discuss_tab_label","library_tab_label","member_tab_label","notification_deleted"]}},V=Object(x.a)(C,n,[],!1,null,null,null);"function"==typeof A&&A(V),V.options.__hasBlocks={script:!0,template:!0},V.options.__file="client/src/container_workspace/pages/WorkspacePage.vue";i.default=V.exports},"9G+f":function(e,i){e.exports=tui.require("tui/components/popover/Popover")},A300:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspacePageHeader"},[a("div",{staticClass:"tui-workspacePageHeader__img",style:{"background-image":"url('"+e.workspaceImage+"')"},attrs:{title:e.$str("workspace_image_alt","container_workspace"),role:"img","aria-label":e.$str("workspace_image_alt","container_workspace")}}),e._v(" "),a("div",{staticClass:"tui-workspacePageHeader__head"},[a("div",{staticClass:"tui-workspacePageHeader__head__control"},[a("h1",{staticClass:"tui-workspacePageHeader__head__control__title"},[e._v("\n        "+e._s(e.workspaceName)+"\n      ")]),e._v(" "),e.showNavigation?a("ButtonIcon",{staticClass:"tui-workspacePageHeader__head__control__buttonIcon",attrs:{"aria-label":e.buttonMenuAriaLabel,styleclass:{small:!0,transparentNoPadding:!0}},on:{click:function(i){i.preventDefault(),e.showMenu=!e.showMenu}}},[a("ShowIcon")],1):e._e()],1),e._v(" "),a("WorkspaceMenu",{directives:[{name:"show",rawName:"v-show",value:e.showMenu&&e.showNavigation,expression:"showMenu && showNavigation"}],staticClass:"tui-workspacePageHeader__head__menu",attrs:{"selected-workspace-id":e.workspaceId}})],1)])};n._withStripped=!0;var t=a("Hl3G"),r=a.n(t),s=a("5h9J"),o=a.n(s),d=a("CXEF"),l=a.n(d),c={components:{WorkspaceMenu:r.a,ButtonIcon:o.a,ShowIcon:l.a},props:{workspaceImage:{type:String,required:!0},workspaceId:{type:[Number,String],required:!0},workspaceName:{type:String,required:!0},showNavigation:Boolean},data:()=>({showMenu:!1}),computed:{buttonMenuAriaLabel(){return this.showMenu?this.$str("collapse_nav","container_workspace"):this.$str("expand_nav","container_workspace")}}},u=a("KHd+"),m=function(e){e.options.__langStrings={container_workspace:["workspace_image_alt","collapse_nav","expand_nav","workspace_image_alt"]}},p=Object(u.a)(c,n,[],!1,null,null,null);"function"==typeof m&&m(p),p.options.__hasBlocks={script:!0,template:!0},p.options.__file="client/src/container_workspace/components/head/WorkspacePageHeader.vue";i.default=p.exports},"AL+t":function(e,i){e.exports=tui.require("tui/components/json_editor/nodes/VideoBlock")},AMZF:function(e,i){e.exports=tui.require("tui/components/layouts/LayoutOneColumnWithMultiSidePanel")},AdjL:function(e,i){e.exports=tui.require("tui/components/loader/Loader")},BC15:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-contributeWorkspace"},[a("ModalPresenter",{attrs:{open:e.openModal},on:{"request-close":function(i){e.openModal=!1}}},[a("WorkspaceModal",{on:{"create-workspace":e.createWorkspace}})],1),e._v(" "),a("ButtonIcon",{staticClass:"tui-contributeWorkspace__button",attrs:{"aria-label":e.buttonAriaLabel,styleclass:{circle:!0,xsmall:!0},disabled:e.disabled},on:{click:function(i){i.preventDefault(),e.openModal=!0}}},[a("AddIcon")],1)],1)};n._withStripped=!0;var t=a("5h9J"),r=a.n(t),s=a("vgT7"),o=a.n(s),d=a("Mnur"),l=a.n(d),c=a("cNVA"),u=a.n(c),m={components:{ButtonIcon:r.a,AddIcon:o.a,ModalPresenter:l.a,WorkspaceModal:u.a},props:{disabled:Boolean,buttonAriaLabel:{type:String,default(){return this.$str("create_space","container_workspace")}}},data:()=>({submitting:!1,openModal:!1}),methods:{createWorkspace(e){this.openModal=!1,this.$emit("create-workspace",e)}}},p=a("KHd+"),k=function(e){e.options.__langStrings={container_workspace:["create_space"]}},v=Object(p.a)(m,n,[],!1,null,null,null);"function"==typeof k&&k(v),v.options.__hasBlocks={script:!0,template:!0},v.options.__file="client/src/container_workspace/components/create/ContributeWorkspace.vue";i.default=v.exports},BMq0:function(e,i){e.exports=tui.require("container_workspace/components/filter/MemberSearchBox")},BN8m:function(e,i){e.exports=tui.require("tui/components/buttons/ButtonGroup")},BPqQ:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Form",{staticClass:"tui-workspaceAccessForm",attrs:{vertical:!0,"input-width":"full"}},[a("FormRow",{staticClass:"tui-workspaceAccessForm__formRow",attrs:{label:e.$str("assign_topics_label","container_workspace"),helpmsg:e.$str("assigntopicshelp","totara_topic")},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("TopicsSelector",{attrs:{id:n,"selected-topics":e.topics},on:{change:function(i){e.topics=i}}})]}}])}),e._v(" "),a("ButtonGroup",{staticClass:"tui-workspaceAccessForm__buttonGroup"},[a("LoadingButton",{attrs:{text:e.$str("save","container_workspace"),primary:!0,small:!0,disabled:0===e.topics.length||e.submitting,loading:e.submitting},on:{click:function(i){return e.$emit("submit",{topics:e.topics})}}}),e._v(" "),a("Button",{attrs:{text:e.$str("cancel","moodle"),styleclass:{small:!0},disabled:e.submitting},on:{click:function(i){return i.preventDefault(),e.$emit("cancel")}}})],1)],1)};n._withStripped=!0;var t=a("i/kK"),r=a.n(t),s=a("nEm4"),o=a.n(s),d=a("K1nw"),l=a.n(d),c=a("vF5l"),u=a.n(c),m=a("BN8m"),p=a.n(m),k=a("rLBA"),v=a.n(k),_={components:{Form:o.a,FormRow:r.a,TopicsSelector:l.a,Button:u.a,ButtonGroup:p.a,LoadingButton:v.a},props:{submitting:Boolean,selectedTopics:{type:Array,default:()=>[],validator:e=>0===(e=Array.prototype.filter.call(e,e=>!("id"in e)||!("value"in e))).length}},data(){return{topics:Array.prototype.slice.call(this.selectedTopics)}}},g=a("KHd+"),f=function(e){e.options.__langStrings={container_workspace:["assign_topics_label","save"],totara_topic:["assigntopicshelp"],moodle:["cancel"]}},b=Object(g.a)(_,n,[],!1,null,null,null);"function"==typeof f&&f(b),b.options.__hasBlocks={script:!0,template:!0},b.options.__file="client/src/container_workspace/components/form/WorkspaceAccessForm.vue";i.default=b.exports},BaY1:function(e,i){e.exports=tui.require("tui/components/sidepanel/SidePanel")},BxDI:function(e,i){e.exports=tui.require("tui/components/decor/Separator")},CWIl:function(e,i){e.exports=tui.require("totara_engage/grid")},CXEF:function(e,i){e.exports=tui.require("tui/components/icons/common/Show")},CdXQ:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-postDiscussionForm"},[a("PostAvatar",{attrs:{"profile-url":e.avatarImageUrl,"image-alt":e.avatarImageAlt,"image-src":e.avatarImageSrc}}),e._v(" "),a("WorkspaceDiscussionForm",{staticClass:"tui-postDiscussionForm__form",attrs:{submitting:e.submitting,"show-cancel-button":!1},on:{submit:function(i){return e.$emit("submit",i)}}})],1)};n._withStripped=!0;var t=a("w2wx"),r=a.n(t),s=a("M3bB"),o=a.n(s),d={components:{PostAvatar:r.a,WorkspaceDiscussionForm:o.a},props:{avatarImageUrl:{type:String,required:!0},avatarImageAlt:{type:String,required:!0},avatarImageSrc:{type:String,required:!0},submitting:Boolean}},l=a("KHd+"),c=Object(l.a)(d,n,[],!1,null,null,null);c.options.__hasBlocks={script:!0,template:!0},c.options.__file="client/src/container_workspace/components/form/PostDiscussionForm.vue";i.default=c.exports},CiZ3:function(e,i){e.exports=tui.require("totara_engage/components/form/Upload")},D9If:function(e,i){e.exports=tui.require("tui/components/grid/GridItem")},DPa1:function(e,i){e.exports=tui.require("container_workspace/components/content/tabs/WorkspaceDiscussionTab")},"Emo+":function(e,i){e.exports=tui.require("container_workspace/components/card/DiscussionWithCommentCard")},F98r:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceFileHeader"},[a("div",{staticClass:"tui-workspaceFileHeader__back"},[a("ButtonIcon",{attrs:{styleclass:{transparent:!0},"aria-label":e.$str("back","moodle"),text:e.$str("back","moodle")},on:{click:function(i){return e.$emit("go-back")}}},[a("BackArrow",{attrs:{size:"200",alt:e.$str("back","moodle")}})],1)],1),e._v(" "),a("div",{staticClass:"tui-workspaceFileHeader__title"},[e._v("\n    "+e._s(e.$str("files","container_workspace"))+"\n  ")])])};n._withStripped=!0;var t=a("Lht0"),r=a.n(t),s=a("5h9J"),o=a.n(s),d={components:{BackArrow:r.a,ButtonIcon:o.a}},l=a("KHd+"),c=function(e){e.options.__langStrings={moodle:["back"],container_workspace:["files"]}},u=Object(l.a)(d,n,[],!1,null,null,null);"function"==typeof c&&c(u),u.options.__hasBlocks={script:!0,template:!0},u.options.__file="client/src/container_workspace/components/head/WorkspaceFileHeader.vue";i.default=u.exports},FoZm:function(e,i){e.exports=tui.require("tui/format")},GF1c:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("LayoutTwoColumn",{staticClass:"tui-workspaceFilePage",on:{"direction-change":function(i){e.direction=i}},scopedSlots:e._u([{key:"left",fn:function(){return[a("SidePanel",{staticClass:"tui-workspaceFilePage__sidePanel",attrs:{"show-button-control":!1,"initially-open":!0,"limit-height":!1}},[e.showScreen?a("WorkspaceMenu",{staticClass:"tui-workspaceFilePage__sidePanel__menu",attrs:{"selected-workspace-id":e.workspaceId},on:{"create-workspace":e.navigateToWorkspace}}):a("WorkspaceControlMenu",{staticClass:"tui-workspacePage__head",attrs:{"workspace-id":e.workspaceId,"workspace-name":e.workspaceName,"show-navigation":!0}})],1)]},proxy:!0},{key:"right",fn:function(){return[e.$apollo.loading?e._e():a("div",{staticClass:"tui-workspaceFilePage__content"},[a("WorkspaceFileHeader",{on:{"go-back":e.goBack}}),e._v(" "),a("WorkspaceFileFilter",{attrs:{"selected-sort":e.inner.selectedSort,"selected-extension":e.inner.selectedExtension,"workspace-id":e.workspaceId,"show-sort":e.totalFiles>0},on:{"update-filter":e.updateFilter}}),e._v(" "),e.$apollo.loading||0!==e.totalFiles?a("WorkspaceFileTable",{attrs:{"workspace-id":e.workspaceId,"selected-sort":e.inner.selectedSort,"selected-extension":e.inner.selectedExtension},on:{open:e.handleOpen}}):a("p",{staticClass:"tui-workspaceFilePage__content__message"},[e._v("\n        "+e._s(e.$str("no_file_found","container_workspace"))+"\n      ")]),e._v(" "),a("ModalPresenter",{attrs:{open:e.openModal},on:{"request-close":function(i){e.openModal=!1}}},[a("WorkspaceFileViewModal",{attrs:{"file-name":e.innerFile.fileName,"download-url":e.innerFile.downloadUrl,"context-url":e.innerFile.contextUrl,"mime-type":e.innerFile.mimeType,extension:e.innerFile.extension,"file-type":e.innerFile.fileType,"alt-text":e.innerFile.altText,"file-url":e.innerFile.fileUrl}})],1)],1)]},proxy:!0}])})};n._withStripped=!0;var t=a("dj/p"),r=a.n(t),s=a("Hl3G"),o=a.n(s),d=a("BaY1"),l=a.n(d),c=a("zizw"),u=a.n(c),m=a("VI/h"),p=a.n(m),k=a("drxS"),v=a.n(k),_=a("Mnur"),g=a.n(_),f=a("xO7t"),b=a.n(f),N=a("6bRg"),w=a.n(N),h=a("ao45"),y={components:{SidePanel:l.a,LayoutTwoColumn:r.a,WorkspaceMenu:o.a,WorkspaceFileHeader:u.a,WorkspaceFileFilter:p.a,WorkspaceFileTable:v.a,ModalPresenter:g.a,WorkspaceFileViewModal:b.a,WorkspaceControlMenu:w.a},props:{workspaceId:{type:[Number,String],required:!0},selectedSort:{type:String,required:!0},selectedExtension:{type:String,default:""},workspaceName:{type:String,required:!0}},apollo:{totalFiles:{query:h.a,variables(){return{workspace_id:this.workspaceId,extension:this.inner.selectedExtension,sort:this.inner.selectedSort}},update:({cursor:e})=>parseInt(e.total,10)}},data(){return{totalFiles:0,inner:{selectedSort:this.selectedSort,selectedExtension:this.selectedExtension},openModal:!1,innerFile:{fileName:null,extension:null,downloadUrl:null,contextUrl:null,fileUrl:null,mimeType:null,fileType:null,altText:null},direction:"horizontal"}},computed:{showScreen(){return"horizontal"===this.direction}},methods:{updateFilter({extension:e,sort:i}){this.inner.selectedExtension=e,this.inner.selectedSort=i,this.currentPage=1},navigateToWorkspace({id:e}){document.location.href=this.$url("/container/type/workspace/workspace.php",{id:e})},goBack(){document.location.href=this.$url("/container/type/workspace/workspace.php?",{id:this.workspaceId})},handleOpen({file_name:e,extension:i,context_url:a,download_url:n,file_url:t,mimetype:r,file_type:s,alt_text:o}){this.innerFile.fileName=e,this.innerFile.extension=i,this.innerFile.contextUrl=a,this.innerFile.downloadUrl=n,this.innerFile.mimeType=r,this.innerFile.fileType=s,this.innerFile.altText=o||this.$str("imagealt","moodle"),this.innerFile.fileUrl=t,this.openModal=!0}}},S=a("KHd+"),F=function(e){e.options.__langStrings={moodle:["imagealt"]}},C=Object(S.a)(y,n,[],!1,null,null,null);"function"==typeof F&&F(C),C.options.__hasBlocks={script:!0,template:!0},C.options.__file="client/src/container_workspace/pages/WorkspaceFilePage.vue";i.default=C.exports},"H/tB":function(e,i){e.exports=tui.require("tui/tui")},HKzo:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Modal",{staticClass:"tui-workspaceModal",attrs:{size:"large",dismissable:{esc:!0,backdropClick:!1,overlayClose:!1}}},[a("ModalContent",{staticClass:"tui-workspaceModal__content",attrs:{"close-button":!1,title:e.$str("create_space","container_workspace")}},[a("WorkspaceForm",{staticClass:"tui-workspaceModal__content__form",attrs:{submittin:e.submitting},on:{submit:e.createWorkspace,cancel:function(i){return e.$emit("request-close")}}})],1)],1)};n._withStripped=!0;var t=a("tkAW"),r=a.n(t),s=a("gsPT"),o=a.n(s),d=a("u5iS"),l=a.n(d),c=a("vyVp"),u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_create_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topics"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspace"},name:{kind:"Name",value:"container_workspace_create"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}},{kind:"Argument",name:{kind:"Name",value:"description_format"},value:{kind:"Variable",name:{kind:"Name",value:"description_format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}},{kind:"Argument",name:{kind:"Name",value:"topics"},value:{kind:"Variable",name:{kind:"Name",value:"topics"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner_job_assignments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]}}]},m={components:{Modal:r.a,ModalContent:l.a,WorkspaceForm:o.a},data:()=>({submitting:!1}),methods:{async createWorkspace({name:e,description:i,topics:a,draftId:n}){if(!this.submitting){this.submitting=!0;try{const{data:{workspace:t}}=await this.$apollo.mutate({mutation:u,refetchAll:!1,variables:{name:e,description:i,topics:a,draft_id:n}});this.$emit("create-workspace",t)}catch(e){await Object(c.notify)({message:this.$str("error:create","container_workspace"),type:"error"})}finally{this.submitting=!1}}}}},p=a("KHd+"),k=function(e){e.options.__langStrings={container_workspace:["create_space","error:create"]}},v=Object(p.a)(m,n,[],!1,null,null,null);"function"==typeof k&&k(v),v.options.__hasBlocks={script:!0,template:!0},v.options.__file="client/src/container_workspace/components/modal/WorkspaceModal.vue";i.default=v.exports},HSAV:function(e,i){e.exports=tui.require("tui/components/form/SearchBox")},HgPy:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement;return(e._self._c||i)("SearchBox",{attrs:{"label-visible":!1,"aria-label":e.$str("search_members","container_workspace")},on:{submit:function(i){return e.$emit("submit",e.innerSearchTerm)}},model:{value:e.innerSearchTerm,callback:function(i){e.innerSearchTerm=i},expression:"innerSearchTerm"}})};n._withStripped=!0;var t=a("HSAV"),r={components:{SearchBox:a.n(t).a},props:{searchTerm:{type:String,default:""}},data(){return{innerSearchTerm:this.searchTerm}},watch:{searchTerm(e){this.innerSearchTerm=e}}},s=a("KHd+"),o=function(e){e.options.__langStrings={container_workspace:["search_members"]}},d=Object(s.a)(r,n,[],!1,null,null,null);"function"==typeof o&&o(d),d.options.__hasBlocks={script:!0,template:!0},d.options.__file="client/src/container_workspace/components/filter/MemberSearchBox.vue";i.default=d.exports},Hl3G:function(e,i){e.exports=tui.require("container_workspace/components/sidepanel/WorkspaceMenu")},"IMG+":function(e,i){e.exports=tui.require("container_workspace/components/sidepanel/content/WorkspaceDescription")},K1nw:function(e,i){e.exports=tui.require("totara_topic/components/form/TopicsSelector")},KGcv:function(e,i){e.exports=tui.require("tui/components/dropdown/DropdownItem")},KGot:function(e,i){e.exports=tui.require("tui/components/datatable/Cell")},KJhw:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceMembersTab"},[a("div",{staticClass:"tui-workspaceMembersTab__head"},[a("MemberSearchBox",{attrs:{"search-term":e.searchTerm},on:{submit:function(i){e.searchTerm=i}}})],1),e._v(" "),e.$apollo.queries.filter.loading?e._e():a("div",{staticClass:"tui-workspaceMembersTab__content"},[a("div",{staticClass:"tui-workspaceMembersTab__content__head"},[a("h3",{staticClass:"tui-workspaceMembersTab__content__head__title"},[a("span",[e._v(e._s(e.totalMemberText))])]),e._v(" "),a("SelectFilter",{attrs:{options:e.filter.sorts,label:e.$str("sortby","moodle"),"aria-label":e.$str("sortby","moodle")},model:{value:e.sort,callback:function(i){e.sort=i},expression:"sort"}})],1),e._v(" "),a("div",{staticClass:"tui-workspaceMembersTab__content__members"},[a("VirtualScroll",{attrs:{"data-key":"id","data-list":e.member.items,"aria-label":"MembersList","is-loading":e.$apollo.queries.member.loading,"page-mode":!0},on:{scrollbottom:e.onScrollToBottom},scopedSlots:e._u([{key:"item",fn:function(i){var n=i.item,t=i.posInSet,r=i.setSize;return[a("WorkspaceMemberCard",{staticClass:"tui-workspaceMembersTab__content__members__member",attrs:{"user-id":n.id,"user-full-name":n.user.fullname,"user-email":n.user.email,"profile-image-alt":n.user.profileimagealt||"","profile-image-url":n.user.profileimageurl,"job-assignments":n.job_assignments,"delete-able":n.member_interactor.can_remove,"workspace-id":e.workspaceId,"aria-posinset":t,"aria-setsize":r,"aria-labelledby":e.$id("item-"+n.id),"label-id":e.$id("item-"+n.id)},on:{"remove-member":e.removeMember}})]}},{key:"footer",fn:function(){return[a("PageLoader",{attrs:{fullpage:!1,loading:e.$apollo.queries.member.loading}})]},proxy:!0}],null,!1,1291397577)}),e._v(" "),e.isLoadMoreVisible&&e.member.cursor.next&&!e.$apollo.queries.member.loading?a("div",{staticClass:"tui-workspaceMembersTab__content__members__loadMoreContainer"},[a("div",{staticClass:"tui-workspaceMembersTab__content__members__viewedMembers"},[[e._v("\n            "+e._s(e.$str("vieweditems","container_workspace",e.member.items.length))+"\n            "+e._s(e.totalMemberText)+"\n          ")]],2),e._v(" "),a("Button",{staticClass:"tui-workspaceMembersTab__content__members__loadMore",attrs:{text:e.$str("loadmore","container_workspace")},on:{click:e.loadMore}})],1):e._e(),e._v(" "),e.member.items.length<=0&&!e.$apollo.queries.member.loading?a("p",{staticClass:"tui-workspaceMembersTab__content__members__message"},[e._v("\n        "+e._s(e.$str("no_member_found","container_workspace"))+"\n      ")]):e._e()],1)])])};n._withStripped=!0;var t=a("BMq0"),r=a.n(t),s=a("pZp9"),o=a.n(s),d=a("49h4"),l=a.n(d),c=a("UpZR"),u=a.n(c),m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_member_filter_options"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"sorts"},name:{kind:"Name",value:"container_workspace_member_sorts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]},p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_find_members"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search_term"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_member_sort"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"container_workspace_member_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"EnumValue",value:"ACTIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"members"},name:{kind:"Name",value:"container_workspace_members"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}},{kind:"Argument",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"EnumValue",value:"ACTIVE"}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"job_assignments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"member_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_remove"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"time_joined"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]}]}}]}}]},k=a("R5BP"),v=a.n(k),_=a("vF5l"),g=a.n(_),f=a("AdjL"),b=a.n(f),N={components:{MemberSearchBox:r.a,WorkspaceMemberCard:o.a,SelectFilter:l.a,VirtualScroll:v.a,Button:g.a,PageLoader:b.a},props:{workspaceId:{type:[String,Number],required:!0},selectedSort:{type:String,required:!0},totalMembers:{type:[String,Number],required:!0}},apollo:{filter:{query:m,update:({sorts:e})=>({sorts:Array.prototype.map.call(e,({label:e,value:i})=>({id:i,label:e}))})},member:{query:p,fetchPolicy:"network-only",skip(){return this.$apollo.queries.filter.loading},variables(){return{workspace_id:this.workspaceId,sort:this.sort,search_term:this.searchTerm}},update:({cursor:e,members:i})=>({cursor:e,items:i})}},data(){return{filter:{},isLoadMoreVisible:!1,member:{cursor:{total:0,next:null},items:[]},searchTerm:"",sort:this.selectedSort}},computed:{totalMemberText(){return 1==this.totalMembers?this.$str("one_member","container_workspace"):this.$str("total_member_x","container_workspace",this.totalMembers)}},methods:{removeMember(e){const i={search_term:this.searchTerm,sort:this.sort,workspace_id:this.workspaceId};let{cursor:a,members:n}=u.a.readQuery({query:p,variables:i});u.a.writeQuery({query:p,variables:i,data:{cursor:a,members:Array.prototype.filter.call(n,({user:{id:i}})=>i!=e)}})},async onScrollToBottom(){this.isLoadMoreVisible||(await this.loadMoreItems(),this.isLoadMoreVisible=!0)},async loadMore(){await this.loadMoreItems(),this.isLoadMoreVisible=!1},async loadMoreItems(){this.member.cursor.next&&this.$apollo.queries.member.fetchMore({variables:{cursor:this.member.cursor.next,workspace_id:this.workspaceId,sort:this.sort,search_term:this.searchTerm},updateQuery:(e,{fetchMoreResult:i})=>{const a=i,n=e.members.concat(a.members);return{cursor:a.cursor,members:n}}})}}},w=a("KHd+"),h=function(e){e.options.__langStrings={container_workspace:["loadmore","one_member","total_member_x","no_member_found","vieweditems"],moodle:["sortby"]}},y=Object(w.a)(N,n,[],!1,null,null,null);"function"==typeof h&&h(y),y.options.__hasBlocks={script:!0,template:!0},y.options.__file="client/src/container_workspace/components/content/tabs/WorkspaceMembersTab.vue";i.default=y.exports},KOYE:function(e,i){e.exports=tui.require("container_workspace/components/sidepanel/content/WorkspacePrimaryAction")},Kwxl:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this.$createElement,i=this._self._c||e;return i("a",{attrs:{href:this.profileUrl}},[i("Avatar",{attrs:{src:this.imageSrc,alt:this.imageAlt,size:"xxsmall"}})],1)};n._withStripped=!0;var t=a("Xi9X"),r={components:{Avatar:a.n(t).a},props:{imageSrc:{required:!0,type:String},imageAlt:{required:!0,type:String},profileUrl:{required:!0,type:String}}},s=a("KHd+"),o=Object(s.a)(r,n,[],!1,null,null,null);o.options.__hasBlocks={script:!0,template:!0},o.options.__file="client/src/container_workspace/components/profile/DiscussionAvatar.vue";i.default=o.exports},LgKJ:function(e,i){e.exports=tui.require("container_workspace/components/contribution/Share")},Lht0:function(e,i){e.exports=tui.require("tui/components/icons/common/BackArrow")},"LmW+":function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceControlMenu"},[a("div",{staticClass:"tui-workspaceControlMenu__head"},[a("div",{staticClass:"tui-workspaceControlMenu__head__control"},[a("h1",{staticClass:"tui-workspaceControlMenu__head__control__title"},[e._v("\n        "+e._s(e.workspaceName)+"\n      ")]),e._v(" "),e.showNavigation?a("ButtonIcon",{staticClass:"tui-workspaceControlMenu__head__control__buttonIcon",attrs:{"aria-label":e.buttonMenuAriaLabel,styleclass:{transparentNoPadding:!0,small:!0}},on:{click:function(i){i.preventDefault(),e.showMenu=!e.showMenu}}},[a("ShowIcon")],1):e._e()],1),e._v(" "),a("WorkspaceMenu",{directives:[{name:"show",rawName:"v-show",value:e.showMenu&&e.showNavigation,expression:"showMenu && showNavigation"}],staticClass:"tui-workspaceControlMenu__head__menu",attrs:{"selected-workspace-id":e.workspaceId}})],1)])};n._withStripped=!0;var t=a("Hl3G"),r=a.n(t),s=a("5h9J"),o=a.n(s),d=a("CXEF"),l=a.n(d),c={components:{WorkspaceMenu:r.a,ButtonIcon:o.a,ShowIcon:l.a},props:{workspaceId:{type:[Number,String],required:!0},workspaceName:{type:String,required:!0},showNavigation:Boolean},data:()=>({showMenu:!1}),computed:{buttonMenuAriaLabel(){return this.showMenu?this.$str("collapse_nav","container_workspace"):this.$str("expand_nav","container_workspace")}}},u=a("KHd+"),m=function(e){e.options.__langStrings={container_workspace:["collapse_nav","expand_nav"]}},p=Object(u.a)(c,n,[],!1,null,null,null);"function"==typeof m&&m(p),p.options.__hasBlocks={script:!0,template:!0},p.options.__file="client/src/container_workspace/components/sidepanel/WorkspaceControlMenu.vue";i.default=p.exports},M3bB:function(e,i){e.exports=tui.require("container_workspace/components/form/WorkspaceDiscussionForm")},MVIO:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspacePrimaryAction"},[a("ModalPresenter",{attrs:{open:e.modal.leaveConfirm},on:{"request-close":function(i){e.modal.leaveConfirm=!1}}},[a("WorkspaceWarningModal",{attrs:{title:e.$str("delete_warning_title","container_workspace"),"message-content":e.$str("leave_workspace_message","container_workspace"),"confirm-button-text":e.$str("leave","container_workspace")},on:{confirm:e.leaveWorkspace}})],1),e._v(" "),e.owner?e._e():[!e.joined&&e.joinAble?a("LoadingButton",{attrs:{text:e.joinButtonLabel,loading:e.submitting,"aria-disabled":e.joined||!e.joinAble,"aria-label":e.ariaJoinButtonLabel},on:{click:e.joinWorkspace}}):e.joined?a("Dropdown",{staticClass:"tui-workspacePrimaryAction__dropdown",scopedSlots:e._u([{key:"trigger",fn:function(i){var n=i.toggle;return[a("Button",{attrs:{text:e.$str("joined","container_workspace"),caret:!0},on:{click:function(e){return e.preventDefault(),n(e)}}})]}}],null,!1,2268143500)},[e._v(" "),a("DropdownItem",{on:{click:function(i){e.modal.leaveConfirm=!0}}},[e._v("\n        "+e._s(e.$str("leave_workspace","container_workspace"))+"\n      ")])],1):e._e()]],2)};n._withStripped=!0;var t=a("rLBA"),r=a.n(t),s=a("vF5l"),o=a.n(s),d=a("gLvT"),l=a.n(d),c=a("KGcv"),u=a.n(c),m=a("vyVp"),p=a("Mnur"),k=a.n(p),v=a("XgQu"),_=a.n(v),g=a("x4nq"),f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_leave_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member"},name:{kind:"Name",value:"container_workspace_leave"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"job_assignments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"member_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_remove"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"time_joined"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]}]}}]}}]},b={components:{LoadingButton:r.a,Button:o.a,DropdownItem:u.a,Dropdown:l.a,ModalPresenter:k.a,WorkspaceWarningModal:_.a},props:{joinAble:{type:Boolean,required:!0},owner:{type:Boolean,required:!0},joined:{type:Boolean,required:!0},workspaceName:{type:String,required:!0},workspaceId:{type:[String,Number],required:!0}},data:()=>({submitting:!1,modal:{leaveConfirm:!1}}),computed:{joinButtonLabel(){return this.joined?this.$str("joined","container_workspace"):this.$str("join_workspace","container_workspace")},ariaJoinButtonLabel(){return this.joined?this.$str("joined","container_workspace"):this.$str("join_space","container_workspace",this.workspaceName)}},methods:{async joinWorkspace(){if(!this.submitting){this.submitting=!0;try{await this.$apollo.mutate({mutation:g.a,refetchAll:!0,variables:{workspace_id:this.workspaceId}}),this.$emit("join-workspace")}catch(e){await Object(m.notify)({message:this.$str("error:join_space","container_workspace"),type:"error"})}finally{this.submitting=!1}}},async leaveWorkspace(){if(!this.submitting){this.submitting=!0;try{await this.$apollo.mutate({mutation:f,refetchAll:!0,variables:{workspace_id:this.workspaceId}}),this.modal.leaveConfirm=!1,this.$emit("leave-workspace")}catch(e){await Object(m.notify)({message:this.$str("error:leave_space","container_workspace"),type:"error"})}finally{this.submitting=!1}}}}},N=a("KHd+"),w=function(e){e.options.__langStrings={container_workspace:["join_workspace","join_space","joined","error:join_space","leave_workspace","delete_warning_title","leave_workspace_message","error:leave_space","leave"]}},h=Object(N.a)(b,n,[],!1,null,null,null);"function"==typeof w&&w(h),h.options.__hasBlocks={script:!0,template:!0},h.options.__file="client/src/container_workspace/components/sidepanel/content/WorkspacePrimaryAction.vue";i.default=h.exports},Mnur:function(e,i){e.exports=tui.require("tui/components/modal/ModalPresenter")},NAOU:function(e,i){e.exports=tui.require("tui/components/grid/Grid")},NHyM:function(e,i){e.exports=tui.require("container_workspace/components/sidepanel/WorkspaceSidePanel")},O3Z6:function(e,i){e.exports=tui.require("container_workspace/components/head/WorkspacePageHeader")},"Oh+1":function(e,i,a){var n={"./EmptySpacesPage":"WOCn","./EmptySpacesPage.vue":"WOCn","./SpacesPage":"1qGZ","./SpacesPage.vue":"1qGZ","./WorkspaceDiscussionPage":"o5Iv","./WorkspaceDiscussionPage.vue":"o5Iv","./WorkspaceFilePage":"GF1c","./WorkspaceFilePage.vue":"GF1c","./WorkspacePage":"8shQ","./WorkspacePage.vue":"8shQ"};function t(e){var i=r(e);return a(i)}function r(e){if(!a.o(n,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return n[e]}t.keys=function(){return Object.keys(n)},t.resolve=r,e.exports=t,t.id="Oh+1"},PLRA:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return e.page.files.length>0?a("div",[a("Table",{staticClass:"tui-workspaceFileTable",attrs:{data:e.page.files,"expandable-rows":!1},scopedSlots:e._u([{key:"header-row",fn:function(){return[a("HeaderCell",{attrs:{size:"7"}},[e._v("\n        "+e._s(e.$str("file_name","container_workspace"))+"\n      ")]),e._v(" "),a("HeaderCell",{attrs:{size:"2"}},[e._v("\n        "+e._s(e.$str("format","container_workspace"))+"\n      ")]),e._v(" "),a("HeaderCell",{attrs:{size:"2"}},[e._v("\n        "+e._s(e.$str("size","moodle"))+"\n      ")]),e._v(" "),a("HeaderCell",{attrs:{size:"2"}},[e._v("\n        "+e._s(e.$str("file_date","container_workspace"))+"\n      ")]),e._v(" "),a("HeaderCell",{attrs:{size:"5"}},[e._v("\n        "+e._s(e.$str("uploaded_by","container_workspace"))+"\n      ")]),e._v(" "),a("HeaderCell",{attrs:{size:"4"}},[e._v("\n        "+e._s(e.$str("actions","container_workspace"))+"\n      ")])]},proxy:!0},{key:"row",fn:function(i){var n=i.row;return[a("Cell",{attrs:{size:"7","column-header":e.$str("file_name","container_workspace")}},[a("a",{attrs:{href:"javascript:;"},on:{click:function(i){return i.preventDefault(),e.$emit("open",n)}}},[e._v("\n          "+e._s(n.file_name)+"\n        ")])]),e._v(" "),a("Cell",{attrs:{size:"2","column-header":e.$str("format","container_workspace")}},[e._v("\n        "+e._s(n.extension)+"\n      ")]),e._v(" "),a("Cell",{attrs:{size:"2","column-header":e.$str("size","moodle")}},[e._v("\n        "+e._s(n.file_size)+"\n      ")]),e._v(" "),a("Cell",{attrs:{size:"2","column-header":e.$str("file_date","container_workspace")}},[e._v("\n        "+e._s(n.date)+"\n      ")]),e._v(" "),a("Cell",{attrs:{size:"5","column-header":e.$str("uploaded_by","container_workspace")}},[e._v("\n        "+e._s(n.author.fullname)+"\n      ")]),e._v(" "),a("Cell",{attrs:{size:"4","column-header":e.$str("actions","container_workspace")}},[a("div",{staticClass:"tui-workspaceFileTable__action"},[a("a",{attrs:{href:n.context_url}},[e._v("\n            "+e._s(e.$str("view_discussion","container_workspace"))+"\n          ")]),e._v(" "),a("a",{attrs:{href:n.download_url}},[e._v("\n            "+e._s(e.$str("download","moodle"))+"\n          ")])])])]}}],null,!1,639114150)}),e._v(" "),a("PageLoader",{attrs:{fullpage:!1,loading:e.$apollo.loading}}),e._v(" "),e.page.files.length<e.page.cursor.total&&!e.$apollo.loading?a("div",{staticClass:"tui-workspaceFileTable__loadMoreContainer"},[a("div",{staticClass:"tui-workspaceFileTable__viewedFiles"},[e._v("\n      "+e._s(e.$str("vieweditems","container_workspace",e.page.files.length))+"\n      "+e._s(e.$str("total_files","container_workspace",e.page.cursor.total))+"\n    ")]),e._v(" "),a("Button",{staticClass:"tui-contributionBaseContent__loadMore",attrs:{text:e.$str("loadmore","container_workspace")},on:{click:e.loadMoreItems}})],1):e._e()],1):e._e()};n._withStripped=!0;var t=a("yikf"),r=a.n(t),s=a("5qAA"),o=a.n(s),d=a("KGot"),l=a.n(d),c=a("vF5l"),u=a.n(c),m=a("AdjL"),p=a.n(m),k=a("ao45"),v={components:{HeaderCell:o.a,Cell:l.a,Button:u.a,PageLoader:p.a,Table:r.a},props:{workspaceId:{type:[Number,String],required:!0},selectedSort:{type:String,required:!0},selectedExtension:{type:String,default:""}},apollo:{page:{query:k.a,fetchPolicy:"network-only",variables(){return{workspace_id:this.workspaceId,extension:this.selectedExtension,sort:this.selectedSort}},update:({cursor:e,files:i})=>({cursor:e,files:i})}},data:()=>({page:{files:[],cursor:{total:0,next:null}}}),methods:{async loadMoreItems(){this.page.cursor.next&&this.$apollo.queries.page.fetchMore({variables:{workspace_id:this.workspaceId,extension:this.selectedExtension,sort:this.selectedSort,cursor:this.page.cursor.next},updateQuery:(e,{fetchMoreResult:i})=>{const a=i,n=e.files.concat(a.files);return{cursor:a.cursor,files:n}}})}}},_=a("KHd+"),g=function(e){e.options.__langStrings={container_workspace:["actions","size","uploaded_by","file_name","file_date","format","view_discussion","loadmore","vieweditems","total_files"],moodle:["download","size"]}},f=Object(_.a)(v,n,[],!1,null,null,null);"function"==typeof g&&g(f),f.options.__hasBlocks={script:!0,template:!0},f.options.__file="client/src/container_workspace/components/table/WorkspaceFileTable.vue";i.default=f.exports},PNtU:function(e,i){e.exports=tui.require("tui/components/lozenge/Lozenge")},Pcje:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement;return(e._self._c||i)("EngageAdderModal",{attrs:{title:e.$str("workspace:add_library","container_workspace"),open:e.showAdder,cards:e.contribution.cards,"filter-value":e.filterValue,"filter-component":"container_workspace","filter-area":"adder"},on:{added:e.adderUpdate,cancel:function(i){return e.$emit("close",i)},topic:e.filterTopic,search:e.filterSearch,section:e.filterSection}})};n._withStripped=!0;var t=a("YPxT"),r=a.n(t),s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_engage_share_with_recipient"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"items"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_share_item"}}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recipient"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_recipient_in"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"shared"},name:{kind:"Name",value:"totara_engage_share_with_recipient"},arguments:[{kind:"Argument",name:{kind:"Name",value:"items"},value:{kind:"Variable",name:{kind:"Name",value:"items"}}},{kind:"Argument",name:{kind:"Name",value:"recipient"},value:{kind:"Variable",name:{kind:"Name",value:"recipient"}}}],directives:[]}]}}]},o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_contribution_cards"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"access"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_access"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topic"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"section"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"include_footnotes"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"contribution"},name:{kind:"Name",value:"container_workspace_contributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"access"},value:{kind:"Variable",name:{kind:"Name",value:"access"}}},{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}},{kind:"ObjectField",name:{kind:"Name",value:"topic"},value:{kind:"Variable",name:{kind:"Name",value:"topic"}}},{kind:"ObjectField",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"ObjectField",name:{kind:"Name",value:"search"},value:{kind:"Variable",name:{kind:"Name",value:"search"}}},{kind:"ObjectField",name:{kind:"Name",value:"section"},value:{kind:"Variable",name:{kind:"Name",value:"section"}}}]}},{kind:"Argument",name:{kind:"Name",value:"footnotes"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}}},{kind:"ObjectField",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}}},{kind:"ObjectField",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}}}]}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cards"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"instanceid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timecreated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bookmarked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extra"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"footnotes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}}},{kind:"Argument",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}}},{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"include_footnotes"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"props"},arguments:[],directives:[]}]}}]}}]}}]}}]},d=a("pxdy"),l=a.n(d),c={components:{EngageAdderModal:r.a},mixins:[l.a],props:{workspaceId:{type:[String,Number],required:!0},showAdder:Boolean},watch:{showAdder(e){this.skipCardsQuery=!e}},created(){this.skipCardsQuery=!0},apollo:{contribution:{query:o,fetchPolicy:"network-only",variables(){return Object.assign({},this.filterValue,{workspace_id:this.workspaceId,area:"adder",include_footnotes:!1})},update({contribution:{cursor:e,cards:i}}){return{cursor:e,cards:this.canContribute?this.$_addContributeCard(i):i}},skip(){return this.skipCardsQuery}}},methods:{adderUpdate(e){this.$apollo.mutate({mutation:s,refetchAll:!1,refetchQueries:["container_workspace_shared_cards"],variables:{items:e.map(e=>JSON.parse(e)),recipient:{instanceid:this.workspaceId,component:"container_workspace",area:"LIBRARY"}}}).finally(()=>{this.$emit("close")})}}},u=a("KHd+"),m=function(e){e.options.__langStrings={container_workspace:["workspace:add_library"]}},p=Object(u.a)(c,n,[],!1,null,null,null);"function"==typeof m&&m(p),p.options.__hasBlocks={script:!0,template:!0},p.options.__file="client/src/container_workspace/components/contribution/Share.vue";i.default=p.exports},Pn5P:function(e,i){e.exports=tui.require("container_workspace/components/content/tabs/WorkspaceMembersTab")},Q6By:function(e,i){e.exports=tui.require("container_workspace/components/filter/DiscussionFilter")},QP7s:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_workspace_interactor"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"interactor"},name:{kind:"Name",value:"container_workspace_workspace_interactor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}}]}}]}},QgbB:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_get_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspace"},name:{kind:"Name",value:"container_workspace_workspace"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner_job_assignments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]}}]}},R5BP:function(e,i){e.exports=tui.require("tui/components/virtualscroll/VirtualScroll")},R6HV:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-originalSpaceCard",style:{"background-image":"url('"+e.image+"')"},on:{click:function(i){return e.handleClick(e.url)}}},[a("div",{staticClass:"tui-originalSpaceCard__titleBox"},[a("h4",{staticClass:"tui-originalSpaceCard__titleBox__title"},[a("a",{staticClass:"tui-originalSpaceCard__link",attrs:{href:e.url}},[e._v("\n        "+e._s(e.title)+"\n      ")])])]),e._v(" "),a("div",{staticClass:"tui-originalSpaceCard__actionBox"},[a("LoadingButton",{staticClass:"tui-originalSpaceCard__actionBox__button",attrs:{text:e.buttonLabel,"aria-label":e.buttonAriaLabel,loading:e.submitting,disabled:e.joinDisabled},on:{click:function(i){return i.stopPropagation(),e.$emit("join-workspace",e.workspaceId)}}})],1)])};n._withStripped=!0;var t=a("rLBA"),r={components:{LoadingButton:a.n(t).a},props:{submitting:Boolean,workspaceId:{type:[String,Number],required:!0},title:{type:String,required:!0},image:{type:String,required:!0},url:{type:String,required:!0},joined:Boolean,joinAble:Boolean},computed:{buttonLabel(){return this.joined?this.$str("joined","container_workspace"):this.joinAble?this.$str("join_me","container_workspace"):""},buttonAriaLabel(){return this.joined?this.$str("joined","container_workspace"):this.$str("join_space","container_workspace",this.title)},joinDisabled(){return this.submitting||this.joined||!this.joinAble}},methods:{handleClick(e){window.location.href=e}}},s=a("KHd+"),o=function(e){e.options.__langStrings={container_workspace:["join_space","join_me","joined"]}},d=Object(s.a)(r,n,[],!1,null,null,null);"function"==typeof o&&o(d),d.options.__hasBlocks={script:!0,template:!0},d.options.__file="client/src/container_workspace/components/card/OriginalSpaceCard.vue";i.default=d.exports},RVXm:function(e,i){e.exports=tui.require("container_workspace/components/sidepanel/content/WorkspaceAccess")},Re3N:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-recommendedSpaces"},[a("div",{staticClass:"tui-recommendedSpaces__head"},[a("h2",{staticClass:"tui-recommendedSpaces__head__title"},[a("span",[e._v(e._s(e.$str("recommended_spaces","container_workspace")))]),e._v(" "),e.$apollo.loading?a("Spinner"):e._e()],1),e._v(" "),a("a",{staticClass:"tui-recommendedSpaces__head__link",attrs:{href:e.$url("/container/type/workspace/spaces.php")}},[e._v("\n      "+e._s(e.$str("view_all_spaces","container_workspace"))+"\n    ")])]),e._v(" "),e.$apollo.loading||0===e.workspaces.length?e._e():a("SpaceCardsGrid",{staticClass:"tui-recommendedSpaces__grid",attrs:{"max-grid-units":e.maxGridUnits,workspaces:e.workspaces,submitting:e.submitting},on:{"join-workspace":e.joinWorkspace}})],1)};n._withStripped=!0;var t=a("0viy"),r=a.n(t),s=a("yc2X"),o=a.n(s),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ml_recommender_get_recommended_user_workspaces"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"ml_recommender_recommended_user_workspaces_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"workspaces"},name:{kind:"Name",value:"ml_recommender_recommended_user_workspaces"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner_job_assignments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]}}]},l=a("x4nq"),c=a("vyVp"),u={components:{Spinner:r.a,SpaceCardsGrid:o.a},props:{maxGridUnits:{type:[Number,String],required:!0}},apollo:{workspaces:{query:d,fetchPolicy:"network-only"}},data:()=>({workspaces:[],submitting:!1}),methods:{async joinWorkspace(e){if(!this.submitting){this.submitting=!0;try{await this.$apollo.mutate({mutation:l.a,refetchAll:!1,variables:{workspace_id:e},update:(i,{data:{member:{workspace_interactor:a}}})=>{let{workspaces:n}=i.readQuery({query:d,data:{workspaces:Array.prototype.map.call(n,i=>(i.id==e&&((i=Object.assign({},i)).interactor=a),i))}})}}),this.$emit("join-workspace",e)}catch(e){await Object(c.notify)({message:this.$str("error:join_space","container_workspace"),type:"error"})}finally{this.submitting=!1}}}}},m=a("KHd+"),p=function(e){e.options.__langStrings={container_workspace:["recommended_spaces","view_all_spaces","error:join_space"]}},k=Object(m.a)(u,n,[],!1,null,null,null);"function"==typeof p&&p(k),k.options.__hasBlocks={script:!0,template:!0},k.options.__file="client/src/container_workspace/components/recommend/RecommendedSpaces.vue";i.default=k.exports},Sue0:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-discussionCard",attrs:{"data-id":e.discussionId}},[a("ModalPresenter",{attrs:{open:e.modal.delete},on:{"request-close":function(i){e.modal.delete=!1}}},[a("WorkspaceWarningModal",{attrs:{"message-content":e.$str("delete_discussion_warning_msg","container_workspace"),title:e.$str("delete_warning_title","container_workspace"),"confirm-button-text":e.$str("confirm","moodle")},on:{confirm:e.deleteDiscussion}})],1),e._v(" "),e.pinned?a("div",{staticClass:"tui-discussionCard__pinBox"},[a("Lozenge",{attrs:{text:e.$str("pinned_post","container_workspace"),type:"info"}})],1):e._e(),e._v(" "),a("div",{staticClass:"tui-discussionCard__card"},[a("DiscussionAvatar",{staticClass:"tui-discussionCard__card__avatar",attrs:{"image-src":e.creatorImageSrc,"image-alt":e.creatorImageAlt,"profile-url":e.profileUrl}}),e._v(" "),a("div",{staticClass:"tui-discussionCard__card__content"},[a("div",{staticClass:"tui-discussionCard__card__content__head"},[a("a",{attrs:{id:e.labelId,href:e.profileUrl}},[e._v("\n          "+e._s(e.creatorFullname)+"\n        ")]),e._v(" "),a("p",[e._v(e._s(e.timeDescription))]),e._v(" "),e.edited?a("p",{staticClass:"tui-discussionCard__card__content__head__flag"},[e._v("\n          "+e._s(e.$str("edited","container_workspace"))+"\n        ")]):e._e()]),e._v(" "),e.edit?a("EditPostDiscussionForm",{attrs:{"discussion-id":e.discussionId,submitting:e.submitting},on:{cancel:function(i){e.edit=!1},submit:e.updateDiscussionContent}}):a("div",{ref:"discussion-content",staticClass:"tui-discussionCard__card__content__body",domProps:{innerHTML:e._s(e.discussionContent)}}),e._v(" "),a("div",{staticClass:"tui-discussionCard__card__content__buttons"},[a("SimpleLike",{staticClass:"tui-discussionCard__card__content__buttons__like",attrs:{"button-aria-label":e.likeButtonAriaLabel,"total-likes":e.totalReactions,liked:e.reacted,disabled:!e.reactAble,component:"container_workspace",area:"discussion","show-text":!0,"instance-id":e.discussionId},on:{"update-like-status":e.updateReactStatus,"created-like":function(i){return e.updateReactStatus(!0)},"removed-like":function(i){return e.updateReactStatus(!1)}}}),e._v(" "),a("div",{staticClass:"tui-discussionCard__card__content__buttons__comment"},[a("ButtonIcon",{attrs:{"aria-label":e.$str("comment_on_discussion","container_workspace"),text:e.$str("comment","container_workspace"),styleclass:{small:!0,transparent:!0,transparentNoPadding:!0},disabled:!e.commentAble},on:{click:function(i){return e.$emit("trigger-comment")}}},[a("CommentIcon")],1),e._v(" "),0<e.totalComments?a("span",[e._v("\n            "+e._s(e.$str("bracket_number","container_workspace",e.totalComments))+"\n          ")]):e._e()],1)],1)],1),e._v(" "),a("Dropdown",{staticClass:"tui-discussionCard__card__dropDown",attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(i){var n=i.toggle,t=i.isOpen;return[a("ButtonIcon",{attrs:{"aria-expanded":t,"aria-label":e.$str("discussion_actions","container_workspace"),styleclass:{small:!0,transparentNoPadding:!0}},on:{click:function(e){return e.preventDefault(),n(e)}}},[a("MoreIcon",{attrs:{size:"300"}})],1)]}}])},[e._v(" "),e.updateAble?a("DropdownItem",{on:{click:function(i){e.edit=!0}}},[e._v("\n        "+e._s(e.$str("edit","moodle"))+"\n      ")]):e._e(),e._v(" "),e.deleteAble?a("DropdownItem",{on:{click:function(i){e.modal.delete=!0}}},[e._v("\n        "+e._s(e.$str("delete","moodle"))+"\n      ")]):e._e(),e._v(" "),e.showDiscussionLink?a("DropdownItem",{attrs:{href:e.discussionUrl}},[e._v("\n        "+e._s(e.$str("view_full_discussion","container_workspace"))+"\n      ")]):e._e(),e._v(" "),a("DropdownItem",{on:{click:e.handleCopyLink}},[e._v("\n        "+e._s(e.$str("copy_discussion_link","container_workspace"))+"\n      ")])],1)],1)],1)};n._withStripped=!0;var t=a("H/tB"),r=a.n(t),s=a("+ukd"),o=a.n(s),d=a("gLvT"),l=a.n(d),c=a("KGcv"),u=a.n(c),m=a("5h9J"),p=a.n(m),k=a("hCGN"),v=a.n(k),_=a("1R7l"),g=a.n(_),f=a("1G8L"),b=a.n(f),N=a("Y1eX"),w=a.n(N),h=a("vyVp"),y=a("PNtU"),S=a.n(y),F=a("Mnur"),C=a.n(F),x=a("XgQu"),A=a.n(x),V={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_update_discussion_content"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"discussion"},name:{kind:"Name",value:"container_workspace_update_discussion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"content_format"},value:{kind:"Variable",name:{kind:"Name",value:"content_format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"total_comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_comment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comment_cursor"},arguments:[],directives:[]}]}}]}}]},D={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_delete_discussion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"container_workspace_delete_discussion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}]},T={components:{DiscussionAvatar:o.a,SimpleLike:g.a,Dropdown:l.a,DropdownItem:u.a,ButtonIcon:p.a,MoreIcon:v.a,EditPostDiscussionForm:b.a,CommentIcon:w.a,Lozenge:S.a,ModalPresenter:C.a,WorkspaceWarningModal:A.a},props:{creatorImageSrc:{type:String,required:!0},creatorImageAlt:{type:String,default:""},creatorId:{type:[String,Number],required:!0},creatorFullname:{type:String,required:!0},discussionContent:{type:String,required:!0},timeDescription:{type:String,required:!0},pinned:Boolean,reacted:Boolean,totalComments:{type:[String,Number],required:!0},totalReactions:{type:[String,Number],required:!0},discussionId:{type:[String,Number],required:!0},reactAble:{type:Boolean,default:!0},updateAble:{type:Boolean,default:!0},deleteAble:{type:Boolean,default:!0},reportAble:{type:Boolean,default:!1},commentAble:{type:Boolean,default:!0},showDiscussionLink:{type:Boolean,default:!0},edited:Boolean,labelId:String},data:()=>({edit:!1,submitting:!1,modal:{delete:!1}}),computed:{profileUrl(){return this.$url("/user/profile.php",{id:this.creatorId})},likeButtonAriaLabel(){return this.reacted?this.$str("remove_like_discussion","container_workspace"):this.$str("like_discussion","container_workspace")},discussionUrl(){return this.$url("/container/type/workspace/discussion.php",{id:this.discussionId})}},mounted(){this.$_scan()},updated(){this.$_scan()},methods:{$_scan(){if(!this.$refs["discussion-content"])return;let e=this.$refs["discussion-content"];r.a.scan(e)},async handleCopyLink(){let e=document.createElement("textarea");e.value=this.discussionUrl,e.style.display="none",this.$el.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),await Object(h.notify)({message:this.$str("copied_to_clipboard","container_workspace"),type:"success"})}catch(e){await Object(h.notify)({message:this.$str("error:copy_to_clipboard","container_workspace"),type:"error"})}finally{this.$el.removeChild(e)}},updateReactStatus(e){this.$emit("update-react-status",{discussionId:this.discussionId,status:e})},async updateDiscussionContent({content:e,contentFormat:i,itemId:a}){if(!this.submitting){this.submitting=!0;try{let{data:{discussion:n}}=await this.$apollo.mutate({mutation:V,refetchAll:!1,variables:{id:this.discussionId,content:e,content_format:i,draft_id:a}});this.edit=!1,this.$emit("update-discussion",n)}catch(e){await Object(h.notify)({message:this.$str("error:update_discussion","container_workspace"),type:"error"})}finally{this.submitting=!1}}},async deleteDiscussion(){if(!this.submitting){this.submitting=!0;try{let{data:{result:e}}=await this.$apollo.mutate({mutation:D,refetchAll:!1,variables:{id:this.discussionId}});if(e)return this.modal.delete=!1,void this.$emit("delete-discussion",this.discussionId);await Object(h.notify)({message:this.$str("error:delete_discussion","container_workspace"),type:"error"})}catch(e){await Object(h.notify)({message:this.$str("error:delete_discussion","container_workspace"),type:"error"})}finally{this.submitting=!1}}}}},$=a("KHd+"),I=function(e){e.options.__langStrings={container_workspace:["discussion_actions","copy_discussion_link","like_discussion","remove_like_discussion","comment","comment_on_discussion","error:update_discussion","error:copy_to_clipboard","view_full_discussion","bracket_number","edited","copied_to_clipboard","pinned_post","delete_discussion_warning_msg","delete_warning_title","error:delete_discussion"],moodle:["edit","delete","confirm"]}},M=Object($.a)(T,n,[],!1,null,null,null);"function"==typeof I&&I(M),M.options.__hasBlocks={script:!0,template:!0},M.options.__file="client/src/container_workspace/components/card/DiscussionCard.vue";i.default=M.exports},TBZn:function(e,i){e.exports=tui.require("container_workspace/grid/grid")},TXEh:function(e,i){e.exports=tui.require("tui/util")},URbu:function(e,i){e.exports=tui.require("container_workspace/components/form/upload/SpaceImagePicker")},USZJ:function(e,i,a){"use strict";a.r(i),a.d(i,"cardGrid",(function(){return n})),a.d(i,"workspaceBreakPoint",(function(){return t})),a.d(i,"workspaceBoundaries",(function(){return r}));const n={xs:{name:"xs",boundaries:[0,764],direction:"horizontal",cardUnits:12},s:{name:"s",boundaries:[765,992],direction:"horizontal",cardUnits:6},m:{name:"m",boundaries:[993,1192],direction:"horizontal",cardUnits:3},l:{name:"l",boundaries:[1193,1396],direction:"horizontal",cardUnits:2},xl:{name:"xl",boundaries:[1397,1672],direction:"horizontal",cardUnits:2}},t=[{name:"small",boundaries:[0,763]},{name:"medium",boundaries:[764,1192]},{name:"large",boundaries:[1192,1672]}],r={small:{gridDirection:"vertical",gridUnitsOuterLeftExpanded:1,gridUnitsOuterLeftCollapsed:11,gridUnitsOuterRightExpanded:11,gridUnitsOuterRightCollapsed:1,gridUnitsInnerLeftExpanded:10,gridUnitsInnerLeftCollapsed:10,gridUnitsInnerRightExpanded:12,gridUnitsInnerRightCollapsed:2},medium:{gridDirection:"vertical",gridUnitsOuterLeftExpanded:1,gridUnitsOuterLeftCollapsed:1,gridUnitsOuterRightExpanded:11,gridUnitsOuterRightCollapsed:1,gridUnitsInnerLeftExpanded:6,gridUnitsInnerLeftCollapsed:11,gridUnitsInnerRightExpanded:6,gridUnitsInnerRightCollapsed:1},large:{gridDirection:"horizontal",gridUnitsOuterLeftExpanded:2,gridUnitsOuterLeftCollapsed:1,gridUnitsOuterRightExpanded:10,gridUnitsOuterRightCollapsed:1,gridUnitsInnerRightExpanded:4,gridUnitsInnerRightCollapsed:1,gridUnitsInnerLeftExpanded:6,gridUnitsInnerLeftCollapsed:11}}},UWTz:function(e,i,a){"use strict";a.r(i);var n=a("USZJ");a.d(i,"cardGrid",(function(){return n.cardGrid})),a.d(i,"workspaceBreakPoint",(function(){return n.workspaceBreakPoint})),a.d(i,"workspaceBoundaries",(function(){return n.workspaceBoundaries}))},Uhf3:function(e,i){e.exports=tui.require("totara_engage/components/contribution/Filter")},UpZR:function(e,i){e.exports=tui.require("tui/apollo_client")},"VI/h":function(e,i){e.exports=tui.require("container_workspace/components/filter/WorkspaceFileFilter")},WDs9:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Dropdown",{attrs:{position:e.position,open:e.open},scopedSlots:e._u([{key:"trigger",fn:function(i){var n=i.toggle,t=i.isOpen;return[e._t("trigger",[a("ButtonIcon",{attrs:{"aria-expanded":t?"true":"false","aria-label":e.$str("showactions","moodle"),styleclass:{small:!0,transparentNoPadding:!0}},on:{click:n}},[a("MoreIcon",{attrs:{size:"300"}})],1)],{toggle:n})]}}],null,!0)},[e._v(" "),e._t("dropdown-items",e._l(e.actions,(function(i,n){var t=i.action,r=i.label;return a("DropdownItem",{key:n,on:{click:t}},[e._v("\n      "+e._s(r)+"\n    ")])})))],2)};n._withStripped=!0;var t=a("gLvT"),r=a.n(t),s=a("KGcv"),o=a.n(s),d=a("hCGN"),l=a.n(d),c=a("5h9J"),u=a.n(c),m={components:{Dropdown:r.a,DropdownItem:o.a,MoreIcon:l.a,ButtonIcon:u.a},props:{position:String,open:Boolean,actions:{type:Array,validator:e=>0===Array.prototype.filter.call(e,e=>!("label"in e)||!("action"in e)).length}}},p=a("KHd+"),k=function(e){e.options.__langStrings={moodle:["more","showactions"]}},v=Object(p.a)(m,n,[],!1,null,null,null);"function"==typeof k&&k(v),v.options.__hasBlocks={script:!0,template:!0},v.options.__file="client/src/container_workspace/components/dropdown/WorkspaceDropdown.vue";i.default=v.exports},WOCn:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("LayoutTwoColumn",{staticClass:"tui-emptySpacesPage",scopedSlots:e._u([{key:"right",fn:function(i){var n=i.units;return a("div",{staticClass:"tui-emptySpacesPage__content"},[a("EmptySpacesHeader",{staticClass:"tui-emptySpacesPage__content__header"}),e._v(" "),a("hr",{staticClass:"tui-emptySpacesPage__content__horizontalLine"}),e._v(" "),a("RecommendSpaces",{staticClass:"tui-emptySpacesPage__content__recommendedSpaces",attrs:{"max-grid-units":n},on:{"join-workspace":e.joinWorkspace}})],1)}}])},[a("SidePanel",{staticClass:"tui-emptySpacesPage__sidePanel",attrs:{slot:"left","show-button-control":!1,"initially-open":!0},slot:"left"},[a("WorkspaceMenu",{staticClass:"tui-emptySpacesPage__sidePanel__menu",on:{"create-workspace":e.navigateToWorkspace}})],1)],1)};n._withStripped=!0;var t=a("dj/p"),r=a.n(t),s=a("Hl3G"),o=a.n(s),d=a("g5S5"),l=a.n(d),c=a("1l6u"),u=a.n(c),m=a("BaY1"),p=a.n(m),k=a("vyVp"),v=a("t5mg"),_={components:{SidePanel:p.a,LayoutTwoColumn:r.a,WorkspaceMenu:o.a,EmptySpacesHeader:l.a,RecommendSpaces:u.a},apollo:{notifications:{query:v.a,update:()=>[],result({data:{notifications:e}}){Array.prototype.forEach.call(e,({message:e,type:i})=>{Object(k.notify)({message:e,type:i,duration:5e3})})}}},data:()=>({notifications:[]}),methods:{navigateToWorkspace({id:e}){document.location.href=this.$url("/container/type/workspace/workspace.php",{id:e})},joinWorkspace(e){this.navigateToWorkspace({id:e})}}},g=a("KHd+"),f=function(e){e.options.__langStrings={container_workspace:["notification_deleted"]}},b=Object(g.a)(_,n,[],!1,null,null,null);"function"==typeof f&&f(b),b.options.__hasBlocks={script:!0,template:!0},b.options.__file="client/src/container_workspace/pages/EmptySpacesPage.vue";i.default=b.exports},XPV3:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceMenu"},[a("div",{staticClass:"tui-workspaceMenu__header"},[a("h3",{staticClass:"tui-workspaceMenu__header__title"},[a("span",[e._v(e._s(e.$str("your_spaces","container_workspace")))])]),e._v(" "),a("ContributeWorkspace",{staticClass:"tui-workspaceMenu__header__contribute",attrs:{disabled:e.$apollo.queries.workspaces.loading},on:{"create-workspace":e.addWorkspace}})],1),e._v(" "),a("div",{staticClass:"tui-workspaceMenu__items"},[e.$apollo.loading?a("div",{staticClass:"tui-workspaceMenu__items__loader"},[a("Spinner")],1):e._l(e.workspaces,(function(i,n){var t=i.url,r=i.name,s=i.id;return a("a",{key:n,staticClass:"tui-workspaceMenu__items__item",class:{"tui-workspaceMenu__items__item--active":e.selectedWorkspaceId==s},attrs:{href:t}},[e._v("\n        "+e._s(r)+"\n      ")])})),e._v(" "),a("div",{staticClass:"tui-workspaceMenu__separator"}),e._v(" "),a("a",{staticClass:"tui-workspaceMenu__findSpaces",attrs:{href:e.$url("/container/type/workspace/spaces.php")}},[e._v("\n      "+e._s(e.$str("find_spaces","container_workspace"))+"\n    ")])],2)])};n._withStripped=!0;var t=a("0viy"),r=a.n(t),s=a("ak/h"),o=a.n(s),d=a("UpZR"),l=a.n(d),c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_my_workspace_urls"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspaces"},name:{kind:"Name",value:"container_workspace_workspaces"},arguments:[{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"EnumValue",value:"MEMBER_AND_OWNED"}},{kind:"Argument",name:{kind:"Name",value:"sort"},value:{kind:"EnumValue",value:"RECENT"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]},u={components:{ContributeWorkspace:o.a,Spinner:r.a},props:{selectedWorkspaceId:[Number,String]},apollo:{workspaces:{query:c}},methods:{addWorkspace(e){const i=Array.prototype.slice.call(this.workspaces);l.a.writeQuery({query:c,data:{workspaces:Array.prototype.concat.call(i,[e])}}),this.$emit("create-workspace",e)}}},m=a("KHd+"),p=function(e){e.options.__langStrings={container_workspace:["your_spaces","find_spaces"]}},k=Object(m.a)(u,n,[],!1,null,null,null);"function"==typeof p&&p(k),k.options.__hasBlocks={script:!0,template:!0},k.options.__file="client/src/container_workspace/components/sidepanel/WorkspaceMenu.vue";i.default=k.exports},XgQu:function(e,i){e.exports=tui.require("container_workspace/components/modal/WorkspaceWarningModal")},Xi9X:function(e,i){e.exports=tui.require("tui/components/avatar/Avatar")},Y1eX:function(e,i){e.exports=tui.require("tui/components/icons/common/Comment")},YMfc:function(e,i){e.exports=tui.require("tui/components/tag/Tag")},YPxT:function(e,i){e.exports=tui.require("totara_engage/components/modal/EngageAdderModal")},Z82V:function(e,i){e.exports=tui.require("totara_comment/components/box/CommentBox")},ZnYt:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this.$createElement,i=this._self._c||e;return i("a",{attrs:{href:this.profileUrl}},[i("Avatar",{attrs:{src:this.imageSrc,alt:this.imageAlt,size:"xsmall"}})],1)};n._withStripped=!0;var t=a("Xi9X"),r={components:{Avatar:a.n(t).a},props:{imageSrc:{required:!0,type:String},imageAlt:{required:!0,type:String},profileUrl:{required:!0,type:String}}},s=a("KHd+"),o=Object(s.a)(r,n,[],!1,null,null,null);o.options.__hasBlocks={script:!0,template:!0},o.options.__file="client/src/container_workspace/components/profile/PostAvatar.vue";i.default=o.exports},"ak/h":function(e,i){e.exports=tui.require("container_workspace/components/create/ContributeWorkspace")},ao45:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_get_files"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_file_sort"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extension"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_alphanum"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"container_workspace_file_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"extension"},value:{kind:"Variable",name:{kind:"Name",value:"extension"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"files"},name:{kind:"Name",value:"container_workspace_files"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"Argument",name:{kind:"Name",value:"extension"},value:{kind:"Variable",name:{kind:"Name",value:"extension"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_size"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"extension"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"date"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"alt_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"download_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mimetype"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_type"},arguments:[],directives:[]}]}}]}}]}},bH8R:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceLibraryTab"},[a("ContributionBaseContent",{attrs:{units:e.units,loading:e.$apollo.loading,"loading-more":e.loadingMore,cards:e.contribution.cards,"total-cards":e.contribution.cursor.total,"show-heading":!1,"grid-direction":e.gridDirection,"show-footnotes":e.includeFootnotes,"is-load-more-visible":e.isLoadMoreVisible},on:{"scrolled-to-bottom":e.scrolledToBottom,"load-more":e.loadMore},scopedSlots:e._u([{key:"filters",fn:function(){return[a("ContributionFilter",{staticClass:"tui-workspaceLibraryTab__filter",attrs:{component:"container_workspace",area:"library","has-bottom-bar":!0,value:e.filterValue,"show-access":!1,"show-type":!0,"show-topic":!0,"show-sort":!0,"show-search":!0,"search-placeholder":e.$str("search_library","container_workspace")},on:{type:e.filterType,topic:e.filterTopic,search:e.filterSearch,sort:e.filterSort}})]},proxy:!0}])})],1)};n._withStripped=!0;var t=a("s5vj"),r=a.n(t),s=a("Uhf3"),o=a.n(s),d=a("pxdy"),l=a.n(d),c=a("QP7s"),u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_shared_cards"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"access"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_access"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topic"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"section"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"saved"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"shared"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owned"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"include_footnotes"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"contribution"},name:{kind:"Name",value:"container_workspace_shared_cards"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"access"},value:{kind:"Variable",name:{kind:"Name",value:"access"}}},{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}},{kind:"ObjectField",name:{kind:"Name",value:"topic"},value:{kind:"Variable",name:{kind:"Name",value:"topic"}}},{kind:"ObjectField",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"ObjectField",name:{kind:"Name",value:"search"},value:{kind:"Variable",name:{kind:"Name",value:"search"}}},{kind:"ObjectField",name:{kind:"Name",value:"section"},value:{kind:"Variable",name:{kind:"Name",value:"section"}}},{kind:"ObjectField",name:{kind:"Name",value:"saved"},value:{kind:"Variable",name:{kind:"Name",value:"saved"}}},{kind:"ObjectField",name:{kind:"Name",value:"shared"},value:{kind:"Variable",name:{kind:"Name",value:"shared"}}},{kind:"ObjectField",name:{kind:"Name",value:"owned"},value:{kind:"Variable",name:{kind:"Name",value:"owned"}}}]}},{kind:"Argument",name:{kind:"Name",value:"footnotes"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}}},{kind:"ObjectField",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}}},{kind:"ObjectField",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}}}]}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cards"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"instanceid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timecreated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bookmarked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extra"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"footnotes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}}},{kind:"Argument",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}}},{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"include_footnotes"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"props"},arguments:[],directives:[]}]}}]}}]}}]}}]},m={components:{ContributionBaseContent:r.a,ContributionFilter:o.a},mixins:[l.a],props:{workspaceId:{type:[Number,String],required:!0}},data:()=>({interactor:{}}),computed:{canContribute(){return this.interactor.joined}},created(){this.filterValue=Object.assign({},this.filterValue,{sort:5}),this.includeFootnotes=!0},apollo:{interactor:{query:c.a,variables(){return{workspace_id:this.workspaceId}}},contribution:{query:u,fetchPolicy:"network-only",variables(){return Object.assign({},this.filterValue,{workspace_id:this.workspaceId,area:"library",include_footnotes:!0,footnotes_type:"shared",footnotes_item_id:this.workspaceId,footnotes_area:"LIBRARY",footnotes_component:"container_workspace"})},update({contribution:{cursor:e,cards:i}}){return{cursor:e,cards:this.canContribute?this.$_addContributeCard(i):i}},skip(){return this.skipCardsQuery}}},methods:{$_addContributeCard(e){let i={instanceid:this.workspaceId,component:"WorkspaceContributeCard",tuicomponent:"container_workspace/components/card/WorkspaceContributeCard",user:{}};return Array.prototype.concat([i],e)},adderOpen(){this.showAdder=!0},adderCancelled(){this.showAdder=!1},adderUpdate(e){this.addedItems=e,this.showAdder=!1}}},p=a("KHd+"),k=function(e){e.options.__langStrings={container_workspace:["search_library"]}},v=Object(p.a)(m,n,[],!1,null,null,null);"function"==typeof k&&k(v),v.options.__hasBlocks={script:!0,template:!0},v.options.__file="client/src/container_workspace/components/content/tabs/WorkspaceLibraryTab.vue";i.default=v.exports},cIrp:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Modal",{staticClass:"tui-workspaceWarningModal",attrs:{dismissable:e.dismissable,"aria-labelledby":e.id}},[a("ModalContent",{attrs:{"close-button":e.closeButton,"title-id":e.id},on:{dismiss:function(i){return e.$emit("request-close")}},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("ButtonGroup",[a("Button",{attrs:{styleclass:{primary:!0,small:!0},text:e.confirmButtonText},on:{click:function(i){return e.$emit("confirm")}}}),e._v(" "),a("Button",{attrs:{styleclass:{small:!0},text:e.cancelButtonText},on:{click:function(i){return i.preventDefault(),e.$emit("request-close")}}})],1)]},proxy:!0}])},[a("div",{staticClass:"tui-workspaceWarningModal__container"},[a("Warning",{attrs:{size:"700","custom-class":"tui-icon--warning"}}),e._v(" "),a("div",{staticClass:"tui-workspaceWarningModal__container__box"},[a("h4",{staticClass:"tui-workspaceWarningModal__container__box__title"},[e._v("\n          "+e._s(e.title)+"\n        ")]),e._v(" "),a("p",{staticClass:"tui-workspaceWarningModal__container__box__content",domProps:{innerHTML:e._s(e.messageContent)}})])],1)])],1)};n._withStripped=!0;var t=a("tkAW"),r=a.n(t),s=a("u5iS"),o=a.n(s),d=a("3wZ/"),l=a.n(d),c=a("BN8m"),u=a.n(c),m=a("vF5l"),p=a.n(m),k={components:{Modal:r.a,ModalContent:o.a,Warning:l.a,ButtonGroup:u.a,Button:p.a},props:{closeButton:{type:Boolean,default:!0},size:{type:String,default:"normal"},title:{type:String,required:!0},messageContent:{type:String,required:!0},confirmButtonText:{type:String,default(){return this.$str("remove","moodle")}},cancelButtonText:{type:String,default(){return this.$str("cancel","moodle")}}},data(){return{dismissable:{overlayClose:!1,esc:!0,backdropClick:!1},id:this.$id(this.title)}}},v=a("KHd+"),_=function(e){e.options.__langStrings={moodle:["cancel","remove"]}},g=Object(v.a)(k,n,[],!1,null,null,null);"function"==typeof _&&_(g),g.options.__hasBlocks={script:!0,template:!0},g.options.__file="client/src/container_workspace/components/modal/WorkspaceWarningModal.vue";i.default=g.exports},cNVA:function(e,i){e.exports=tui.require("container_workspace/components/modal/WorkspaceModal")},cseK:function(e,i){e.exports=tui.require("container_workspace/components/modal/WorkspaceAccessModal")},dTgY:function(e,i){e.exports=tui.require("container_workspace/index")},"dj/p":function(e,i){e.exports=tui.require("tui/components/layouts/LayoutTwoColumn")},drxS:function(e,i){e.exports=tui.require("container_workspace/components/table/WorkspaceFileTable")},dtfu:function(e,i){e.exports=tui.require("tui/components/responsive/Responsive")},eeTD:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Modal",{staticClass:"tui-workspaceAccessModal",attrs:{dismissable:{backdropClick:!1,esc:!1}}},[a("ModalContent",{staticClass:"tui-workspaceAccessModal__content",attrs:{title:e.$str("accesssettings","totara_engage"),"close-button":!1}},[a("WorkspaceAccessForm",{attrs:{"selected-topics":e.selectedTopics,submitting:e.submitting},on:{cancel:function(i){return e.$emit("request-close")},submit:function(i){return e.$emit("submit-form",i)}}})],1)],1)};n._withStripped=!0;var t=a("8opU"),r=a.n(t),s=a("tkAW"),o=a.n(s),d=a("u5iS"),l=a.n(d),c={components:{WorkspaceAccessForm:r.a,Modal:o.a,ModalContent:l.a},props:{submitting:Boolean,selectedTopics:{type:Array,default:()=>[],validator:e=>0===(e=Array.prototype.filter.call(e,e=>!("id"in e)||!("value"in e))).length}}},u=a("KHd+"),m=function(e){e.options.__langStrings={totara_engage:["accesssettings"]}},p=Object(u.a)(c,n,[],!1,null,null,null);"function"==typeof m&&m(p),p.options.__hasBlocks={script:!0,template:!0},p.options.__file="client/src/container_workspace/components/modal/WorkspaceAccessModal.vue";i.default=p.exports},ezt2:function(e,i,a){var n={"./card/DiscussionCard":"Sue0","./card/DiscussionCard.vue":"Sue0","./card/DiscussionWithCommentCard":"xGki","./card/DiscussionWithCommentCard.vue":"xGki","./card/OriginalSpaceCard":"R6HV","./card/OriginalSpaceCard.vue":"R6HV","./card/WorkspaceContributeCard":"4B50","./card/WorkspaceContributeCard.vue":"4B50","./card/WorkspaceMemberCard":"wa1w","./card/WorkspaceMemberCard.vue":"wa1w","./content/tabs/WorkspaceDiscussionTab":"lpqj","./content/tabs/WorkspaceDiscussionTab.vue":"lpqj","./content/tabs/WorkspaceLibraryTab":"bH8R","./content/tabs/WorkspaceLibraryTab.vue":"bH8R","./content/tabs/WorkspaceMembersTab":"KJhw","./content/tabs/WorkspaceMembersTab.vue":"KJhw","./contribution/Share":"Pcje","./contribution/Share.vue":"Pcje","./create/ContributeWorkspace":"BC15","./create/ContributeWorkspace.vue":"BC15","./dropdown/WorkspaceDropdown":"WDs9","./dropdown/WorkspaceDropdown.vue":"WDs9","./filter/DiscussionFilter":"48jh","./filter/DiscussionFilter.vue":"48jh","./filter/MemberSearchBox":"HgPy","./filter/MemberSearchBox.vue":"HgPy","./filter/WorkspaceFileFilter":"4Mpf","./filter/WorkspaceFileFilter.vue":"4Mpf","./filter/WorkspaceFilter":"nWqs","./filter/WorkspaceFilter.vue":"nWqs","./form/EditPostDiscussionForm":"k0LM","./form/EditPostDiscussionForm.vue":"k0LM","./form/PostDiscussionForm":"CdXQ","./form/PostDiscussionForm.vue":"CdXQ","./form/WorkspaceAccessForm":"BPqQ","./form/WorkspaceAccessForm.vue":"BPqQ","./form/WorkspaceDescriptionForm":"3MFw","./form/WorkspaceDescriptionForm.vue":"3MFw","./form/WorkspaceDiscussionForm":"hYrG","./form/WorkspaceDiscussionForm.vue":"hYrG","./form/WorkspaceForm":"wzO4","./form/WorkspaceForm.vue":"wzO4","./form/upload/SpaceImagePicker":"lzVh","./form/upload/SpaceImagePicker.vue":"lzVh","./grid/SpaceCardsGrid":"q9D0","./grid/SpaceCardsGrid.vue":"q9D0","./head/EmptySpacesHeader":"oZB7","./head/EmptySpacesHeader.vue":"oZB7","./head/WorkspaceFileHeader":"F98r","./head/WorkspaceFileHeader.vue":"F98r","./head/WorkspacePageHeader":"A300","./head/WorkspacePageHeader.vue":"A300","./modal/WorkspaceAccessModal":"eeTD","./modal/WorkspaceAccessModal.vue":"eeTD","./modal/WorkspaceFileViewModal":"p370","./modal/WorkspaceFileViewModal.vue":"p370","./modal/WorkspaceModal":"HKzo","./modal/WorkspaceModal.vue":"HKzo","./modal/WorkspaceWarningModal":"cIrp","./modal/WorkspaceWarningModal.vue":"cIrp","./profile/DiscussionAvatar":"Kwxl","./profile/DiscussionAvatar.vue":"Kwxl","./profile/PostAvatar":"ZnYt","./profile/PostAvatar.vue":"ZnYt","./recommend/RecommendedSpaces":"Re3N","./recommend/RecommendedSpaces.vue":"Re3N","./sidepanel/WorkspaceControlMenu":"LmW+","./sidepanel/WorkspaceControlMenu.vue":"LmW+","./sidepanel/WorkspaceMenu":"XPV3","./sidepanel/WorkspaceMenu.vue":"XPV3","./sidepanel/WorkspaceSidePanel":"sI8u","./sidepanel/WorkspaceSidePanel.vue":"sI8u","./sidepanel/content/WorkspaceAccess":"hbkh","./sidepanel/content/WorkspaceAccess.vue":"hbkh","./sidepanel/content/WorkspaceDescription":"vrou","./sidepanel/content/WorkspaceDescription.vue":"vrou","./sidepanel/content/WorkspacePrimaryAction":"MVIO","./sidepanel/content/WorkspacePrimaryAction.vue":"MVIO","./table/WorkspaceFileTable":"PLRA","./table/WorkspaceFileTable.vue":"PLRA"};function t(e){var i=r(e);return a(i)}function r(e){if(!a.o(n,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return n[e]}t.keys=function(){return Object.keys(n)},t.resolve=r,e.exports=t,t.id="ezt2"},fCWf:function(e,i){e.exports=tui.require("tui/components/links/ActionLink")},fUGz:function(e,i){e.exports=tui.require("container_workspace/components/card/OriginalSpaceCard")},g0Fk:function(e,i){e.exports=tui.require("totara_engage/components/form/InlineEditing")},g5S5:function(e,i){e.exports=tui.require("container_workspace/components/head/EmptySpacesHeader")},gLvT:function(e,i){e.exports=tui.require("tui/components/dropdown/Dropdown")},grGL:function(e,i){e.exports=tui.require("totara_engage/components/contribution/Contribute")},gsPT:function(e,i){e.exports=tui.require("container_workspace/components/form/WorkspaceForm")},hCGN:function(e,i){e.exports=tui.require("tui/components/icons/common/More")},hYrG:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Form",{staticClass:"tui-workspaceDiscussionForm",attrs:{vertical:!0,"input-width":"full"}},[a("FormRow",{attrs:{hidden:!0,label:e.$str("discussion","container_workspace"),required:!0},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("WekaEditor",{key:e.editorKey,staticClass:"tui-workspaceDiscussionForm__editor",attrs:{id:n,component:"container_workspace",area:"discussion","instance-id":e.discussionId,doc:e.formContent.document,placeholder:e.$str("start_discussion","container_workspace")},on:{update:e.handleUpdate}})]}}])}),e._v(" "),a("ButtonGroup",{staticClass:"tui-workspaceDiscussionForm__buttonGroup"},[a("LoadingButton",{attrs:{loading:e.submitting,disabled:e.disableSubmit,"aria-disabled":e.disableSubmit,"aria-label":e.submitButtonText,text:e.submitButtonText,primary:!0},on:{click:function(i){return i.preventDefault(),e.submit(i)}}}),e._v(" "),e.showCancelButton?a("CancelButton",{attrs:{disabled:e.submitting},on:{click:function(i){return i.preventDefault(),e.$emit("cancel")}}}):e._e()],1)],1)};n._withStripped=!0;var t=a("i/kK"),r=a.n(t),s=a("nEm4"),o=a.n(s),d=a("BN8m"),l=a.n(d),c=a("nXMa"),u=a.n(c),m=a("rLBA"),p=a.n(m),k=a("2wx7"),v=a.n(k),_=a("FoZm"),g=a("TXEh"),f={components:{FormRow:r.a,Form:o.a,ButtonGroup:l.a,CancelButton:u.a,LoadingButton:p.a,WekaEditor:v.a},props:{submitting:Boolean,discussionId:{type:[String,Number],default:null},content:{type:String,default:null},contentFormat:{type:[String,Number],default:()=>_.FORMAT_JSON_EDITOR},showCancelButton:{type:Boolean,default:!0},submitButtonText:{type:String,default(){return this.$str("post","moodle")}}},data:()=>({editorKey:"editor-weka-"+Object(g.uniqueId)(),formContent:{document:null,isEmpty:!0,itemId:null}}),computed:{disableSubmit(){return this.formContent.isEmpty||this.submitting}},watch:{content:{immediate:!0,handler(e){if(_.FORMAT_JSON_EDITOR==this.contentFormat){if(!e)return this.formContent.document=null,void(this.formContent.isEmpty=!0);this.formContent.document=JSON.parse(this.content),this.formContent.isEmpty=!1}}}},methods:{submit(){this.$emit("submit",{content:JSON.stringify(this.formContent.document),itemId:this.formContent.itemId}),this.formContent.document=null,this.formContent.isEmpty=!0,this.formContent.itemId=null,this.editorKey="editor-weka-"+Object(g.uniqueId)(),this.$forceUpdate()},handleUpdate(e){this.$_readJson(e)},$_readJson:Object(g.debounce)((function(e){this.formContent.document=e.getJSON(),this.formContent.isEmpty=e.isEmpty(),this.formContent.itemId=e.getFileStorageItemId()}),250,{perArgs:!1})}},b=a("KHd+"),N=function(e){e.options.__langStrings={container_workspace:["discussion","start_discussion"],moodle:["post"]}},w=Object(b.a)(f,n,[],!1,null,null,null);"function"==typeof N&&N(w),w.options.__hasBlocks={script:!0,template:!0},w.options.__file="client/src/container_workspace/components/form/WorkspaceDiscussionForm.vue";i.default=w.exports},hbkh:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceAccess"},[a("ModalPresenter",{attrs:{open:e.modal.access},on:{"request-close":function(i){e.modal.access=!1}}},[a("WorkspaceAccessModal",{attrs:{"selected-topics":e.selectedTopics,submitting:e.updating},on:{"submit-form":e.updateWorkspace}})],1),e._v(" "),a("div",{staticClass:"tui-workspaceAccess__info"},[a("p",{staticClass:"tui-workspaceAccess__info__timeDescription"},[e._v("\n      "+e._s(e.timeDescription)+"\n    ")]),e._v(" "),a("InlineEditing",{staticClass:"tui-workspaceAccess__info__inlineEditing",attrs:{"update-able":e.updateAble,"full-width":!0},on:{click:function(i){e.modal.access=!0}}},[a("div",{staticClass:"tui-workspaceAccess__info__inlineEditing__accessBox",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"tui-workspaceAccess__info__inlineEditing__accessBox__access"},[a("AccessIcon",{staticClass:"tui-workspaceAccess__info__inlineEditing__accessBox__access__icon",attrs:{access:e.accessValue,size:"200"}}),e._v(" "),a("span",[e._v(" "+e._s(e.$str("public","totara_engage"))+" ")])],1),e._v(" "),a("div",{staticClass:"tui-workspaceAccess__info__inlineEditing__accessBox__topics"},[a("TagIcon",{attrs:{"custom-class":["tui-icon--dimmed","tui-workspaceAccess__info__inlineEditing__accessBox__topics__icon"],size:"200"}}),e._v(" "),a("div",{staticClass:"tui-workspaceAccess__info__inlineEditing__accessBox__topics__box"},e._l(e.selectedTopics,(function(i,n){var t=i.value;return a("Tag",{key:n,staticClass:"tui-workspaceAccess__info__inlineEditing__accessBox__topics__box__topic",attrs:{text:t,href:e.$url("/totara/catalog/index.php")}})})),1)],1)])])],1)],1)};n._withStripped=!0;var t=a("+1Jo"),r=a.n(t),s=a("YMfc"),o=a.n(s),d=a("iZSA"),l=a.n(d),c=a("g0Fk"),u=a.n(c),m=a("Mnur"),p=a.n(m),k=a("cseK"),v=a.n(k),_=a("vyVp"),g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_update_workspace_access"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topics"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspace"},name:{kind:"Name",value:"container_workspace_update"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"topics"},value:{kind:"Variable",name:{kind:"Name",value:"topics"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner_job_assignments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]}}]},f={components:{WorkspaceAccessModal:v.a,AccessIcon:r.a,Tag:o.a,TagIcon:l.a,InlineEditing:u.a,ModalPresenter:p.a},props:{workspaceId:{type:[Number,String],required:!0},timeDescription:{type:String,required:!0},accessValue:{type:String,required:!0},selectedTopics:{type:Array,required:!0,validator:e=>0===(e=Array.prototype.filter.call(e,e=>!("id"in e)||!("value"in e))).length},updateAble:{type:Boolean,required:!0}},data:()=>({updating:!1,modal:{access:!1}}),computed:{owner(){return this.workspace.owner?this.workspace.owner:{}}},methods:{async updateWorkspace({topics:e}){if(!this.updating&&this.updateAble){this.updating=!0;try{const{workspace:i}=await this.$apollo.mutate({mutation:g,refetchAll:!1,variables:{id:this.workspaceId,topics:Array.prototype.map.call(e,({id:e})=>e)}});this.modal.access=!1,this.$emit("update-workspace",i)}catch(e){await Object(_.notify)({message:this.$str("error:update","container_workspace",this.workspace.name),type:"error",duration:5e3})}finally{this.updating=!1}}}}},b=a("KHd+"),N=function(e){e.options.__langStrings={totara_engage:["public"],container_workspace:["error:update"]}},w=Object(b.a)(f,n,[],!1,null,null,null);"function"==typeof N&&N(w),w.options.__hasBlocks={script:!0,template:!0},w.options.__file="client/src/container_workspace/components/sidepanel/content/WorkspaceAccess.vue";i.default=w.exports},"i/kK":function(e,i){e.exports=tui.require("tui/components/form/FormRow")},iZSA:function(e,i){e.exports=tui.require("tui/components/icons/common/Tags")},jJ8l:function(e,i){e.exports=tui.require("tui/components/card/Card")},k0LM:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return e.$apollo.loading?e._e():a("WorkspaceDiscussionForm",{staticClass:"tui-editPostDiscussionForm",attrs:{content:e.discussion.draft_content,"content-format":e.discussion.content_format,"submit-button-text":e.$str("done","container_workspace"),submitting:e.submitting,"discussion-id":e.discussionId},on:{submit:e.submitUpdate,cancel:function(i){return e.$emit("cancel")}}})};n._withStripped=!0;var t=a("M3bB"),r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_get_discussion_draft_content"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"discussion"},name:{kind:"Name",value:"container_workspace_discussion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"draft_content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"content_format"},arguments:[],directives:[]}]}}]}}]},s={components:{WorkspaceDiscussionForm:a.n(t).a},props:{discussionId:{type:[String,Number],required:!0},submitting:Boolean},apollo:{discussion:{query:r,fetchPolicy:"no-cache",variables(){return{id:this.discussionId}}}},data:()=>({discussion:{}}),methods:{submitUpdate({content:e,itemId:i}){this.$emit("submit",{content:e,contentFormat:this.discussion.content_format,itemId:i})}}},o=a("KHd+"),d=function(e){e.options.__langStrings={container_workspace:["done"]}},l=Object(o.a)(s,n,[],!1,null,null,null);"function"==typeof d&&d(l),l.options.__hasBlocks={script:!0,template:!0},l.options.__file="client/src/container_workspace/components/form/EditPostDiscussionForm.vue";i.default=l.exports},llww:function(e,i){e.exports=tui.require("container_workspace/components/form/WorkspaceDescriptionForm")},lnEz:function(e,i,a){"use strict";a.r(i),i.default={data:()=>({isLoadMoreVisible:!1}),methods:{async onScrollToBottom(){this.isLoadMoreVisible||(await this.loadMoreItems(),this.isLoadMoreVisible=!0)},async loadMore(){await this.loadMoreItems(),this.isLoadMoreVisible=!1}}}},lpqj:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceDiscussionTab"},[e.canPostDiscussion?a("PostDiscussionForm",{attrs:{"avatar-image-alt":e.user.profileimagealt||"","avatar-image-src":e.user.profileimageurl,submitting:e.submitting,"avatar-image-url":e.$url("/user/profile",{id:e.user.id})},on:{submit:e.submit}}):e._e(),e._v(" "),a("Separator"),e._v(" "),a("DiscussionFilter",{staticClass:"tui-workspaceDiscussionTab__filter",attrs:{sort:e.sort,"search-term":e.searchTerm,"workspace-id":e.workspaceId},on:{"update-search-term":function(i){e.searchTerm=i},"update-sort":function(i){e.sort=i}}}),e._v(" "),a("VirtualScroll",{attrs:{"data-key":"id","data-list":e.page.discussions,"aria-label":e.$str("discussions_list","container_workspace"),"is-loading":e.$apollo.loading,"page-mode":!0},on:{scrollbottom:e.onScrollToBottom},scopedSlots:e._u([{key:"item",fn:function(i){var n=i.item,t=i.posInSet,r=i.setSize;return[a("DiscussionCard",{staticClass:"tui-workspaceDiscussionTab__card",attrs:{"creator-fullname":n.owner.fullname,"creator-image-alt":n.owner.profileimagealt||"","creator-image-src":n.owner.profileimageurl,"creator-id":n.owner.id,"discussion-content":n.content,"time-description":n.time_description,"total-comments":n.total_comments,"total-reactions":n.total_reactions,"discussion-id":n.id,"first-comment-cursor":n.comment_cursor,reacted:n.discussion_interactor.reacted,"update-able":n.discussion_interactor.can_update,"delete-able":n.discussion_interactor.can_delete,"comment-able":n.discussion_interactor.can_comment,"react-able":n.discussion_interactor.can_react,edited:n.edited,"aria-posinset":t,"aria-setsize":r,"aria-labelledby":e.$id("item-"+n.id),"label-id":e.$id("item-"+n.id)},on:{"update-discussion-react-status":e.updateDiscussionReactStatus,"update-discussion":e.updateDiscussion,"add-new-comment":e.addNewComment,"delete-discussion":e.deleteDiscussion}})]}},{key:"footer",fn:function(){return[a("PageLoader",{attrs:{fullpage:!1,loading:e.$apollo.loading}})]},proxy:!0}])}),e._v(" "),e.loadMoreVisibility?a("div",{staticClass:"tui-workspaceDiscussionTab__loadMoreContainer"},[a("div",{staticClass:"tui-workspaceDiscussionTab__viewedDiscussions"},[e._v("\n      "+e._s(e.$str("vieweditems","container_workspace",e.page.discussions.length))+"\n      "+e._s(e.$str("total_discussions","container_workspace",e.page.cursor.total))+"\n    ")]),e._v(" "),a("Button",{staticClass:"tui-workspaceDiscussionTab__loadMore",attrs:{text:e.$str("loadmore","container_workspace")},on:{click:e.loadMore}})],1):e._e()],1)};n._withStripped=!0;var t=a("BxDI"),r=a.n(t),s=a("Emo+"),o=a.n(s),d=a("Q6By"),l=a.n(d),c=a("UpZR"),u=a.n(c),m=a("vyVp"),p=a("z16U"),k=a.n(p),v=a("QP7s"),_={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_post_discussion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"discussion"},name:{kind:"Name",value:"container_workspace_create_discussion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"content_format"},value:{kind:"Variable",name:{kind:"Name",value:"content_format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"total_comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_comment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comment_cursor"},arguments:[],directives:[]}]}}]}}]},g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_get_discussions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search_term"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_discussion_sort"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"container_workspace_discussion_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"pinned"},value:{kind:"BooleanValue",value:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"discussions"},name:{kind:"Name",value:"container_workspace_discussions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"Argument",name:{kind:"Name",value:"pinned"},value:{kind:"BooleanValue",value:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"total_comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_comment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comment_cursor"},arguments:[],directives:[]}]}}]}}]},f=a("R5BP"),b=a.n(f),N=a("vF5l"),w=a.n(N),h=a("AdjL"),y=a.n(h),S=a("oFhe"),F=a.n(S),C={components:{Separator:r.a,PostDiscussionForm:k.a,DiscussionCard:o.a,DiscussionFilter:l.a,VirtualScroll:b.a,Button:w.a,PageLoader:y.a},mixins:[F.a],props:{workspaceId:{type:[Number,String],required:!0},selectedSort:{type:String,required:!0}},apollo:{interactor:{query:v.a,variables(){return{workspace_id:this.workspaceId}}},page:{query:g,fetchPolicy:"network-only",variables(){return{workspace_id:this.workspaceId,sort:this.sort,search_term:this.searchTerm}},update:({cursor:e,discussions:i})=>({cursor:e,discussions:i})}},data(){return{interactor:{},submitting:!1,page:{cursor:{total:0,next:null},discussions:[]},sort:this.selectedSort,searchTerm:""}},computed:{canPostDiscussion(){return this.interactor.joined},user(){return this.interactor.user?this.interactor.user:{}},discussionQueryVariables(){return{workspace_id:this.workspaceId,sort:this.sort,search_term:this.searchTerm}},loadMoreVisibility(){return this.isLoadMoreVisible&&this.page.cursor.next&&!this.$apollo.loading}},watch:{selectedSort(e){this.sort=e}},methods:{$_getDiscussionCache(){return u.a.readQuery({query:g,variables:this.discussionQueryVariables})},async submit({content:e,itemId:i}){if(!this.submitting){this.submitting=!0;try{await this.$apollo.mutate({mutation:_,refetchAll:!1,variables:{workspace_id:this.workspaceId,content:e,draft_id:i},update:(e,{data:{discussion:i}})=>{const a={workspace_id:this.workspaceId,sort:this.sort,search_term:this.searchTerm};let{cursor:n,discussions:t}=e.readQuery({query:g,variables:a});n=Object.assign({},n),n.total+=1,e.writeQuery({query:g,variables:a,data:{cursor:n,discussions:Array.prototype.concat.call([i],t)}})}})}catch(e){await Object(m.notify)({message:this.$str("error:create_discussion","container_workspace",this.workspaceId),type:"error"})}finally{this.submitting=!1}}},updateDiscussionReactStatus({discussionId:e,status:i}){let{discussions:a,cursor:n}=this.$_getDiscussionCache();u.a.writeQuery({query:g,variables:this.discussionQueryVariables,data:{cursor:n,discussions:Array.prototype.map.call(a,a=>{if(a.id==e){let e=Object.assign({},a),n=Object.assign({},e.discussion_interactor);return n.reacted=i,e.discussion_interactor=n,i?e.total_reactions+=1:0!=e.total_reactions&&(e.total_reactions-=1),e}return a})}})},updateDiscussion(e){let{discussions:i,cursor:a}=this.$_getDiscussionCache();u.a.writeQuery({query:g,variables:this.discussionQueryVariables,data:{cursor:a,discussions:Array.prototype.map.call(i,i=>i.id===e.id?e:i)}})},addNewComment(e){let{discussions:i,cursor:a}=this.$_getDiscussionCache();u.a.writeQuery({query:g,variables:this.discussionQueryVariables,data:{cursor:a,discussions:Array.prototype.map.call(i,i=>{if(i.id==e){let e=Object.assign({},i);return e.total_comments+=1,e}return i})}})},async loadMoreItems(){this.page.cursor.next&&this.$apollo.queries.page.fetchMore({variables:{cursor:this.page.cursor.next,workspace_id:this.workspaceId,sort:this.sort,search_term:this.searchTerm},updateQuery:(e,{fetchMoreResult:i})=>{const a=i,n=e.discussions.concat(a.discussions);return{cursor:a.cursor,discussions:n}}})},deleteDiscussion(e){let{discussions:i,cursor:a}=this.$_getDiscussionCache();u.a.writeQuery({query:g,variables:this.discussionQueryVariables,data:{cursor:a,discussions:Array.prototype.filter.call(i,({id:i})=>i!=e)}})}}},x=a("KHd+"),A=function(e){e.options.__langStrings={container_workspace:["error:create_discussion","loadmore","total_discussions","vieweditems","discussions_list"]}},V=Object(x.a)(C,n,[],!1,null,null,null);"function"==typeof A&&A(V),V.options.__hasBlocks={script:!0,template:!0},V.options.__file="client/src/container_workspace/components/content/tabs/WorkspaceDiscussionTab.vue";i.default=V.exports},lzVh:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-spaceImagePicker",class:{"tui-spaceImagePicker--loading":e.$apollo.loading}},[e.$apollo.loading?a("Spinner"):a("Upload",{attrs:{"repository-id":e.metadata.repositoryId,"item-id":e.metadata.itemId,href:e.metadata.url,"accepted-types":e.metadata.acceptTypes,overwrite:!0,"one-file":!0},on:{load:e.handleFileLoaded,error:e.handleError,progress:e.progressing},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.selectEvents,t=i.inputEvents;return a("div",{staticClass:"tui-spaceImagePicker__image",class:{"tui-spaceImagePicker__image--progressing":e.isUploadImageLoaded},style:e.backgroundStyle},[a("input",e._g({directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputFile",attrs:{type:"file"}},t)),e._v(" "),a("div",{staticClass:"tui-spaceImagePicker__image__loader"},[a("PageLoader",{attrs:{loading:e.isUploadImageLoaded}})],1),e._v(" "),a("Button",e._g({directives:[{name:"show",rawName:"v-show",value:!e.isUploadImageLoaded,expression:"!isUploadImageLoaded"}],staticClass:"tui-spaceImagePicker__image__button",attrs:{"aria-label":e.$str("edit_image","container_workspace"),text:e.$str("edit_image","container_workspace"),styleclass:{small:!0}}},n))],1)}}])})],1)};n._withStripped=!0;var t=a("CiZ3"),r=a.n(t),s=a("vF5l"),o=a.n(s),d=a("0viy"),l=a.n(d),c=a("AdjL"),u=a.n(c),m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_upload_metadata"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"file_area"},name:{kind:"Name",value:"container_workspace_file_area"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"item_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accept_types"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"image_url"},name:{kind:"Name",value:"container_workspace_workspace_image"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[]}]}}]};const p=Object.prototype.hasOwnProperty;var k={components:{Upload:r.a,Button:o.a,Spinner:l.a,PageLoader:u.a},props:{draftId:[String,Number],workspaceId:[Number,String]},apollo:{metadata:{query:m,fetchPolicy:"network-only",skip(){return!(!p.call(this.metadata,"itemId")||!p.call(this.metadata,"workspaceId"))&&(this.metadata.itemId==this.draftId||this.metadata.workspaceId==this.workspaceId)},variables(){return{workspace_id:this.workspaceId,draft_id:this.draftId}},update({file_area:{item_id:e,repository_id:i,url:a,accept_types:n},image_url:t}){let r={itemId:e,repositoryId:i,acceptTypes:n,url:a,image:t,workspaceId:this.workspaceId};return this.$emit("ready",r),r}}},data:()=>({metadata:{},uploadedImage:null,isUploadImageLoaded:!1}),computed:{backgroundStyle(){return this.$apollo.loading?{"background-image":null}:this.uploadedImage?{"background-image":`url("${this.uploadedImage}")`}:{"background-image":`url("${this.metadata.image}")`}}},methods:{handleFileLoaded({file:{url:e}}){this.uploadedImage=e,this.isUploadImageLoaded=!1,this.$emit("clear-error")},handleError(){this.uploadedImage=null,this.isUploadImageLoaded=!1,this.$emit("upload-error",this.$str("error:upload_image","container_workspace"))},progressing(){this.isUploadImageLoaded=!0}}},v=a("KHd+"),_=function(e){e.options.__langStrings={container_workspace:["edit_image","error:upload_image"]}},g=Object(v.a)(k,n,[],!1,null,null,null);"function"==typeof _&&_(g),g.options.__hasBlocks={script:!0,template:!0},g.options.__file="client/src/container_workspace/components/form/upload/SpaceImagePicker.vue";i.default=g.exports},nBTD:function(e,i){e.exports=tui.require("tui/components/form/FieldError")},nEm4:function(e,i){e.exports=tui.require("tui/components/form/Form")},nWqs:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceFilter"},[e.$apollo.loading?e._e():[a("FilterBar",{staticClass:"tui-workspaceFilter__filter",attrs:{title:e.$str("find_spaces","container_workspace")},scopedSlots:e._u([{key:"filters-left",fn:function(i){var n=i.stacked;return[a("SelectFilter",{attrs:{label:e.$str("topic","totara_topic"),"show-label":!0,options:e.options.topics,stacked:n},model:{value:e.selection.topic,callback:function(i){e.$set(e.selection,"topic",i)},expression:"selection.topic"}}),e._v(" "),a("SelectFilter",{attrs:{label:e.$str("membership","container_workspace"),"show-label":!0,options:e.options.sources,stacked:n},model:{value:e.selection.source,callback:function(i){e.$set(e.selection,"source",i)},expression:"selection.source"}})]}},{key:"filters-right",fn:function(i){var n=i.stacked;return[a("SearchBox",{attrs:{label:e.$str("search_spaces","container_workspace"),placeholder:e.$str("search_spaces","container_workspace"),"show-label":!1,stacked:n},on:{submit:e.submitSearch},model:{value:e.selection.searchTerm,callback:function(i){e.$set(e.selection,"searchTerm",i)},expression:"selection.searchTerm"}})]}}],null,!1,4194725960),model:{value:e.selection,callback:function(i){e.selection=i},expression:"selection"}}),e._v(" "),a("div",{staticClass:"tui-workspaceFilter__sortFilter"},[a("SelectFilter",{attrs:{label:e.$str("sortby","moodle"),"show-label":!0,options:e.options.sorts},model:{value:e.selection.sort,callback:function(i){e.$set(e.selection,"sort",i)},expression:"selection.sort"}})],1)]],2)};n._withStripped=!0;var t=a("59Wj"),r=a.n(t),s=a("49h4"),o=a.n(s),d=a("HSAV"),l=a.n(d),c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_workspace_filter_options"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"sources"},name:{kind:"Name",value:"container_workspace_workspace_sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"topics"},name:{kind:"Name",value:"totara_topic_system_topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"sorts"},name:{kind:"Name",value:"container_workspace_workspace_sorts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]},u={components:{FilterBar:r.a,SelectFilter:o.a,SearchBox:l.a},props:{selectedTopic:{type:[String,Number],default:0},selectedSource:{type:String,default:null},selectedSort:{type:String,default:null},searchTerm:{type:String,default:""}},apollo:{options:{query:c,update({sources:e,topics:i,sorts:a}){return(i=Array.prototype.map.call(i,({id:e,value:i})=>({id:String(e),label:i}))).unshift({id:0,label:this.$str("all","moodle")}),{topics:i,sources:Array.prototype.map.call(e,({value:e,label:i})=>({id:e,label:i})),sorts:Array.prototype.map.call(a,({value:e,label:i})=>({id:e,label:i}))}}}},data(){return{options:{},selection:{topic:this.selectedTopic,source:this.selectedSource,sort:this.selectedSort,searchTerm:this.searchTerm}}},methods:{submitSearch(){this.$emit("submit-search",this.selection)}}},m=a("KHd+"),p=function(e){e.options.__langStrings={container_workspace:["membership","search_spaces","find_spaces"],totara_topic:["topic"],moodle:["all","sortby"]}},k=Object(m.a)(u,n,[],!1,null,null,null);"function"==typeof p&&p(k),k.options.__hasBlocks={script:!0,template:!0},k.options.__file="client/src/container_workspace/components/filter/WorkspaceFilter.vue";i.default=k.exports},nXMa:function(e,i){e.exports=tui.require("tui/components/buttons/Cancel")},o5Iv:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return e.$apollo.queries.discussion.loading?e._e():a("Layout",{staticClass:"tui-workspaceDiscussionPage",attrs:{"show-left-side-panel-control":!1,"show-left-side-panel":!0,"show-right-side-panel":!0,"show-right-side-panel-control":!0,"left-side-panel-initially-open":!0,"right-side-panel-initially-open":!0,"right-side-panel-animated":!0,breakpoints:e.breakPoints,boundaries:e.boundaries}},[a("WorkspaceMenu",{attrs:{slot:"sidePanelLeft","selected-workspace-id":e.discussion.workspace_id},slot:"sidePanelLeft"}),e._v(" "),a("div",{staticClass:"tui-workspaceDiscussionPage__content",attrs:{slot:"column"},slot:"column"},[a("a",{staticClass:"tui-workspaceDiscussionPage__content__backButton",attrs:{href:e.$url("/container/type/workspace/workspace.php",{id:e.discussion.workspace_id})}},[a("BackArrow",{attrs:{size:"200"}}),e._v(" "),a("span",[e._v(" "+e._s(e.$str("discussions","container_workspace"))+" ")])],1),e._v(" "),a("DiscussionCard",{staticClass:"tui-workspaceDiscussionPage__content__discussion",attrs:{"discussion-id":e.discussion.id,"total-reactions":e.discussion.total_reactions,"total-comments":e.discussion.total_comments,"time-description":e.discussion.time_description,reacted:e.discussion.discussion_interactor.reacted,"comment-able":e.discussion.discussion_interactor.can_comment,"update-able":e.discussion.discussion_interactor.can_update,"delete-able":e.discussion.discussion_interactor.can_delete,"react-able":e.discussion.discussion_interactor.can_react,"report-able":e.discussion.discussion_interactor.can_report,"creator-id":e.discussion.owner.id,"creator-fullname":e.discussion.owner.fullname,"creator-image-alt":e.discussion.owner.profileimagealt||"","creator-image-src":e.discussion.owner.profileimageurl,"discussion-content":e.discussion.content,"show-discussion-link":!1,edited:e.discussion.edited},on:{"update-react-status":e.updateReactStatus,"update-discussion":e.updateDiscussion,"trigger-comment":e.scrollToCommentForm}}),e._v(" "),a("h3",{staticClass:"tui-workspaceDiscussionPage__content__title"},[a("span",[e._v("\n        "+e._s(e.$str("comments","totara_comment",e.discussion.total_comments))+"\n      ")]),e._v(" "),e.submitting?a("Spinner",{attrs:{size:"300"}}):e._e()],1),e._v(" "),a("CommentBox",{staticClass:"tui-workspaceDiscussionPage__content__commentBox",attrs:{area:"discussion",component:"container_workspace","instance-id":e.discussion.id,size:e.size,"submit-form-button-text":e.$str("comment","container_workspace"),"show-like-button-text":!0,"show-reply-button-text":!0,"with-border":!0,submitting:e.submitting,"comment-able":e.discussion.discussion_interactor.can_comment,"comment-inline-head":!0},on:{"update-submitting":function(i){e.submitting=i},"create-comment":e.updateDiscussionComments,"form-ready":e.setFormElement}})],1),e._v(" "),a("WorkspaceSidePanel",{attrs:{slot:"sidePanelRight","workspace-id":e.discussion.workspace_id},slot:"sidePanelRight"})],1)};n._withStripped=!0;var t=a("AMZF"),r=a.n(t),s=a("TBZn"),o=a("Hl3G"),d=a.n(o),l=a("5gBL"),c=a.n(l),u=a("NHyM"),m=a.n(u),p=a("Lht0"),k=a.n(p),v=a("Z82V"),_=a.n(v),g=a("UpZR"),f=a.n(g),b=a("0viy"),N=a.n(b),w=a("yAFK"),h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_get_discussion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"discussion"},name:{kind:"Name",value:"container_workspace_discussion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"total_comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_comment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comment_cursor"},arguments:[],directives:[]}]}}]}}]},y={components:{Layout:r.a,WorkspaceMenu:d.a,DiscussionCard:c.a,WorkspaceSidePanel:m.a,BackArrow:k.a,CommentBox:_.a,Spinner:N.a},props:{discussionId:{type:[Number,String],required:!0}},apollo:{discussion:{query:h,variables(){return{id:this.discussionId}}}},data:()=>({discussion:null,submitting:!1,formElement:null}),computed:{breakPoints:()=>s.workspaceBreakPoint,boundaries:()=>s.workspaceBoundaries,size:()=>w.SIZE_LARGE},methods:{scrollToCommentForm(){this.formElement&&this.formElement.scrollIntoView()},setFormElement(e){this.formElement=e},updateDiscussion(e){f.a.writeQuery({query:h,variables:{id:this.discussionId},data:{discussion:e}})},updateDiscussionComments(){let{discussion:e}=f.a.readQuery({query:h,variables:{id:this.discussionId}});e=Object.assign({},e),e.total_comments+=1,f.a.writeQuery({query:h,variables:{id:this.discussionId},data:{discussion:e}})},updateReactStatus({status:e}){let{discussion:i}=f.a.readQuery({query:h,variables:{id:this.discussionId}});i=Object.assign({},i),e?i.total_reactions+=1:0!=i.total_reactions&&(i.total_reactions-=1),i.discussion_interactor=Object.assign({},i.discussion_interactor),i.discussion_interactor.reacted=e,f.a.writeQuery({query:h,variables:{id:this.discussionId},data:{discussion:i}})}}},S=a("KHd+"),F=function(e){e.options.__langStrings={container_workspace:["discussions","back_to_discussions","comment"],totara_comment:["comments"]}},C=Object(S.a)(y,n,[],!1,null,null,null);"function"==typeof F&&F(C),C.options.__hasBlocks={script:!0,template:!0},C.options.__file="client/src/container_workspace/pages/WorkspaceDiscussionPage.vue";i.default=C.exports},oFhe:function(e,i){e.exports=tui.require("container_workspace/mixins/virtual_scroll_mixin")},oMuj:function(e,i){e.exports=tui.require("tui/components/form/InputText")},oZB7:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-emptySpacesHeader"},[a("ModalPresenter",{attrs:{open:e.openModal},on:{"request-close":function(i){e.openModal=!1}}},[a("WorkspaceModal",{on:{"create-workspace":e.navigateToSpace}})],1),e._v(" "),a("h1",{staticClass:"tui-emptySpacesHeader__title"},[e._v("\n    "+e._s(e.$str("no_spaces","container_workspace"))+"\n  ")]),e._v(" "),a("div",{staticClass:"tui-emptySpacesHeader__actionBox"},[a("ActionLink",{staticClass:"tui-emptySpacesHeader__actionBox__actionLink",attrs:{href:e.$url("/container/type/workspace/spaces.php"),text:e.$str("find_spaces","container_workspace"),styleclass:{primary:!0}}}),e._v(" "),a("p",[a("span",[e._v(e._s(e.$str("or","container_workspace")))]),e._v(" "),a("a",{attrs:{href:"#"},on:{click:function(i){i.preventDefault(),e.openModal=!0}}},[e._v("\n        "+e._s(e.$str("create_space","container_workspace"))+"\n      ")])]),e._v(" "),a("Popover",{attrs:{position:"top"}},[a("a",{attrs:{slot:"trigger",href:"#"},slot:"trigger"},[e._v("\n        "+e._s(e.$str("about_spaces","container_workspace"))+"\n      ")]),e._v(" "),a("p",[e._v("\n        "+e._s(e.$str("about_spaces_help","container_workspace"))+"\n      ")])])],1)],1)};n._withStripped=!0;var t=a("fCWf"),r=a.n(t),s=a("Mnur"),o=a.n(s),d=a("cNVA"),l=a.n(d),c=a("9G+f"),u=a.n(c),m={components:{ActionLink:r.a,ModalPresenter:o.a,WorkspaceModal:l.a,Popover:u.a},data:()=>({openModal:!1}),methods:{navigateToSpace({id:e}){this.openModal=!1,document.location.href=this.$url("/container/type/workspace/workspace.php",{id:e})}}},p=a("KHd+"),k=function(e){e.options.__langStrings={container_workspace:["no_spaces","find_spaces","or","create_space","about_spaces","about_spaces_help"]}},v=Object(p.a)(m,n,[],!1,null,null,null);"function"==typeof k&&k(v),v.options.__hasBlocks={script:!0,template:!0},v.options.__file="client/src/container_workspace/components/head/EmptySpacesHeader.vue";i.default=v.exports},p370:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Modal",{staticClass:"tui-workspaceFileViewModal",attrs:{dismissable:{overlayClose:!1,esc:!0,backdropClick:!0}}},[a("ModalContent",{staticClass:"tui-workspaceFileViewModal__content",attrs:{"close-button":!0}},[a("div",{staticClass:"tui-workspaceFileViewModal__header"},[a("p",{staticClass:"tui-workspaceFileViewModal__title"},[e._v(e._s(e.fileName))]),e._v(" "),a("div",{staticClass:"tui-workspaceFileViewModal__links"},[a("a",{staticClass:"tui-workspaceFileViewModal__discussion",attrs:{href:e.contextUrl}},[e._v("\n          "+e._s(e.$str("view_discussion","container_workspace"))+"\n        ")]),e._v(" "),a("a",{staticClass:"tui-workspaceFileViewModal__link",attrs:{href:e.downloadUrl}},[e._v("\n          "+e._s(e.$str("download","moodle"))+"\n        ")])])]),e._v(" "),"IMAGE"===e.fileType?[a("img",{staticClass:"tui-workspaceFileViewModal__media",attrs:{src:e.fileUrl,alt:e.altText}})]:"VIDEO"===e.fileType?[a("CoreVideoBlock",{staticClass:"tui-workspaceFileViewModal__media",attrs:{url:e.fileUrl,filename:e.fileName,mimetype:e.mimeType}})]:"AUDIO"===e.fileType?[a("audio",{staticClass:"tui-workspaceFileViewModal__audio",attrs:{controls:""}},[a("source",{attrs:{src:e.fileUrl,type:e.mimeType}})])]:a("div",{staticClass:"tui-workspaceFileViewModal__area"},[a("div",{staticClass:"tui-workspaceFileViewModal__area__icon"},[a("FileIcon",{attrs:{filename:e.fileName}})],1),e._v(" "),a("p",[e._v("\n        "+e._s(e.$str("file_preview_empty","container_workspace"))+"\n      ")])])],2)],1)};n._withStripped=!0;var t=a("tkAW"),r=a.n(t),s=a("u5iS"),o=a.n(s),d=a("rhow"),l=a.n(d),c=a("AL+t"),u=a.n(c),m={components:{Modal:r.a,ModalContent:o.a,FileIcon:l.a,CoreVideoBlock:u.a},props:{fileName:{type:String,required:!0},downloadUrl:{type:String,required:!0},contextUrl:{type:String,required:!0},fileUrl:{type:String,required:!0},extension:{type:String,required:!0},mimeType:{type:String,required:!0},fileType:{type:String,required:!0},altText:{type:String,required:!0}}},p=a("KHd+"),k=function(e){e.options.__langStrings={container_workspace:["view_discussion","file_preview_empty","file_image","file_video","file_audio"],moodle:["download"]}},v=Object(p.a)(m,n,[],!1,null,null,null);"function"==typeof k&&k(v),v.options.__hasBlocks={script:!0,template:!0},v.options.__file="client/src/container_workspace/components/modal/WorkspaceFileViewModal.vue";i.default=v.exports},pZp9:function(e,i){e.exports=tui.require("container_workspace/components/card/WorkspaceMemberCard")},pxdy:function(e,i){e.exports=tui.require("totara_engage/mixins/contribution_mixin")},q9D0:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-spaceCardsGrid"},e._l(e.rows,(function(i,n){var t=i.items;return a("Grid",{key:n,staticClass:"tui-spaceCardsGrid__row",attrs:{"max-units":e.maxGridUnits}},e._l(t,(function(i,n){var t=i.id,r=i.url,s=i.image,o=i.name,d=i.interactor,l=d.joined,c=d.can_join;return a("GridItem",{key:n,staticClass:"tui-spaceCardsGrid__row__card",attrs:{units:e.workspaceUnits}},[a("OriginalSpaceCard",{attrs:{"workspace-id":t,url:r,image:s,title:o,joined:l,"join-able":c,submitting:e.submitting},on:{"join-workspace":function(i){return e.$emit("join-workspace",i)}}})],1)})),1)})),1)};n._withStripped=!0;var t=a("NAOU"),r=a.n(t),s=a("D9If"),o=a.n(s),d=a("CWIl"),l=a("fUGz"),c={components:{OriginalSpaceCard:a.n(l).a,Grid:r.a,GridItem:o.a},props:{submitting:Boolean,maxGridUnits:{type:[Number,String],required:!0},workspaces:{type:Array,required:!0},workspaceUnits:{type:[Number,String],default:2}},computed:{rows(){return Object(d.calculateRow)(this.workspaces,this.workspacesPerRow)},workspacesPerRow(){return Math.floor(this.maxGridUnits/this.workspaceUnits)}}},u=a("KHd+"),m=Object(u.a)(c,n,[],!1,null,null,null);m.options.__hasBlocks={script:!0,template:!0},m.options.__file="client/src/container_workspace/components/grid/SpaceCardsGrid.vue";i.default=m.exports},qPS3:function(e,i,a){var n={".":"UWTz","./":"UWTz","./grid/grid":"USZJ","./grid/grid.js":"USZJ","./index":"UWTz","./index.js":"UWTz","./mixins/virtual_scroll_mixin":"lnEz","./mixins/virtual_scroll_mixin.js":"lnEz"};function t(e){var i=r(e);return a(i)}function r(e){if(!a.o(n,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return n[e]}t.keys=function(){return Object.keys(n)},t.resolve=r,e.exports=t,t.id="qPS3"},rLBA:function(e,i){e.exports=tui.require("totara_engage/components/buttons/LoadingButton")},rhow:function(e,i){e.exports=tui.require("tui/components/icons/files/compute/FileIcon")},s5vj:function(e,i){e.exports=tui.require("totara_engage/components/contribution/BaseContent")},sI8u:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceSidePanel"},[e.$apollo.loading?e._e():[a("div",{staticClass:"tui-workspaceSidePanel__ownerInfo"},[a("div",{staticClass:"tui-workspaceSidePanel__ownerInfo__actions"},[a("h5",{staticClass:"tui-workspaceSidePanel__ownerInfo__actions__head"},[e._v("\n          "+e._s(e.$str("owner","container_workspace"))+"\n        ")]),e._v(" "),e.own||e.deleteAble?a("WorkspaceDropdown",{staticClass:"tui-workspaceSidePanel__ownerInfo__actions__dropDown",attrs:{position:"bottom-right",actions:e.actions}}):e._e()],1),e._v(" "),a("MiniProfileCard",{staticClass:"tui-workspaceSidePanel__ownerInfo__profileCard",attrs:{email:e.owner.email,name:e.owner.fullname,mention:e.owner.fullname,"avatar-src":e.owner.profileimageurl,"avatar-alt":e.owner.profileimagealt||"","job-assignment":e.ownerJobAssignment,"no-border":!0,interactive:!1,"avatar-size":"small"}}),e._v(" "),a("ModalPresenter",{attrs:{open:e.modal.confirm},on:{"request-close":function(i){e.modal.confirm=!1}}},[a("WorkspaceWarningModal",{attrs:{title:e.$str("delete_warning_title","container_workspace"),"message-content":e.$str("delete_warning_msg","container_workspace"),"confirm-button-text":e.$str("delete_workspace","container_workspace")},on:{confirm:e.handleDelete}})],1)],1),e._v(" "),a("WorkspaceAccess",{staticClass:"tui-workspaceSidePanel__overview",attrs:{"workspace-id":e.workspaceId,"update-able":e.updateAble,"selected-topics":e.workspace.topics,"access-value":e.workspace.access,"time-description":e.workspace.time_description},on:{"update-workspace":e.updateWorkspace}}),e._v(" "),a("WorkspaceDescription",{staticClass:"tui-workspaceSidePanel__description",attrs:{content:e.workspace.description||"","workspace-id":e.workspaceId,"update-able":e.updateAble},on:{"update-workspace":e.updateWorkspace}}),e._v(" "),a("WorkspacePrimaryAction",{staticClass:"tui-workspaceSidePanel__primaryAction",attrs:{"join-able":e.joinAble,owner:e.own,joined:e.joined,"workspace-id":e.workspaceId,"workspace-name":e.workspace.name}})]],2)};n._withStripped=!0;var t=a("IMG+"),r=a.n(t),s=a("RVXm"),o=a.n(s),d=a("+MEP"),l=a.n(d),c=a("UpZR"),u=a.n(c),m=a("KOYE"),p=a.n(m),k=a("Mnur"),v=a.n(k),_=a("cIrp"),g=a("WDs9"),f=a("QgbB"),b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_delete_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"container_workspace_delete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[]}]}}]};const N=Object.prototype.hasOwnProperty;var w={components:{WorkspaceDescription:r.a,WorkspaceAccess:o.a,MiniProfileCard:l.a,WorkspacePrimaryAction:p.a,ModalPresenter:v.a,WorkspaceWarningModal:_.default,WorkspaceDropdown:g.default},props:{workspaceId:{type:[String,Number],required:!0}},apollo:{workspace:{query:f.a,variables(){return{id:this.workspaceId}}}},data:()=>({workspace:{},modal:{confirm:!1}}),computed:{updateAble(){if(!N.call(this.workspace,"interactor"))return!1;let{interactor:{can_update:e}}=this.workspace;return e},owner(){if(!N.call(this.workspace,"owner"))return{};let{owner:e}=this.workspace;return e},ownerJobAssignment(){if(!N.call(this.workspace,"owner_job_assignments"))return"";let e=Array.prototype.slice.call(this.workspace.owner_job_assignments);if(0===e.length)return"";let{fullname:i}=Array.prototype.shift.call(e);return i},deleteAble(){if(!N.call(this.workspace,"interactor"))return!1;let{interactor:{can_delete:e}}=this.workspace;return e},own(){if(!N.call(this.workspace,"interactor"))return!1;let{interactor:{own:e}}=this.workspace;return e},joinAble(){if(!N.call(this.workspace,"interactor"))return!1;let{interactor:{can_join:e}}=this.workspace;return e},joined(){if(!N.call(this.workspace,"interactor"))return!1;let{interactor:{joined:e}}=this.workspace;return e},actions(){return[{label:this.$str("delete_workspace","container_workspace"),action:this.$_requestConfirm.bind(this)}]}},methods:{updateWorkspace(e){u.a.writeQuery({query:f.a,variables:{id:this.workspaceId},data:{workspace:e}})},handleDelete(){this.$apollo.mutate({mutation:b,variables:{workspace_id:this.workspace.id},refetchAll:!1}).then(({data:{result:e}})=>{e&&(this.modal.confirm=!1,window.location.href=this.$url("/container/type/workspace/index.php",{hold_notification:1}))})},$_requestConfirm(){this.modal.confirm=!0}}},h=a("KHd+"),y=function(e){e.options.__langStrings={container_workspace:["owner","delete_warning_title","delete_warning_msg","delete_workspace"]}},S=Object(h.a)(w,n,[],!1,null,null,null);"function"==typeof y&&y(S),S.options.__hasBlocks={script:!0,template:!0},S.options.__file="client/src/container_workspace/components/sidepanel/WorkspaceSidePanel.vue";i.default=S.exports},t5mg:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_notifications"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"notifications"},name:{kind:"Name",value:"container_workspace_notifications"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}},tBMW:function(e,i){e.exports=tui.require("container_workspace/components/content/tabs/WorkspaceLibraryTab")},tkAW:function(e,i){e.exports=tui.require("tui/components/modal/Modal")},txsu:function(e,i){e.exports=tui.require("tui/components/tabs/Tabs")},tyu8:function(e,i){e.exports=tui.require("totara_engage/index")},u5iS:function(e,i){e.exports=tui.require("tui/components/modal/ModalContent")},uV17:function(e,i,a){!function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("container_workspace")?console.warn('[tui bundle] The bundle "container_workspace" is already loaded, skipping initialisation.'):(tui._bundle.register("container_workspace"),tui._bundle.addModulesFromContext("container_workspace",a("qPS3")),tui._bundle.addModulesFromContext("container_workspace/components",a("ezt2")),tui._bundle.addModulesFromContext("container_workspace/pages",a("Oh+1")))}()},vF5l:function(e,i){e.exports=tui.require("tui/components/buttons/Button")},vgT7:function(e,i){e.exports=tui.require("tui/components/icons/common/Add")},vrou:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceDescription"},[a("InlineEditing",{directives:[{name:"show",rawName:"v-show",value:!e.editing,expression:"!editing"}],staticClass:"tui-workspaceDescription__inlineEditing",attrs:{"update-able":e.updateAble,"full-width":!0,"absolute-button":!0},on:{click:function(i){e.editing=!0}}},[a("div",{ref:"content",staticClass:"tui-workspaceDescription__inlineEditing__content",attrs:{slot:"content"},domProps:{innerHTML:e._s(e.description)},slot:"content"})]),e._v(" "),e.editing?a("Form",{attrs:{"workspace-id":e.workspaceId,"description-content":e.descriptionContent,submitting:e.updating},on:{cancel:function(i){e.editing=!1},submit:e.updateDescription}}):e._e()],1)};n._withStripped=!0;var t=a("g0Fk"),r=a.n(t),s=a("llww"),o=a.n(s),d=a("H/tB"),l=a.n(d),c=a("vyVp"),u=a("FoZm"),m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_update_workspace_description"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspace"},name:{kind:"Name",value:"container_workspace_update"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}},{kind:"Argument",name:{kind:"Name",value:"description_format"},value:{kind:"Variable",name:{kind:"Name",value:"description_format"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner_job_assignments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]}}]},p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_workspace_description"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspace"},name:{kind:"Name",value:"container_workspace_workspace"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description_format"},arguments:[],directives:[]}]}}]}}]},k={components:{InlineEditing:r.a,Form:o.a},props:{updateAble:{type:Boolean,required:!0},workspaceId:{type:[Number,String],required:!0},content:String},apollo:{descriptionContent:{query:p,fetchPolicy:"network-only",skip(){return!this.editing},variables(){return{id:this.workspaceId}},update:({workspace:{description:e,description_format:i}})=>e=null!==e&&""!==e&&u.FORMAT_JSON_EDITOR==i?JSON.parse(e):null}},data:()=>({descriptionContent:null,editing:!1,updating:!1}),computed:{description(){return this.content?this.content:this.$str("no_description","container_workspace")}},watch:{content(){this.$_scan()}},mounted(){this.$_scan()},methods:{$_scan(){this.$refs.content&&l.a.scan(this.$refs.content)},async updateDescription({description:e}){if(!this.updating&&this.updateAble){this.updating=!0;try{const{data:{workspace:i}}=await this.$apollo.mutate({mutation:m,refetchAll:!1,variables:{id:this.workspaceId,description:e}});this.editing=!1,this.$emit("update-workspace",i)}catch(e){await Object(c.notify)({message:this.$str("error:update_description","container_workspace"),type:"error"})}finally{this.updating=!1}}}}},v=a("KHd+"),_=function(e){e.options.__langStrings={container_workspace:["no_description","error:update_description"]}},g=Object(v.a)(k,n,[],!1,null,null,null);"function"==typeof _&&_(g),g.options.__hasBlocks={script:!0,template:!0},g.options.__file="client/src/container_workspace/components/sidepanel/content/WorkspaceDescription.vue";i.default=g.exports},vyVp:function(e,i){e.exports=tui.require("tui/notifications")},w2wx:function(e,i){e.exports=tui.require("container_workspace/components/profile/PostAvatar")},wa1w:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("article",{staticClass:"tui-workspaceMemberCard"},[a("MiniProfileCard",{staticClass:"tui-workspaceMemberCard__profileCard",attrs:{"avatar-src":e.profileImageUrl,"avatar-alt":e.profileImageAlt,email:e.userEmail,name:e.userFullName,"job-assignment":e.jobAssignmentLabel,mention:e.userEmail,interactive:e.deleteAble,items:e.actions,"label-id":e.labelId,"drop-down-button-aria-label":e.$str("more_action_for_member","container_workspace",e.userFullName),"position-drop-down":"bottom-right"}},[e._t("default")],2),e._v(" "),a("ModalPresenter",{attrs:{open:e.modal.confirm},on:{"request-close":function(i){e.modal.confirm=!1}}},[a("WorkspaceWarningModal",{attrs:{title:e.$str("delete_warning_title","container_workspace"),"message-content":e.$str("remove_member_warning_msg","container_workspace",e.userFullName)},on:{confirm:e.removeMember}})],1)],1)};n._withStripped=!0;var t=a("+MEP"),r=a.n(t),s=a("vyVp"),o=a("Mnur"),d=a.n(o),l=a("XgQu"),c=a.n(l),u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_remove_member_from_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"container_workspace_remove_member"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}],directives:[]}]}}]},m=a("QgbB"),p={components:{MiniProfileCard:r.a,ModalPresenter:d.a,WorkspaceWarningModal:c.a},props:{jobAssignments:{type:Array,required:!0,validator:e=>Array.prototype.every.call(e,e=>"fullname"in e)},userFullName:{type:String,required:!0},userEmail:{type:String,required:!0},profileImageUrl:{type:String,required:!0},profileImageAlt:{type:String,default:""},deleteAble:{type:Boolean,default:!1},userId:{type:[String,Number],required:!0},workspaceId:{type:[String,Number],required:!0},labelId:{type:String,required:!0}},data:()=>({modal:{confirm:!1}}),computed:{jobAssignmentLabel(){if(0===this.jobAssignments.length)return"";let{fullname:e}=this.jobAssignments[0];return e},actions(){return this.deleteAble?[{label:this.$str("remove","moodle"),action:this.$_requestConfirm.bind(this)}]:[]}},methods:{$_requestConfirm(){this.modal.confirm=!0},async removeMember(){try{await this.$apollo.mutate({mutation:u,refetchAll:!1,variables:{workspace_id:this.workspaceId,user_id:this.userId},refetchQueries:[{query:m.a,variables:{id:this.workspaceId}}]}),this.modal.confirm=!1,this.$emit("remove-member",this.userId)}catch(e){await Object(s.notify)({message:this.$str("error:remove_user","container_workspace"),type:"error"})}}}},k=a("KHd+"),v=function(e){e.options.__langStrings={moodle:["remove"],container_workspace:["error:remove_user","delete_warning_title","remove_member_warning_msg","more_action_for_member"]}},_=Object(k.a)(p,n,[],!1,null,null,null);"function"==typeof v&&v(_),_.options.__hasBlocks={script:!0,template:!0},_.options.__file="client/src/container_workspace/components/card/WorkspaceMemberCard.vue";i.default=_.exports},wzO4:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Form",{staticClass:"tui-workspaceForm",attrs:{vertical:!0,"input-width":"full"}},[a("div",{staticClass:"tui-workspaceForm__container"},[a("div",{staticClass:"tui-workspaceForm__container__inputs"},[a("FormRow",{staticClass:"tui-workspaceForm__container__inputs__formRow",attrs:{label:e.$str("space_name_label","container_workspace")},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id,t=i.label;return[a("InputText",{attrs:{id:n,disabled:e.submitting,placeholder:t},model:{value:e.name,callback:function(i){e.name=i},expression:"name"}})]}}])}),e._v(" "),a("FormRow",{staticClass:"tui-workspaceForm__container__inputs__formRow",attrs:{label:e.$str("description_label","container_workspace")},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("Weka",{staticClass:"tui-workspaceForm__container__inputs__formRow__editor",attrs:{id:n,"aria-disabled":e.submitting,doc:e.description.doc,component:"container_workspace",area:"description"},on:{update:e.updateDescription,"editor-mounted":function(i){e.editorReady=!0}}})]}}])}),e._v(" "),a("FormRow",{staticClass:"tui-workspaceForm__container__inputs__formRow",attrs:{label:e.$str("assign_topics_label","container_workspace"),helpmsg:e.$str("assigntopicshelp","totara_topic")},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("TopicsSelector",{attrs:{id:n,"selected-topics":e.selectedTopics},on:{change:function(i){e.selectedTopics=i}}})]}}])})],1),e._v(" "),a("FormRow",{staticClass:"tui-workspaceForm__container__imagePicker",scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("SpaceImagePicker",{attrs:{id:n,"draft-id":e.draftId},on:{ready:function(i){e.draftId=i.itemId},"upload-error":function(i){e.error.upload=i},"clear-error":function(i){e.error.upload=null}}}),e._v(" "),a("FieldError",{staticClass:"tui-workspaceForm__container__imagePicker__error",attrs:{error:e.error.upload}})]}}])})],1),e._v(" "),a("ButtonGroup",{staticClass:"tui-workspaceForm__buttonGroup"},[a("LoadingButton",{attrs:{loading:e.submitting||!e.editorReady,disabled:e.submitting||e.disableSubmit,text:e.$str("create","moodle"),"aria-label":e.$str("submit","moodle"),primary:!0,type:"submit"},on:{click:function(i){return i.preventDefault(),e.submit(i)}}}),e._v(" "),a("Button",{attrs:{text:e.$str("cancel","moodle"),disabled:e.submitting},on:{click:function(i){return i.preventDefault(),e.$emit("cancel")}}})],1)],1)};n._withStripped=!0;var t=a("nEm4"),r=a.n(t),s=a("i/kK"),o=a.n(s),d=a("oMuj"),l=a.n(d),c=a("BN8m"),u=a.n(c),m=a("vF5l"),p=a.n(m),k=a("K1nw"),v=a.n(k),_=a("rLBA"),g=a.n(_),f=a("2wx7"),b=a.n(f),N=a("TXEh"),w=a("URbu"),h=a.n(w),y=a("nBTD"),S=a.n(y),F={components:{LoadingButton:g.a,InputText:l.a,Form:r.a,FormRow:o.a,ButtonGroup:u.a,Button:p.a,TopicsSelector:v.a,Weka:b.a,SpaceImagePicker:h.a,FieldError:S.a},props:{submitting:Boolean},data:()=>({name:"",description:{doc:null,empty:!0},draftId:null,selectedTopics:[],error:{upload:null},editorReady:!1}),computed:{disableSubmit(){return 0===this.name.length||0===this.selectedTopics.length}},methods:{submit(){let e=null;this.description.empty||(e=JSON.stringify(this.description.doc));const i={name:this.name,description:e,topics:this.selectedTopics.map(({id:e})=>e),draftId:this.draftId};this.$emit("submit",i)},$_readJSON:Object(N.debounce)((function(e){this.description.doc=e.getJSON(),this.description.empty=e.isEmpty()}),250),updateDescription(e){this.$_readJSON(e)}}},C=a("KHd+"),x=function(e){e.options.__langStrings={container_workspace:["space_name_label","description_label","assign_topics_label"],moodle:["create","cancel","submit"],totara_topic:["assigntopicshelp"]}},A=Object(C.a)(F,n,[],!1,null,null,null);"function"==typeof x&&x(A),A.options.__hasBlocks={script:!0,template:!0},A.options.__file="client/src/container_workspace/components/form/WorkspaceForm.vue";i.default=A.exports},x4nq:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_join_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member"},name:{kind:"Name",value:"container_workspace_join"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"workspace_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]}]}}]}}]}}]}},xGki:function(e,i,a){"use strict";a.r(i);var n=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("article",{staticClass:"tui-discussionWithCommentCard",attrs:{"data-id":e.discussionId}},[a("DiscussionCard",{staticClass:"tui-discussionWithCommentCard__discussionCard",attrs:{"creator-fullname":e.creatorFullname,"creator-image-alt":e.creatorImageAlt,"creator-image-src":e.creatorImageSrc,"creator-id":e.creatorId,"discussion-content":e.discussionContent,"time-description":e.timeDescription,"total-comments":e.totalComments,"total-reactions":e.totalReactions,"discussion-id":e.discussionId,pinned:e.pinned,"react-able":e.reactAble,"delete-able":e.deleteAble,"update-able":e.updateAble,"comment-able":e.commentAble,reacted:e.reacted,edited:e.edited,"label-id":e.labelId},on:{"trigger-comment":e.triggerComment,"update-react-status":function(i){return e.$emit("update-discussion-react-status",i)},"update-discussion":function(i){return e.$emit("update-discussion",i)},"delete-discussion":function(i){return e.$emit("delete-discussion",i)}}}),e._v(" "),a("CommentBox",{directives:[{name:"show",rawName:"v-show",value:e.showComments||e.showCommentForm,expression:"showComments || showCommentForm"}],ref:"comment-box",staticClass:"tui-discussionWithCommentCard__comments",attrs:{"instance-id":e.discussionId,component:"container_workspace",area:"discussion",size:e.size,"show-reply-button-text":!0,"show-like-button-text":!0,"comment-able":e.commentAble,"submit-form-button-text":e.$str("comment","container_workspace"),"with-border":!0,"show-comment-form":e.showCommentForm,"first-cursor":e.firstCommentCursor,"comment-inline-head":!0},on:{"form-ready":e.setFormElement,"create-comment":function(i){return e.$emit("add-new-comment",e.discussionId)}}})],1)};n._withStripped=!0;var t=a("5gBL"),r=a.n(t),s=a("Z82V"),o=a.n(s),d=a("yAFK"),l={components:{DiscussionCard:r.a,CommentBox:o.a},props:{firstCommentCursor:{type:String,default:null},creatorImageSrc:{type:String,required:!0},creatorImageAlt:{type:String,default:""},creatorId:{type:[String,Number],required:!0},creatorFullname:{type:String,required:!0},discussionContent:{type:String,required:!0},timeDescription:{type:String,required:!0},pinned:Boolean,reportAble:Boolean,reacted:Boolean,totalComments:{type:[String,Number],required:!0},totalReactions:{type:[String,Number],required:!0},discussionId:{type:[String,Number],required:!0},reactAble:{type:Boolean,default:!0},updateAble:{type:Boolean,default:!0},deleteAble:{type:Boolean,default:!0},commentAble:{type:Boolean,default:!0},edited:Boolean,labelId:String},data:()=>({showCommentForm:!1,size:d.SIZE_LARGE,formElement:null}),computed:{showComments(){return parseInt(this.totalComments,10)>0}},methods:{setFormElement(e){null===this.formElement&&(this.formElement=e)},async triggerComment(){this.showCommentForm=!0,await this.$nextTick(),this.formElement&&this.formElement.scrollIntoView()}}},c=a("KHd+"),u=function(e){e.options.__langStrings={container_workspace:["comment"]}},m=Object(c.a)(l,n,[],!1,null,null,null);"function"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0},m.options.__file="client/src/container_workspace/components/card/DiscussionWithCommentCard.vue";i.default=m.exports},xO7t:function(e,i){e.exports=tui.require("container_workspace/components/modal/WorkspaceFileViewModal")},yAFK:function(e,i){e.exports=tui.require("totara_comment/size")},yc2X:function(e,i){e.exports=tui.require("container_workspace/components/grid/SpaceCardsGrid")},yikf:function(e,i){e.exports=tui.require("tui/components/datatable/Table")},z16U:function(e,i){e.exports=tui.require("container_workspace/components/form/PostDiscussionForm")},zizw:function(e,i){e.exports=tui.require("container_workspace/components/head/WorkspaceFileHeader")},zkAu:function(e,i){e.exports=tui.require("container_workspace/components/filter/WorkspaceFilter")}});