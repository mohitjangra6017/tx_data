!function(e){function n(n){for(var i,o,s=n[0],u=n[1],l=n[2],d=0,m=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);for(c&&c(n);m.length;)m.shift()();return r.push.apply(r,l||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],i=!0,s=1;s<t.length;s++){var u=t[s];0!==a[u]&&(i=!1)}i&&(r.splice(n--,1),e=o(o.s=t[0]))}return e}var i={},a={11:0},r=[];function o(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=i,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)o.d(t,i,function(n){return e[n]}.bind(null,i));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=n,s=s.slice();for(var l=0;l<s.length;l++)n(s[l]);var c=u;r.push(["Ny4F",0]),t()}({"+c3f":function(e,n){e.exports=tui.require("tui/components/icons/common/LikeActive")},"0i2B":function(e,n,t){"use strict";n.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_reaction_get_likes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"instanceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"count"},name:{kind:"Name",value:"totara_reaction_total"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instanceid"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"reactions"},name:{kind:"Name",value:"totara_reaction_reactions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instanceid"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}},{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"instanceid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]}]}}]}}]}}]}},"0viy":function(e,n){e.exports=tui.require("tui/components/icons/common/Spinner")},"5h9J":function(e,n){e.exports=tui.require("tui/components/buttons/ButtonIcon")},"77hr":function(e,n,t){"use strict";n.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_reaction_liked"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"instanceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_reaction_liked"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instanceid"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}}],directives:[]}]}}]}},"9G+f":function(e,n){e.exports=tui.require("tui/components/popover/Popover")},Gh1B:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("Modal",{staticClass:"tui-likeRecordsModal"},[t("ModalContent",{attrs:{"close-button":!0},scopedSlots:e._u([{key:"title",fn:function(){return[t("h2",{staticClass:"tui-likeRecordsModal__title"},[t("span",[e._v("\n          "+e._s(e.$str("likesx","totara_reaction",e.like.count))+"\n        ")]),e._v(" "),e.$apollo.loading?t("Spinner"):e._e()],1)]},proxy:!0}])},[e._v(" "),t("div",{staticClass:"tui-likeRecordsModal__content"},[t("ul",{staticClass:"tui-likeRecordsModal__content__records"},e._l(e.like.reactions,(function(n,i){var a=n.user;return t("li",{key:i},[t("Avatar",{attrs:{src:a.profileimageurl,alt:a.profileimagealt||"",size:"xsmall"}}),e._v(" "),t("a",{attrs:{href:e.$url("/user/profile.php",{id:a.id})}},[e._v("\n            "+e._s(a.fullname)+"\n          ")])],1)})),0)])])],1)};i._withStripped=!0;var a=t("tkAW"),r=t.n(a),o=t("u5iS"),s=t.n(o),u=t("Xi9X"),l=t.n(u),c=t("0viy"),d=t.n(c),m=t("0i2B"),p={components:{Modal:r.a,ModalContent:s.a,Avatar:l.a,Spinner:d.a},props:{instanceId:{type:[String,Number],required:!0},component:{type:String,required:!0},area:{type:String,required:!0}},apollo:{like:{query:m.a,fetchPolicy:"network-only",variables:function(){return{component:this.component,area:this.area,instanceid:this.instanceId}},update:function(e){return{count:e.count,reactions:e.reactions}}}},data:function(){return{page:1,like:{count:0,reactions:[]}}}},k=t("KHd+"),v=function(e){e.options.__langStrings={totara_reaction:["likesx"]}},f=Object(k.a)(p,i,[],!1,null,null,null);"function"==typeof v&&v(f),f.options.__hasBlocks={script:!0,template:!0},f.options.__file="client/src/totara_reaction/components/modal/LikeRecordsModal.vue";n.default=f.exports},GmR7:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"tui-simpleLike"},[e.$apollo.loading?e._e():[t("LikeButtonIcon",{attrs:{"aria-label":e.buttonAriaLabel,liked:e.hasLiked,submitting:e.submitting,disabled:e.disabled,text:e.buttonText},on:{click:function(n){return n.preventDefault(),e.like(n)}}}),e._v(" "),0!==e.count?t("Popover",{staticClass:"tui-simpleLike__popover",attrs:{triggers:["focus","hover"]},on:{"open-changed":function(n){e.showPopover=n}},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("a",{attrs:{href:"#"},on:{click:function(n){n.preventDefault(),e.showModal=!0}}},[e._v("\n          "+e._s(e.$str("bracketcount","totara_reaction",e.count))+"\n        ")])]},proxy:!0}],null,!1,1309043721)},[e._v(" "),t("LikeRecordsList",{attrs:{"skip-loading-records":!e.showPopover,component:e.component,area:e.area,"instance-id":e.instanceId}})],1):e._e()],e._v(" "),t("ModalPresenter",{attrs:{open:e.showModal},on:{"request-close":function(n){e.showModal=!1}}},[t("LikeRecordsModal",{attrs:{component:e.component,"instance-id":e.instanceId,area:e.area}})],1)],2)};i._withStripped=!0;var a=t("o0o1"),r=t.n(a),o=t("yXPU"),s=t.n(o),u=t("rLhL"),l=t.n(u),c=t("Mnur"),d=t.n(c),m=t("9G+f"),p=t.n(m),k=t("OaPj"),v=t.n(k),f=t("hySc"),b=t.n(f),_=t("vyVp"),h=t("0i2B"),y=t("77hr"),g=t("e/g3"),N=t("Q6MM"),L={components:{LikeRecordsModal:l.a,ModalPresenter:d.a,Popover:p.a,LikeButtonIcon:v.a,LikeRecordsList:b.a},props:{component:{type:String,required:!0},area:{type:String,required:!0},instanceId:{type:[String,Number],required:!0},disabled:Boolean,liked:{type:Boolean,default:null},totalLikes:{type:[String,Number],default:null},buttonAriaLabel:{type:String,required:!0},showText:Boolean},apollo:{count:{query:h.a,variables:function(){return{component:this.component,area:this.area,instanceid:this.instanceId}},update:function(e){var n=e.count;return parseInt(n,9)},skip:function(){return void 0!==this.totalLikes&&null!==this.totalLikes}},hasLiked:{query:y.a,variables:function(){return{component:this.component,area:this.area,instanceid:this.instanceId}},update:function(e){return e.result},skip:function(){return void 0!==this.liked&&null!==this.liked},result:function(e){var n=e.data.result;this.$emit("update-like-status",n)}}},data:function(){return{hasLiked:this.liked,count:this.totalLikes,showModal:!1,showPopover:!1,submitting:!1}},computed:{buttonText:function(){return this.showText?this.$str("like","totara_reaction"):""}},watch:{liked:function(e){e!==this.hasLiked&&(this.hasLiked=e)},totalLikes:function(e){e!=this.count&&(this.count=e)}},methods:{like:function(){var e=this;return s()(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.hasLiked){n.next=5;break}return n.next=3,e.removeLike();case 3:n.next=7;break;case 5:return n.next=7,e.createLike();case 7:case"end":return n.stop()}}),n)})))()},createLike:function(){var e=this;return s()(r.a.mark((function n(){var t;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.submitting){n.next=2;break}return n.abrupt("return");case 2:return e.submitting=!0,t={component:e.component,area:e.area,instanceid:e.instanceId},n.prev=4,n.next=7,e.$apollo.mutate({mutation:g.a,variables:t,refetchAll:!1,refetchQueries:[{query:h.a,variables:t},{query:y.a,variables:t}]});case 7:e.$emit("created-like"),n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(4),n.next=14,Object(_.notify)({message:e.$str("error:create_like","totara_reaction"),type:"error",duration:5e3});case 14:return n.prev=14,e.submitting=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[4,10,14,17]])})))()},removeLike:function(){var e=this;return s()(r.a.mark((function n(){var t;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.submitting){n.next=2;break}return n.abrupt("return");case 2:return e.submitting=!0,t={component:e.component,area:e.area,instanceid:e.instanceId},n.prev=4,n.next=7,e.$apollo.mutate({mutation:N.a,variables:t,refetchAll:!1,refetchQueries:[{query:h.a,variables:t},{query:y.a,variables:t}]});case 7:e.$emit("removed-like"),n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(4),n.next=14,Object(_.notify)({message:e.$str("error:remove_like","totara_reaction"),type:"error",duration:5e3});case 14:return n.prev=14,e.submitting=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[4,10,14,17]])})))()}}},S=t("KHd+"),x=function(e){e.options.__langStrings={totara_reaction:["bracketcount","error:create_like","error:remove_like","like"]}},M=Object(S.a)(L,i,[],!1,null,null,null);"function"==typeof x&&x(M),M.options.__hasBlocks={script:!0,template:!0},M.options.__file="client/src/totara_reaction/components/SimpleLike.vue";n.default=M.exports},Mnur:function(e,n){e.exports=tui.require("tui/components/modal/ModalPresenter")},NoMv:function(e,n,t){var i={"./SidePanelLike":"kGYD","./SidePanelLike.vue":"kGYD","./SimpleLike":"GmR7","./SimpleLike.vue":"GmR7","./buttons/LikeButtonIcon":"pYhv","./buttons/LikeButtonIcon.vue":"pYhv","./modal/LikeRecordsModal":"Gh1B","./modal/LikeRecordsModal.vue":"Gh1B","./popover_content/LikeRecordsList":"SxG3","./popover_content/LikeRecordsList.vue":"SxG3"};function a(e){var n=r(e);return t(n)}function r(e){if(!t.o(i,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="NoMv"},Ny4F:function(e,n,t){!function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("totara_reaction")?console.warn('[tui bundle] The bundle "totara_reaction" is already loaded, skipping initialisation.'):(tui._bundle.register("totara_reaction"),tui._bundle.addModulesFromContext("totara_reaction/components",t("NoMv")))}()},OaPj:function(e,n){e.exports=tui.require("totara_reaction/components/buttons/LikeButtonIcon")},Q6MM:function(e,n,t){"use strict";n.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_reaction_remove_like"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"instanceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_reaction_delete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instanceid"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}}],directives:[]}]}}]}},SxG3:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"tui-likeRecordsList"},[e.$apollo.loading?t("Spinner",{attrs:{size:"200"}}):[0===e.like.count?t("p",[e._v("\n      "+e._s(e.$str("nolikes","totara_reaction"))+"\n    ")]):t("ul",{staticClass:"tui-likeRecordsList__list"},e._l(e.reactions,(function(n,i){var a=n.user.fullname;return t("li",{key:i},[e._v("\n        "+e._s(a)+"\n      ")])})),0),e._v(" "),e.like.count>10?t("p",[e._v("\n      "+e._s(e.$str("numberofmore","totara_reaction",e.like.count-10))+"\n    ")]):e._e()]],2)};i._withStripped=!0;var a=t("0viy"),r=t.n(a),o=t("0i2B"),s={components:{Spinner:r.a},props:{component:{type:String,required:!0},area:{type:String,required:!0},instanceId:{type:[String,Number],required:!0},skipLoadingRecords:Boolean},apollo:{like:{query:o.a,skip:function(){return this.skipLoadingRecords},variables:function(){return{component:this.component,area:this.area,instanceid:this.instanceId}},update:function(e){return{count:e.count,reactions:e.reactions}}}},data:function(){return{page:1,like:{count:0,reactions:[]}}},computed:{reactions:function(){return Array.prototype.slice.call(this.like.reactions,0,9)}}},u=t("KHd+"),l=function(e){e.options.__langStrings={totara_reaction:["nolikes","numberofmore"]}},c=Object(u.a)(s,i,[],!1,null,null,null);"function"==typeof l&&l(c),c.options.__hasBlocks={script:!0,template:!0},c.options.__file="client/src/totara_reaction/components/popover_content/LikeRecordsList.vue";n.default=c.exports},Xi9X:function(e,n){e.exports=tui.require("tui/components/avatar/Avatar")},"e/g3":function(e,n,t){"use strict";n.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_reaction_create_like"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"instanceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"reaction"},name:{kind:"Name",value:"totara_reaction_create"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instanceid"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"area"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"instanceid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}}]}},gWPD:function(e,n){e.exports=tui.require("totara_engage/components/icons/Loading")},hySc:function(e,n){e.exports=tui.require("totara_reaction/components/popover_content/LikeRecordsList")},kGYD:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"tui-sidePanelLike"},[e.$apollo.loading?e._e():[t("ButtonIconWithLabel",{attrs:{"button-aria-label":e.buttonAriaLabel,"label-text":e.count,disabled:e.disabled},on:{"popover-open-changed":function(n){e.showPopover=n},open:function(n){e.showModal=!0},click:e.like},scopedSlots:e._u([{key:"icon",fn:function(){return[e.submitting?t("Loading"):e.hasLiked?t("LikeActive"):t("Like")]},proxy:!0},{key:"hover-label-content",fn:function(){return[t("LikeRecordsList",{attrs:{component:e.component,area:e.area,"instance-id":e.instanceId}})]},proxy:!0}],null,!1,1618023747)}),e._v(" "),t("ModalPresenter",{attrs:{open:e.showModal},on:{"request-close":function(n){e.showModal=!1}}},[t("LikeRecordsModal",{attrs:{component:e.component,area:e.area,"instance-id":e.instanceId}})],1)]],2)};i._withStripped=!0;var a=t("o0o1"),r=t.n(a),o=t("yXPU"),s=t.n(o),u=t("roED"),l=t.n(u),c=t("hySc"),d=t.n(c),m=t("rLhL"),p=t.n(m),k=t("oZCW"),v=t.n(k),f=t("+c3f"),b=t.n(f),_=t("gWPD"),h=t.n(_),y=t("Mnur"),g=t.n(y),N=t("0i2B"),L=t("77hr"),S=t("e/g3"),x=t("Q6MM"),M=t("vyVp"),q={components:{ModalPresenter:g.a,ButtonIconWithLabel:l.a,LikeRecordsList:d.a,LikeRecordsModal:p.a,Like:v.a,LikeActive:b.a,Loading:h.a},props:{component:{type:String,required:!0},area:{type:String,required:!0},instanceId:{type:[String,Number],required:!0},liked:{type:Boolean,default:null},totalLikes:{type:Boolean,default:null},iconSize:[String,Number],buttonAriaLabel:{type:String,required:!0},disabled:Boolean},apollo:{count:{query:N.a,variables:function(){return{component:this.component,area:this.area,instanceid:this.instanceId}},update:function(e){return e.count},skip:function(){return void 0!==this.totalLikes&&null!==this.totalLikes}},hasLiked:{query:L.a,variables:function(){return{component:this.component,area:this.area,instanceid:this.instanceId}},update:function(e){return e.result},skip:function(){return void 0!==this.liked&&null!==this.liked}}},data:function(){return{hasLiked:this.liked,count:this.totalLikes,showPopover:!1,showModal:!1,submitting:!1}},watch:{liked:function(e){e!==this.hasLiked&&(this.hasLiked=e)},totalLikes:function(e){e!=this.count&&(this.count=e)}},methods:{like:function(){var e=this;return s()(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.hasLiked){n.next=5;break}return n.next=3,e.removeLike();case 3:n.next=7;break;case 5:return n.next=7,e.createLike();case 7:case"end":return n.stop()}}),n)})))()},createLike:function(){var e=this;return s()(r.a.mark((function n(){var t;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.submitting){n.next=2;break}return n.abrupt("return");case 2:return e.submitting=!0,t={component:e.component,area:e.area,instanceid:e.instanceId},n.prev=4,n.next=7,e.$apollo.mutate({mutation:S.a,variables:t,refetchAll:!1,refetchQueries:[{query:N.a,variables:t},{query:L.a,variables:t}]});case 7:e.$emit("created-like"),n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(4),n.next=14,Object(M.notify)({message:e.$str("error:create_like","totara_reaction"),type:"error",duration:5e3});case 14:return n.prev=14,e.submitting=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[4,10,14,17]])})))()},removeLike:function(){var e=this;return s()(r.a.mark((function n(){var t;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.submitting){n.next=2;break}return n.abrupt("return");case 2:return e.submitting=!0,t={component:e.component,area:e.area,instanceid:e.instanceId},n.prev=4,n.next=7,e.$apollo.mutate({mutation:x.a,variables:t,refetchAll:!1,refetchQueries:[{query:N.a,variables:t},{query:L.a,variables:t}]});case 7:e.$emit("removed-like"),n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(4),n.next=14,Object(M.notify)({message:e.$str("error:remove_like","totara_reaction"),type:"error",duration:5e3});case 14:return n.prev=14,e.submitting=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[4,10,14,17]])})))()}}},w=t("KHd+"),V=function(e){e.options.__langStrings={totara_reaction:["error:create_like","error:remove_like"]}},B=Object(w.a)(q,i,[],!1,null,null,null);"function"==typeof V&&V(B),B.options.__hasBlocks={script:!0,template:!0},B.options.__file="client/src/totara_reaction/components/SidePanelLike.vue";n.default=B.exports},oZCW:function(e,n){e.exports=tui.require("tui/components/icons/common/Like")},pYhv:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ButtonIcon",{attrs:{"aria-label":e.ariaLabel,styleclass:{transparent:e.transparent,small:e.small,transparentNoPadding:e.transparentNoPadding},disabled:e.submitting||e.disabled,text:e.text},on:{click:function(n){return e.$emit("click",n)}}},[e.submitting?t("Loading",{attrs:{size:e.iconSize}}):e.liked?t("LikedIcon",{attrs:{size:e.iconSize}}):t("LikeIcon",{attrs:{size:e.iconSize}})],1)};i._withStripped=!0;var a=t("5h9J"),r=t.n(a),o=t("oZCW"),s=t.n(o),u=t("+c3f"),l=t.n(u),c=t("0viy"),d=t.n(c),m={components:{ButtonIcon:r.a,LikeIcon:s.a,LikedIcon:l.a,Loading:d.a},props:{transparent:{type:Boolean,default:!0},small:{type:Boolean,default:!0},transparentNoPadding:{type:Boolean,default:!0},submitting:Boolean,liked:Boolean,iconSize:[String,Number],ariaLabel:{type:String,required:!0},disabled:Boolean,text:String}},p=t("KHd+"),k=Object(p.a)(m,i,[],!1,null,null,null);k.options.__hasBlocks={script:!0,template:!0},k.options.__file="client/src/totara_reaction/components/buttons/LikeButtonIcon.vue";n.default=k.exports},rLhL:function(e,n){e.exports=tui.require("totara_reaction/components/modal/LikeRecordsModal")},roED:function(e,n){e.exports=tui.require("tui/components/buttons/LabelledButtonTrigger")},tkAW:function(e,n){e.exports=tui.require("tui/components/modal/Modal")},u5iS:function(e,n){e.exports=tui.require("tui/components/modal/ModalContent")},vyVp:function(e,n){e.exports=tui.require("tui/notifications")}});