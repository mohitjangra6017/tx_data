!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="bRUO")}({"+tN3":function(e,t){e.exports=tui.require("tui/components/tree/Tree")},"1kR4":function(e,t,n){},"6eut":function(e,t,n){var i={"./side-panel/LinkedInActivityContentsTree":"MXs0","./side-panel/LinkedInActivityContentsTree.vue":"MXs0"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="6eut"},ACJV:function(e,t,n){var i={"./ActivityView":"M71c","./ActivityView.vue":"M71c"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="ACJV"},"KHd+":function(e,t,n){"use strict";function i(e,t,n,i,a,o,r,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=l):a&&(l=s?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},M71c:function(e,t,n){"use strict";n.r(t);var i=n("kUb+"),a=n.n(i),o=n("Mivr"),r=n.n(o),s=n("vF5l"),l=n.n(s),c=n("XHV7"),d=n.n(c),u=n("PNtU"),m=n.n(u),_=n("zdti"),v=n.n(_),p=n("zs4z"),k=n.n(p),y=n("lOlL"),f=n.n(y),g=n("mkgZ"),b=n("vyVp"),h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"contentmarketplaceactivity_linkedin_linkedin_activity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cm_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"instance"},name:{kind:"Name",value:"contentmarketplaceactivity_linkedin_linkedin_activity"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cm_id"},value:{kind:"Variable",name:{kind:"Name",value:"cm_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"module"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cm_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"course"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"course_format"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"has_course_view_page"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"intro"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"completion_condition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completion_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completion_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self_completion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"redirect_enrol_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"has_view_capability"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_enrol"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_launch"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_site_guest"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_enrolled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"non_interactive_enrol_instance_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supports_non_interactive_enrol"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"learning_object"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"asset_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_level"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_to_complete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"last_updated_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"web_launch_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sso_launch_url"},arguments:[],directives:[]}]}}]}}]}}]},N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_contentmarketplace_set_self_completion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cm_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"mod_contentmarketplace_set_self_completion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cm_id"},value:{kind:"Variable",name:{kind:"Name",value:"cm_id"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],directives:[]}]}}]},w={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_contentmarketplace_request_non_interactive_enrol"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cm_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"mod_contentmarketplace_request_non_interactive_enrol"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cm_id"},value:{kind:"Variable",name:{kind:"Name",value:"cm_id"}}}],directives:[]}]}}]},C={components:{ActionCard:a.a,AdminMenu:r.a,Button:l.a,Layout:d.a,Lozenge:m.a,NotificationBanner:v.a,PageBackLink:k.a,ToggleSwitch:f.a},props:{cmId:{type:Number,required:!0},hasNotification:{type:Boolean,required:!0}},data:()=>({interactor:{canEnrol:!1,canLaunch:!1,hasViewCapability:!1,isEnrolled:!1,isSiteGuest:!1,nonEnrolInstanceEnabled:!1,supportsNonInteractiveEnrol:!1},setCompletion:!1,openContents:[],webLaunchUrl:null,ssoLaunchUrl:null,redirctEnrolUrl:null}),computed:{canEnrolActivity(){const{canEnrol:e,isSiteGuest:t}=this.interactor;return e&&!t},launchInNewWindowDisabled(){const{canEnrol:e,isSiteGuest:t,canLaunch:n}=this.interactor;return!n||(!!t||e)},displayBannerInfo(){const{hasViewCapability:e,isSiteGuest:t,nonEnrolInstanceEnabled:n}=this.interactor;return e?n?this.$str("viewing_as_enrollable_admin","mod_contentmarketplace"):this.$str("viewing_as_enrollable_admin_self_enrol_disabled","mod_contentmarketplace"):n&&!t?this.$str("viewing_as_enrollable_guest","mod_contentmarketplace"):this.$str("viewing_as_guest","mod_contentmarketplace")},displayEnrolButton(){const{nonEnrolInstanceEnabled:e,isSiteGuest:t}=this.interactor;return e&&!t}},mounted(){this.hasNotification&&Object(b.notify)({message:this.$str("enrol_success_message","mod_contentmarketplace"),type:"success"})},apollo:{activity:{query:h,variables(){return{cm_id:this.cmId}},update({instance:e}){const t=[],{learning_object:n,module:i}=e,a=i.course.course_format.has_course_view_page||!1,o={contentsTree:t,course:{name:i.course.fullname,url:a?i.course.url:null},description:i.intro,image:i.course.image,levelString:n.display_level,name:i.name,status:this.$str("activity_status_not_started","mod_contentmarketplace"),completionEnabled:i.completion_enabled,timeToComplete:n.time_to_complete,updated:n.last_updated_at,selfCompletion:i.self_completion};this.webLaunchUrl=n.web_launch_url,this.ssoLaunchUrl=n.sso_launch_url,this.redirctEnrolUrl=i.redirect_enrol_url,this.setCompletion=i.completion_status||!1,this.openContents=Object(g.getAllNodeKeys)(t);const{interactor:r}=i;return this.interactor.canEnrol=r.can_enrol,this.interactor.hasViewCapability=r.has_view_capability,this.interactor.isSiteGuest=r.is_site_guest,this.interactor.canLaunch=r.can_launch,this.interactor.isEnrolled=r.is_enrolled,this.interactor.nonEnrolInstanceEnabled=r.non_interactive_enrol_instance_enabled,this.interactor.supportsNonInteractiveEnrol=r.supports_non_interactive_enrol,null!==i.completion_status&&(i.completion_status?o.status=this.$str("activity_status_completed","mod_contentmarketplace"):o.status=this.$str("activity_status_in_progress","mod_contentmarketplace")),o}}},methods:{launchNewWindow(){this.ssoLaunchUrl?window.open(this.ssoLaunchUrl,"linkedIn_course_window"):window.open(this.webLaunchUrl,"linkedIn_course_window")},async setCompletionHandler(){try{let{data:{result:e}}=await this.$apollo.mutate({mutation:N,refetchAll:!1,variables:{cm_id:this.cmId,status:this.setCompletion},update:(e,{data:{result:t}})=>{let{instance:n}=e.readQuery({query:h,variables:{cm_id:this.cmId}});n=Object.assign({},n),n.module=Object.assign({},n.module,{completion_status:t}),e.writeQuery({query:h,variables:{cm_id:this.cmId},data:{instance:n}})}});this.setCompletion=e}catch(e){await Object(b.notify)({message:this.$str(this.setCompletion?"toggle_on_error":"toggle_off_error","mod_contentmarketplace"),type:"error"})}},async requestNonInteractiveEnrol(){const{supportsNonInteractiveEnrol:e}=this.interactor;if(e)try{const e={cm_id:this.cmId};let{data:{result:t}}=await this.$apollo.mutate({mutation:w,variables:e,refetchAll:!0});t&&await Object(b.notify)({message:this.$str("enrol_success_message","mod_contentmarketplace"),type:"success"})}catch(e){await Object(b.notify)({message:this.$str("internal_error","mod_contentmarketplace"),type:"error"})}else window.location.href=this.redirctEnrolUrl}}},S=(n("yIlB"),n("KHd+")),F=function(e){e.options.__langStrings={mod_contentmarketplace:["a11y_activity_difficulty","a11y_activity_time_to_complete","activity_contents","activity_set_self_completion","activity_status_completed","activity_status_in_progress","activity_status_not_started","course_details","enrol_to_course","enrol_success_message","internal_error","launch_in_new_window","toggle_off_error","toggle_on_error","updated_at","viewing_as_enrollable_admin","viewing_as_enrollable_admin_self_enrol_disabled","viewing_as_enrollable_guest","viewing_as_guest"],core_enrol:["enrol"]}},E=Object(S.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.activity?n("Layout",{staticClass:"tui-linkedinActivity",attrs:{"banner-image-url":e.activity.image,"loading-full-page":e.$apollo.loading,title:e.activity.name},scopedSlots:e._u([e.activity.course.url?{key:"content-nav",fn:function(){return[n("PageBackLink",{attrs:{link:e.activity.course.url,text:e.activity.course.name}})]},proxy:!0}:null,{key:"banner-content",fn:function(e){var t=e.stacked;return[n("div",{staticClass:"tui-linkedinActivity__admin"},[n("AdminMenu",{attrs:{"stacked-layout":t}})],1)]}},{key:"feedback-banner",fn:function(){return[e.canEnrolActivity?n("NotificationBanner",{attrs:{type:"info"},scopedSlots:e._u([{key:"body",fn:function(){return[n("ActionCard",{attrs:{"no-border":!0},scopedSlots:e._u([{key:"card-body",fn:function(){return[e._v("\n            "+e._s(e.displayBannerInfo)+"\n          ")]},proxy:!0},{key:"card-action",fn:function(){return[e.displayEnrolButton?n("Button",{attrs:{styleclass:{primary:"true"},title:e.$str("enrol_to_course","mod_contentmarketplace",e.activity.course.name),text:e.$str("enrol","core_enrol")},on:{click:e.requestNonInteractiveEnrol}}):e._e()]},proxy:!0}],null,!1,241737355)})]},proxy:!0}],null,!1,3708923513)}):e.interactor.isSiteGuest?n("NotificationBanner",{attrs:{message:e.$str("viewing_as_guest","mod_contentmarketplace"),type:"info"}}):e._e()]},proxy:!0},{key:"main-content",fn:function(){return[n("div",{staticClass:"tui-linkedinActivity__body"},[n("Button",{attrs:{disabled:e.launchInNewWindowDisabled,styleclass:{primary:"true"},text:e.$str("launch_in_new_window","mod_contentmarketplace")},on:{click:e.launchNewWindow}}),e._v(" "),e.activity.completionEnabled&&e.interactor.isEnrolled?n("div",{staticClass:"tui-linkedinActivity__status"},[n("div",{staticClass:"tui-linkedinActivity__status-completion"},[n("Lozenge",{attrs:{text:e.activity.status}})],1),e._v(" "),e.activity.selfCompletion?n("ToggleSwitch",{staticClass:"tui-linkedinActivity__status-toggle",attrs:{text:e.$str("activity_set_self_completion","mod_contentmarketplace"),"toggle-first":!0},on:{input:e.setCompletionHandler},model:{value:e.setCompletion,callback:function(t){e.setCompletion=t},expression:"setCompletion"}}):e._e()],1):e._e(),e._v(" "),n("div",{staticClass:"tui-linkedinActivity__details"},[n("h3",{staticClass:"tui-linkedinActivity__details-header"},[e._v("\n          "+e._s(e.$str("course_details","mod_contentmarketplace"))+"\n        ")]),e._v(" "),n("div",{staticClass:"tui-linkedinActivity__details-content"},[n("div",{staticClass:"tui-linkedinActivity__details-bar"},[n("div",[n("span",{staticClass:"sr-only"},[e._v("\n                "+e._s(e.$str("a11y_activity_time_to_complete","mod_contentmarketplace"))+"\n              ")]),e._v("\n              "+e._s(e.activity.timeToComplete)+"\n            ")]),e._v(" "),n("div",[n("span",{staticClass:"sr-only"},[e._v("\n                "+e._s(e.$str("a11y_activity_difficulty","mod_contentmarketplace"))+"\n              ")]),e._v("\n              "+e._s(e.activity.levelString)+"\n            ")]),e._v(" "),n("div",[e._v("\n              "+e._s(e.$str("updated_at","mod_contentmarketplace",e.activity.updated))+"\n            ")])]),e._v(" "),n("div",{staticClass:"tui-linkedinActivity__details-desc",domProps:{innerHTML:e._s(e.activity.description)}})])])],1)]},proxy:!0}],null,!0)}):e._e()}),[],!1,null,null,null);"function"==typeof F&&F(E),E.options.__hasBlocks={script:!0,template:!0};t.default=E.exports},MXs0:function(e,t,n){"use strict";n.r(t);var i=n("+tN3"),a={components:{Tree:n.n(i).a},props:{treeData:{type:Array,required:!0},value:{type:Array,required:!0}},data(){return{open:this.value}}},o=(n("a3CG"),n("KHd+")),r=Object(o.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Tree",{staticClass:"tui-linkedinActivityContentTree",attrs:{"tree-data":e.treeData},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"custom-label",fn:function(t){var n=t.label;return[e._v("\n    "+e._s(n)+"\n  ")]}},{key:"content",fn:function(t){var i=t.content;return[n("div",{staticClass:"tui-linkedinActivityContentTree__contents"},[e._l(i.items,(function(t,i){return[n("div",{key:i,staticClass:"tui-linkedinActivityContentTree__contents-item"},[e._v("\n          "+e._s(t)+"\n        ")])]}))],2)]}}]),model:{value:e.open,callback:function(t){e.open=t},expression:"open"}})}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};t.default=r.exports},Mivr:function(e,t){e.exports=tui.require("tui/components/settings_navigation/SettingsNavigation")},PNtU:function(e,t){e.exports=tui.require("tui/components/lozenge/Lozenge")},XHV7:function(e,t){e.exports=tui.require("mod_contentmarketplace/components/layouts/LayoutBannerTwoColumn")},a3CG:function(e,t,n){"use strict";var i=n("1kR4");n.n(i).a},bRUO:function(e,t,n){!function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("contentmarketplaceactivity_linkedin")?console.warn('[tui bundle] The bundle "contentmarketplaceactivity_linkedin" is already loaded, skipping initialisation.'):(tui._bundle.register("contentmarketplaceactivity_linkedin"),tui._bundle.addModulesFromContext("contentmarketplaceactivity_linkedin/components",n("6eut")),tui._bundle.addModulesFromContext("contentmarketplaceactivity_linkedin/pages",n("ACJV")))}()},"kUb+":function(e,t){e.exports=tui.require("tui/components/card/ActionCard")},lOlL:function(e,t){e.exports=tui.require("tui/components/toggle/ToggleSwitch")},m800:function(e,t,n){},mkgZ:function(e,t){e.exports=tui.require("tui/components/tree/util")},vF5l:function(e,t){e.exports=tui.require("tui/components/buttons/Button")},vyVp:function(e,t){e.exports=tui.require("tui/notifications")},yIlB:function(e,t,n){"use strict";var i=n("m800");n.n(i).a},zdti:function(e,t){e.exports=tui.require("tui/components/notifications/NotificationBanner")},zs4z:function(e,t){e.exports=tui.require("tui/components/layouts/PageBackLink")}});