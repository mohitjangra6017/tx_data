!function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="YnSU")}({"49h4":function(e,t){e.exports=tui.require("tui/components/filters/SelectFilter")},"59Wj":function(e,t){e.exports=tui.require("tui/components/filters/FilterBar")},"5qAA":function(e,t){e.exports=tui.require("tui/components/datatable/HeaderCell")},"6UgF":function(e,t,i){"use strict";var a=i("BRq9");i.n(a).a},BI3i:function(e,t,i){"use strict";i.r(t);var a=i("59Wj"),n=i.n(a),r=i("FBvN"),s=i.n(r),d=i("49h4"),o=i.n(d),l={components:{FilterBar:n.a,SearchFilter:s.a,SelectFilter:o.a},data:()=>({learningtypes:[{id:"",label:"No filter"},{id:"unlinked",label:"Not set"},{id:"course",label:"Courses"},{id:"program",label:"Programs"},{id:"certification",label:"Certifications"}],selection:{learningtype:"",search:""}}),watch:{selection:{deep:!0,handler(){this.$emit("filter",this.selection)}}},methods:{submitSearch(){this.$emit("submit-search",this.selection)}}},c=i("KHd+"),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FilterBar",{attrs:{title:"Filter results"},scopedSlots:e._u([{key:"filters-left",fn:function(t){var a=t.stacked;return[i("SelectFilter",{attrs:{label:"Within category","show-label":!0,options:e.learningtypes,stacked:a},model:{value:e.selection.learningtype,callback:function(t){e.$set(e.selection,"learningtype",t)},expression:"selection.learningtype"}})]}},{key:"filters-right",fn:function(t){var a=t.stacked;return[i("SearchFilter",{attrs:{label:"Filter items by search","show-label":!1,placeholder:"Search",stacked:a},model:{value:e.selection.search,callback:function(t){e.$set(e.selection,"search",t)},expression:"selection.search"}})]}}]),model:{value:e.selection,callback:function(t){e.selection=t},expression:"selection"}})}),[],!1,null,null,null);u.options.__hasBlocks={script:!0,template:!0};t.default=u.exports},BN8m:function(e,t){e.exports=tui.require("tui/components/buttons/ButtonGroup")},BRq9:function(e,t,i){},CINB:function(e,t,i){"use strict";i.r(t);var a=i("bYkL"),n=i.n(a),r=i("yikf"),s=i.n(r),d=i("5qAA"),o=i.n(d),l=i("KGot"),c=i.n(l),u=i("U0LT"),m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"local_credly_programs"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"programs"},name:{kind:"Name",value:"local_credly_programs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"category"},arguments:[],directives:[]}]}}]}}]}}]},g={components:{Cell:c.a,HeaderCell:o.a,Table:s.a,Adder:n.a,AdderFilter:u.default},props:{existingItems:{type:Array,default:()=>[]},open:Boolean,title:{type:String,required:!0},tableHeaderName:{type:String,required:!0}},data:()=>({filteredPrograms:[],programs:[]}),watch:{open(){this.open&&this.$apollo.queries.programs.refetch().then(()=>{this.filteredPrograms=this.programs})}},apollo:{programs:{query:m,update:e=>e.programs.items}},methods:{async closeWithData(e){this.$emit("add-button-clicked"),this.$emit("added",{ids:[e[0]],data:[e]})},updateFilter({searchTerm:e}){this.filteredPrograms=this.programs.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))},itemCount(){return this.$str("program_adder:showing_x_of_y_programs","local_credly",{count:this.filteredPrograms.length,total:this.programs.length})}}},p=(i("6UgF"),i("KHd+")),f=function(e){e.options.__langStrings={local_credly:["program_adder:showing_x_of_y_programs"]}},h=Object(p.a)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Adder",{staticClass:"programAdder",attrs:{open:e.open&&!e.$apollo.loading,title:e.title,"existing-items":e.existingItems,"show-load-more":!1,"show-loading-btn":!1},on:{cancel:function(t){return e.$emit("cancel")}},scopedSlots:e._u([{key:"browse-list",fn:function(t){t.disabledItems,t.selectedItems,t.update;return[i("AdderFilter",{on:{"submit-search":e.updateFilter,filter:e.updateFilter,clear:e.updateFilter}}),e._v(" "),i("div",{staticClass:"programAdder__count"},[e._v("\n      "+e._s(e.itemCount())+"\n    ")]),e._v(" "),i("Table",{attrs:{data:e.filteredPrograms,"no-items-text":""},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"11",valign:"center"}},[e._v(e._s(e.tableHeaderName))])]},proxy:!0},{key:"row",fn:function(t){var a=t.row;return[i("Cell",{staticClass:"program-cell",attrs:{size:"11","column-header":e.tableHeaderName,valign:"center"},nativeOn:{click:function(t){return e.closeWithData([a.id,a])}}},[e._v("\n          "+e._s(a.name)+"\n          "),i("small",[e._v("( "+e._s(a.category)+" )")])])]}}],null,!0)})]}}])})}),[],!1,null,"02a47974",null);"function"==typeof f&&f(h),h.options.__hasBlocks={script:!0,template:!0};t.default=h.exports},DeIE:function(e,t,i){"use strict";var a=i("uaEM");i.n(a).a},FBvN:function(e,t){e.exports=tui.require("tui/components/filters/SearchFilter")},JXQf:function(e,t){e.exports=tui.require("tui/components/loading/Loader")},KGcv:function(e,t){e.exports=tui.require("tui/components/dropdown/DropdownItem")},KGot:function(e,t){e.exports=tui.require("tui/components/datatable/Cell")},"KHd+":function(e,t,i){"use strict";function a(e,t,i,a,n,r,s,d){var o,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),a&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),s?(o=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=o):n&&(o=d?function(){n.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:n),o)if(l.functional){l._injectStyles=o;var c=l.render;l.render=function(e,t){return o.call(t),c(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,o):[o]}return{exports:e,options:l}}i.d(t,"a",(function(){return a}))},MRQp:function(e,t,i){"use strict";i.r(t);var a=i("g8/U"),n=i.n(a),r=i("JXQf"),s=i.n(r),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"local_credly_badges"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"local_credly_filter"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"badges"},name:{kind:"Name",value:"local_credly_badges"},arguments:[{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}},{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"credlyId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"programId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"certificationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"courseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"linkedLearningName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"linkType"},arguments:[],directives:[]}]}}]}}]}}]},o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"local_credly_sync_badges"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"local_credly_sync_badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"syncfinished"},arguments:[],directives:[]}]}}]}}]},l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"local_credly_link_badge"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"link"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"local_credly_link_badge_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"local_credly_link_badge"},arguments:[{kind:"Argument",name:{kind:"Name",value:"link"},value:{kind:"Variable",name:{kind:"Name",value:"link"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"credlyId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"learningId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"learningName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"learningType"},arguments:[],directives:[]}]}}]}}]},c=i("yikf"),u=i.n(c),m=i("KGot"),g=i.n(m),p=i("5qAA"),f=i.n(p),h=i("rLBA"),_=i.n(h),v=i("gLvT"),k=i.n(v),y=i("KGcv"),b=i.n(y),C=i("tNJr"),F=i.n(C),A=i("CINB"),S=i("qTuH"),N=i("O2Ou"),w=i("vF5l"),$=i.n(w),x=i("BN8m"),T=i.n(x),I=i("zdti"),B=i.n(I),L=i("BI3i"),O={components:{ProgramAdder:A.default,CertificationAdder:S.default,CourseAdder:N.default,LoadingButton:_.a,Loader:s.a,PageHeading:n.a,Table:u.a,Cell:g.a,HeaderCell:f.a,Dropdown:k.a,DropdownItem:b.a,MoreButton:F.a,Button:$.a,ButtonGroup:T.a,NotificationBanner:B.a,LearningFilter:L.default},data:()=>({badges:{items:null,metadata:{total:0,next:1}},showProgramAdder:!1,programAdderTitle:"",programAdderOpenedFor:{},showCertificationAdder:!1,certificationAdderTitle:"",certificationAdderOpenedFor:{},showCourseAdder:!1,courseAdderTitle:"",courseAdderOpenedFor:{},syncStarted:!1,filters:[]}),computed:{hasMoreBadges(){return null!==this.badges.metadata.next},hasBadges(){return null!==this.badges.items}},methods:{sync:async function(){this.syncStarted=!0,await this.$apollo.mutate({mutation:o}),window.location.reload()},updateFilter(e){this.filters=[{name:"type",value:e.learningtype},{name:"search",value:e.search}],this.$apollo.queries.badges.setVariables({page:1,filters:this.filters}),this.$apollo.queries.badges.refresh()},clearFilter(){this.filters=[]},getBadges(){return this.badges.items},loadMore(){this.$apollo.queries.badges.fetchMore({variables:{page:this.badges.metadata.next,filters:this.filters},updateQuery:(e,{fetchMoreResult:t})=>(t.badges.items.unshift(...this.badges.items),t)})},openProgramAdder(e){this.programAdderTitle=this.$str("page:badges:programAdderTitle","local_credly",e.name),this.programAdderOpenedFor=e,this.showProgramAdder=!0},openCertificationAdder(e){this.certificationAdderTitle=this.$str("page:badges:certificationAdderTitle","local_credly",e.name),this.certificationAdderOpenedFor=e,this.showCertificationAdder=!0},openCourseAdder(e){this.courseAdderTitle=this.$str("page:badges:courseAdderTitle","local_credly",e.name),this.courseAdderOpenedFor=e,this.showCourseAdder=!0},isBadgeLinked:e=>e.programId||e.certificationId||e.courseId,getLinkType(e){return this.isBadgeLinked(e)?e.programId?this.$str("program","totara_program"):e.certificationId?this.$str("certification","totara_program"):e.courseId?this.$str("course","core"):void 0:this.$str("linktype:not_linked","local_credly")},hideProgramAdder(){this.showProgramAdder=!1,this.programAdderOpenedFor={}},hideCertificationAdder(){this.showCertificationAdder=!1,this.certificationAdderOpenedFor={}},hideCourseAdder(){this.showCourseAdder=!1,this.courseAdderOpenedFor={}},programAdderDataUpdated:async function({ids:e,data:t}){let i=e[0];await this.$apollo.mutate({mutation:l,variables:{link:{credlyId:this.programAdderOpenedFor.credlyId,learningId:i,learningType:"program"}}});const a=this.badges.items.findIndex(e=>e.credlyId===this.programAdderOpenedFor.credlyId),n=Math.ceil((a+1)/50);await this.refetchBadges(n),this.hideProgramAdder()},certificationAdderDataUpdated:async function({ids:e,data:t}){let i=e[0];await this.$apollo.mutate({mutation:l,variables:{link:{credlyId:this.certificationAdderOpenedFor.credlyId,learningId:i,learningType:"certification"}}});const a=this.badges.items.findIndex(e=>e.credlyId===this.certificationAdderOpenedFor.credlyId),n=Math.ceil((a+1)/50);await this.refetchBadges(n),this.hideCertificationAdder()},courseAdderDataUpdated:async function({ids:e,data:t}){let i=e[0];await this.$apollo.mutate({mutation:l,variables:{link:{credlyId:this.courseAdderOpenedFor.credlyId,learningId:i,learningType:"course"}}});const a=this.badges.items.findIndex(e=>e.credlyId===this.courseAdderOpenedFor.credlyId),n=Math.ceil((a+1)/50);await this.refetchBadges(n),this.hideCourseAdder()},unlinkBadge:async function(e){await this.$apollo.mutate({mutation:l,variables:{link:{credlyId:e.credlyId,learningId:null,learningType:"unlinked"}}});const t=this.badges.items.findIndex(t=>t.credlyId===e.credlyId),i=Math.ceil((t+1)/50);await this.refetchBadges(i)},refetchBadges(e){const t=this.badges.metadata;this.$apollo.queries.badges.fetchMore({variables:{page:e,filters:this.filters},updateQuery:(i,{fetchMoreResult:a})=>(a.badges.items=[...this.badges.items.slice(0,50*(e-1)),...a.badges.items,...this.badges.items.slice(50*e)],a.metadata=t,a)})}},apollo:{badges:{query:d,fetchPolicy:"network-only",variables(){return{page:1,filters:this.filters}},update:e=>e.badges}}},D=(i("DeIE"),i("KHd+")),q=function(e){e.options.__langStrings={local_credly:["page:badges:heading","page:badges:headerName","page:badges:headerId","page:badges:headerType","page:badges:headerLearning","page:badges:headerLinkToLearning","page:badges:moreMenu","page:badges:loadmore","page:badges:linkProgram","page:badges:linkCertification","page:badges:unlinkLearning","page:badges:linkCourse","page:badges:programAdderTitle","page:badges:certificationAdderTitle","page:badges:courseAdderTitle","page:badges:showing_x_of_y_badges","page:badges:sync","page:badges:synchronising","linktype:not_linked","err:no_badges"],totara_program:["program","certification"],core:["course"]}},H=Object(D.a)(O,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"credly-badges"},[i("PageHeading",{attrs:{title:e.$str("page:badges:heading","local_credly")}}),e._v(" "),i("ButtonGroup",[i("Button",{attrs:{disabled:e.syncStarted,styleclass:{primary:"true"},text:e.$str("page:badges:sync","local_credly"),"aria-label":e.$str("page:badges:sync","local_credly")},on:{click:e.sync}})],1),e._v(" "),e.syncStarted?i("NotificationBanner",{attrs:{type:"info",message:e.$str("page:badges:synchronising","local_credly")}}):e._e(),e._v(" "),i("Loader",{attrs:{loading:e.$apollo.loading&&(!e.hasBadges||e.filters.length>0)||e.syncStarted}},[(e.hasBadges||e.filters.length>0)&&!e.syncStarted?i("div",{staticClass:"content"},[i("LearningFilter",{on:{"submit-search":e.updateFilter,filter:e.updateFilter,clear:e.clearFilter}}),e._v(" "),i("p",[e._v("\n        "+e._s(this.$str("page:badges:showing_x_of_y_badges","local_credly",{count:e.getBadges().length,total:e.badges.metadata.total}))+"\n      ")]),e._v(" "),i("ProgramAdder",{attrs:{open:e.showProgramAdder,"existing-items":[],title:e.programAdderTitle,"table-header-name":"Program Name"},on:{cancel:e.hideProgramAdder,added:e.programAdderDataUpdated}}),e._v(" "),i("CertificationAdder",{attrs:{open:e.showCertificationAdder,"existing-items":[],title:e.certificationAdderTitle,"table-header-name":"Certification Name"},on:{cancel:e.hideCertificationAdder,added:e.certificationAdderDataUpdated}}),e._v(" "),i("CourseAdder",{attrs:{open:e.showCourseAdder,"existing-items":[],title:e.courseAdderTitle,"table-header-name":"Course Name"},on:{cancel:e.hideCourseAdder,added:e.courseAdderDataUpdated}}),e._v(" "),i("Table",{attrs:{data:e.getBadges(),"color-odd-rows":!0},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"3"}},[e._v(e._s(e.$str("page:badges:headerName","local_credly")))]),e._v(" "),i("HeaderCell",{attrs:{size:"3"}},[e._v(e._s(e.$str("page:badges:headerId","local_credly")))]),e._v(" "),i("HeaderCell",{attrs:{size:"3"}},[e._v(e._s(e.$str("page:badges:headerType","local_credly")))]),e._v(" "),i("HeaderCell",{attrs:{size:"3"}},[e._v(e._s(e.$str("page:badges:headerLearning","local_credly")))]),e._v(" "),i("HeaderCell",{staticClass:"link-to-learning-header",attrs:{size:"2"}},[e._v(e._s(e.$str("page:badges:headerLinkToLearning","local_credly")))])]},proxy:!0},{key:"row",fn:function(t){var a=t.row;return[i("Cell",{attrs:{size:"3","column-header":e.$str("page:badges:headerName","local_credly")}},[e._v("\n            "+e._s(a.name)+"\n          ")]),e._v(" "),i("Cell",{attrs:{size:"3","column-header":e.$str("page:badges:headerId","local_credly")}},[e._v("\n            "+e._s(a.credlyId)+"\n          ")]),e._v(" "),i("Cell",{attrs:{size:"3","column-header":e.$str("page:badges:headerType","local_credly")}},[i("span",[e._v(e._s(e.getLinkType(a)))])]),e._v(" "),i("Cell",{attrs:{size:"3","column-header":e.$str("page:badges:headerLearning","local_credly")}},[e._v("\n            "+e._s(a.linkedLearningName)+"\n          ")]),e._v(" "),i("Cell",{staticClass:"link-to-learning-col",attrs:{size:"2","column-header":e.$str("page:badges:headerLinkToLearning","local_credly")}},[i("Dropdown",{staticClass:"credly-more-menu",attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var a=t.toggle;return[i("MoreButton",{attrs:{"no-padding":!0,"aria-label":e.$str("page:badges:moreMenu","local_credly")},on:{click:a}})]}}],null,!0)},[e._v(" "),e.isBadgeLinked(a)?e._e():i("DropdownItem",{on:{click:function(t){return e.openProgramAdder(a)}}},[e._v("\n                "+e._s(e.$str("page:badges:linkProgram","local_credly"))+"\n              ")]),e._v(" "),e.isBadgeLinked(a)?e._e():i("DropdownItem",{on:{click:function(t){return e.openCertificationAdder(a)}}},[e._v("\n                "+e._s(e.$str("page:badges:linkCertification","local_credly"))+"\n              ")]),e._v(" "),e.isBadgeLinked(a)?e._e():i("DropdownItem",{on:{click:function(t){return e.openCourseAdder(a)}}},[e._v("\n                "+e._s(e.$str("page:badges:linkCourse","local_credly"))+"\n              ")]),e._v(" "),e.isBadgeLinked(a)?i("DropdownItem",{on:{click:function(t){return e.unlinkBadge(a)}}},[e._v("\n                "+e._s(e.$str("page:badges:unlinkLearning","local_credly"))+"\n              ")]):e._e()],1)],1)]}}],null,!1,3917578258)}),e._v(" "),e.hasMoreBadges?i("div",{staticClass:"loadMore"},[i("LoadingButton",{attrs:{text:e.$str("page:badges:loadmore","local_credly"),loading:e.$apollo.loading},on:{click:e.loadMore}})],1):e._e()],1):i("div",[i("p",[e._v("\n        "+e._s(e.$str("err:no_badges","local_credly"))+"\n      ")])])])],1)}),[],!1,null,"03d704d1",null);"function"==typeof q&&q(H),H.options.__hasBlocks={script:!0,template:!0};t.default=H.exports},MtFN:function(e,t,i){"use strict";var a=i("o89Q");i.n(a).a},O2Ou:function(e,t,i){"use strict";i.r(t);var a=i("bYkL"),n=i.n(a),r=i("yikf"),s=i.n(r),d=i("5qAA"),o=i.n(d),l=i("KGot"),c=i.n(l),u=i("U0LT"),m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"local_credly_courses"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"courses"},name:{kind:"Name",value:"local_credly_courses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"category"},arguments:[],directives:[]}]}}]}}]}}]},g={components:{Cell:c.a,HeaderCell:o.a,Table:s.a,Adder:n.a,AdderFilter:u.default},props:{existingItems:{type:Array,default:()=>[]},open:Boolean,title:{type:String,required:!0},tableHeaderName:{type:String,required:!0}},data:()=>({filteredCourses:[],courses:[]}),watch:{open(){this.open&&this.$apollo.queries.courses.refetch().then(()=>{this.filteredCourses=this.courses})}},apollo:{courses:{query:m,update:e=>e.courses.items}},methods:{async closeWithData(e){this.$emit("add-button-clicked"),this.$emit("added",{ids:[e[0]],data:[e]})},updateFilter({searchTerm:e}){this.filteredCourses=this.courses.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))},itemCount(){return this.$str("course_adder:showing_x_of_y_courses","local_credly",{count:this.filteredCourses.length,total:this.courses.length})}}},p=(i("hMt/"),i("KHd+")),f=function(e){e.options.__langStrings={local_credly:["course_adder:showing_x_of_y_courses"]}},h=Object(p.a)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Adder",{staticClass:"courseAdder",attrs:{open:e.open&&!e.$apollo.loading,title:e.title,"existing-items":e.existingItems,"show-load-more":!1,"show-loading-btn":!1},on:{cancel:function(t){return e.$emit("cancel")}},scopedSlots:e._u([{key:"browse-list",fn:function(t){t.disabledItems,t.selectedItems,t.update;return[i("AdderFilter",{on:{"submit-search":e.updateFilter,filter:e.updateFilter,clear:e.updateFilter}}),e._v(" "),i("div",{staticClass:"courseAdder__count"},[e._v("\n      "+e._s(e.itemCount())+"\n    ")]),e._v(" "),i("Table",{attrs:{data:e.filteredCourses,"no-items-text":""},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"11",valign:"center"}},[e._v(e._s(e.tableHeaderName))])]},proxy:!0},{key:"row",fn:function(t){var a=t.row;return[i("Cell",{staticClass:"program-cell",attrs:{size:"11","column-header":e.tableHeaderName,valign:"center"},nativeOn:{click:function(t){return e.closeWithData([a.id,a])}}},[e._v("\n          "+e._s(a.name)+"\n          "),i("small",[e._v("( "+e._s(a.category)+" )")])])]}}],null,!0)})]}}])})}),[],!1,null,"5897d15a",null);"function"==typeof f&&f(h),h.options.__hasBlocks={script:!0,template:!0};t.default=h.exports},U0LT:function(e,t,i){"use strict";i.r(t);var a=i("59Wj"),n=i.n(a),r=i("FBvN"),s=i.n(r),d={components:{FilterBar:n.a,SearchFilter:s.a},props:{searchTerm:{type:String,default:""}},data(){return{courses:[],selection:{searchTerm:this.searchTerm}}},watch:{selection:{deep:!0,handler(){this.$emit("filter",this.selection)}}},methods:{submitSearch(){this.$emit("submit-search",this.selection)}}},o=i("KHd+"),l=function(e){e.options.__langStrings={local_credly:["adder:search"]}},c=Object(o.a)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-workspaceFilter"},[e.$apollo.loading?e._e():[i("FilterBar",{staticClass:"tui-workspaceFilter__filter",attrs:{title:e.$str("adder:search","local_credly")},scopedSlots:e._u([{key:"filters-left",fn:function(t){var a=t.stacked;return[i("SearchFilter",{attrs:{label:e.$str("adder:search","local_credly"),"drop-label":"",placeholder:e.$str("adder:search","local_credly"),stacked:a},model:{value:e.selection.searchTerm,callback:function(t){e.$set(e.selection,"searchTerm",t)},expression:"selection.searchTerm"}})]}}],null,!1,1812312109),model:{value:e.selection,callback:function(t){e.selection=t},expression:"selection"}})]],2)}),[],!1,null,null,null);"function"==typeof l&&l(c),c.options.__hasBlocks={script:!0,template:!0};t.default=c.exports},YnSU:function(e,t,i){!function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("local_credly")?console.warn('[tui bundle] The bundle "local_credly" is already loaded, skipping initialisation.'):(tui._bundle.register("local_credly"),tui._bundle.addModulesFromContext("local_credly/components",i("kDw7")),tui._bundle.addModulesFromContext("local_credly/pages",i("rG8Z")))}()},bYkL:function(e,t){e.exports=tui.require("tui/components/adder/Adder")},"g8/U":function(e,t){e.exports=tui.require("tui/components/layouts/PageHeading")},gLvT:function(e,t){e.exports=tui.require("tui/components/dropdown/Dropdown")},"hMt/":function(e,t,i){"use strict";var a=i("uraW");i.n(a).a},kDw7:function(e,t,i){var a={"./AdderFilter":"U0LT","./AdderFilter.vue":"U0LT","./CertificationAdder":"qTuH","./CertificationAdder.vue":"qTuH","./CourseAdder":"O2Ou","./CourseAdder.vue":"O2Ou","./LearningFilter":"BI3i","./LearningFilter.vue":"BI3i","./ProgramAdder":"CINB","./ProgramAdder.vue":"CINB"};function n(e){var t=r(e);return i(t)}function r(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id="kDw7"},o89Q:function(e,t,i){},qTuH:function(e,t,i){"use strict";i.r(t);var a=i("bYkL"),n=i.n(a),r=i("yikf"),s=i.n(r),d=i("5qAA"),o=i.n(d),l=i("KGot"),c=i.n(l),u=i("U0LT"),m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"local_credly_certifications"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"certifications"},name:{kind:"Name",value:"local_credly_certifications"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"category"},arguments:[],directives:[]}]}}]}}]}}]},g={components:{Cell:c.a,HeaderCell:o.a,Table:s.a,Adder:n.a,AdderFilter:u.default},props:{existingItems:{type:Array,default:()=>[]},open:Boolean,title:{type:String,required:!0},tableHeaderName:{type:String,required:!0}},data:()=>({filteredCertifications:[],certifications:[]}),watch:{open(){this.open&&this.$apollo.queries.certifications.refetch().then(()=>{this.filteredCertifications=this.certifications})}},apollo:{certifications:{query:m,update:e=>e.certifications.items}},methods:{async closeWithData(e){this.$emit("add-button-clicked"),this.$emit("added",{ids:[e[0]],data:[e]})},updateFilter({searchTerm:e}){this.filteredCertifications=this.certifications.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))},itemCount(){return this.$str("certification_adder:showing_x_of_y_certifications","local_credly",{count:this.filteredCertifications.length,total:this.certifications.length})}}},p=(i("MtFN"),i("KHd+")),f=function(e){e.options.__langStrings={local_credly:["certification_adder:showing_x_of_y_certifications"]}},h=Object(p.a)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Adder",{staticClass:"certificationAdder",attrs:{open:e.open&&!e.$apollo.loading,title:e.title,"existing-items":e.existingItems,"show-load-more":!1,"show-loading-btn":!1},on:{cancel:function(t){return e.$emit("cancel")}},scopedSlots:e._u([{key:"browse-list",fn:function(t){t.disabledItems,t.selectedItems,t.update;return[i("AdderFilter",{on:{"submit-search":e.updateFilter,filter:e.updateFilter,clear:e.updateFilter}}),e._v(" "),i("div",{staticClass:"certificationAdder__count"},[e._v("\n      "+e._s(e.itemCount())+"\n    ")]),e._v(" "),i("Table",{attrs:{data:e.filteredCertifications,"no-items-text":""},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"11",valign:"center"}},[e._v(e._s(e.tableHeaderName))])]},proxy:!0},{key:"row",fn:function(t){var a=t.row;return[i("Cell",{staticClass:"program-cell",attrs:{size:"11","column-header":e.tableHeaderName,valign:"center"},nativeOn:{click:function(t){return e.closeWithData([a.id,a])}}},[e._v("\n          "+e._s(a.name)+"\n          "),i("small",[e._v("( "+e._s(a.category)+" )")])])]}}],null,!0)})]}}])})}),[],!1,null,"94780438",null);"function"==typeof f&&f(h),h.options.__hasBlocks={script:!0,template:!0};t.default=h.exports},rG8Z:function(e,t,i){var a={"./CredlyBadges":"MRQp","./CredlyBadges.vue":"MRQp"};function n(e){var t=r(e);return i(t)}function r(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id="rG8Z"},rLBA:function(e,t){e.exports=tui.require("totara_engage/components/buttons/LoadingButton")},tNJr:function(e,t){e.exports=tui.require("tui/components/buttons/MoreIcon")},uaEM:function(e,t,i){},uraW:function(e,t,i){},vF5l:function(e,t){e.exports=tui.require("tui/components/buttons/Button")},yikf:function(e,t){e.exports=tui.require("tui/components/datatable/Table")},zdti:function(e,t){e.exports=tui.require("tui/components/notifications/NotificationBanner")}});