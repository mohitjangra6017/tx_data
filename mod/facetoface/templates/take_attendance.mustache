{{!
   This file is part of Totara Learn

   Copyright (C) 2019 onwards Totara Learning Solutions LTD

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 3 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See  the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program.  If not, see <http://www.gnu.org/licenses/>.

   @author Kian Nguyen <kevin.hottinger@totaralearning.com>
   @package mod_facetoface
}}

{{!
    @template mod_facetoface/take_attendance

    This template generate the form of take attendance.

    Classes requried for JS:
    * none

    Context variables required for this template:
    * url: The base url of taking attendance
    * sessionid: Seminar's event id
    * sessiondateid: The session date id of the current event, this could be zero.
    * formattributes: The list of form attributes
    * formattributes -> name: The name of attribute that need to be in the form
    * formattributes -> value: Value of the attribute.
    * hiddeninputs: The list of hidden inputs, within the form
    * hiddeninputs -> name: Hidden input's name
    * hiddeninputs -> value: Hidden input's value
    * tablecontent: HTML code from totara_table, which is a part of this form
    * sessionpicker: take_attendance_session_picker widget, if this is not set, then it won't displayed
    * bulkaction: take_attendance_bulk_action widget.
    * exports: List of options for exporting to file
    * exports -> value: Export type
    * exports -> label: Public string for export type
    * notsetcode: code for state not_set, which the front-end needs
    * uploadattendanceurl: Upload event attendace and grades

    Example context (json):
        There is no example for this template

     Other context variables for following partials:
        * mod_facetoface/take_attendance_session_picker
        * mod_facetoface/take_attendance_bulk_action
}}

<div class="tw-takeAttendance"
     data-url="{{url}}"
     data-sessionid="{{sessionid}}"
     data-sessiondateid="{{sessiondateid}}"
     data-notsetcode="{{notsetcode}}"
     data-core-autoinitialise="true"
     data-core-autoinitialise-amd="mod_facetoface/take_attendance">

    {{#sessionpicker}}{{>mod_facetoface/take_attendance_session_picker}}{{/sessionpicker}}

    <form {{#formattributes}} {{name}}='{{value}}'{{/formattributes}}>
        {{#bulkaction}}{{>mod_facetoface/take_attendance_bulk_action}}{{/bulkaction}}

        {{#hiddeninputs}}
            <input type="hidden" name="{{name}}"  value="{{value}}"/>
        {{/hiddeninputs}}

        <div class="hide" id="noticeupdate"> </div>

        {{{ tablecontent }}}

            <div>
                <a href="{{uploadattendanceurl}}" role="button"
                   class="btn btn-default mod_facetoface__action_uploadattendance">
                    {{#str}} uploadattendance, mod_facetoface {{/str}}
                </a>

                <input type="submit" name="saveattendance"
                       value="{{#str}} saveattendance, mod_facetoface {{/str}}"
                       id="f2f-save-taking-attendance"
                       class="btn btn-primary" />

                <input type="submit" name="cancelform"
                       value="{{#str}} cancelattendance, mod_facetoface {{/str}}">
            </div>
    </form>

    <div class="action last mod-facetoface__export-options">
        <label for="menuf2f-export-actions" class="sr-only">
            {{#str}} attendeeactions, mod_facetoface {{/str}}
        </label>

        <select name="f2f-export-actions" id="menuf2f-export-actions">
            <option value=""> {{#str}} selectexport, mod_facetoface {{/str}} </option>
            {{#exports}}
                <option value="{{value}}"> {{label}} </option>
            {{/exports}}
        </select>
    </div>
</div>