define([],function(){function a(){return this instanceof a?(this.widget="",this.pathway={id:0,sortorder:0,type:"learning_plan"},this.pwKey="",this.endpoints={create:"pathway_learning_plan_create",update:"pathway_learning_plan_update"},void(this.filename="modal.js")):new a}a.prototype={setParent:function(a){this.widget=a},initData:function(a){var b,c=this,d=this.widget.closest("[data-pw-key]"),e=0,f=0,g=this.widget.closest("[data-pw-id]");if(d&&(e=d.getAttribute("data-pw-key")?d.getAttribute("data-pw-key"):0),g&&(f=g.getAttribute("data-pw-id")?g.getAttribute("data-pw-id"):0),c.pwKey=e,b=a,0===f){var h=document.querySelector("[data-comp-id]"),i=1;h&&(i=h.getAttribute("data-comp-id")?h.getAttribute("data-comp-id"):1),c.pathway.competency_id=i,delete c.pathway.id,b.setAttribute("data-pw-save-endpoint",c.endpoints.create)}else c.pathway.id=f,b.setAttribute("data-pw-save-endpoint",c.endpoints.update);c.triggerEvent("update",{pathway:c.pathway})},triggerEvent:function(a,b){b.key=this.pwKey;var c=new CustomEvent("totara_competency/pathway:"+a,{bubbles:!0,detail:b});this.widget.dispatchEvent(c)}};var b=function(b){return new Promise(function(c){var d=new a;d.setParent(b),d.initData(b),c(d)})};return{init:b}});