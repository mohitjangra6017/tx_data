define(["jquery","core/str","totara_plan/component","core/config","core/notification"],function(a,b,c,d,e){return{init:function(f,g,h){const i="initialise_competency_find_dialog";var j=function(){c.init({plan_id:f,page:g,component_name:h});var j=function(){this.baseUrl="",this.standardButtons={},this.continueButtons={},this.continuesaveButtons={}};j.prototype=new c.totaraDialog_handler_preRequisite,j._open=function(){var a=comp_update_allowed?this.continueButtons:this.standardButtons;this._dialog.dialog.dialog("option","buttons",a)},j.prototype._continue=function(c){const d=a(".selected > div > span",this._container),f=this._get_ids(d).join(",");return f?void this._dialog._request(c+f,{object:this,method:"_continueRender"}):void b.get_string("error:nocompetency","totara_program").done(function(a){e.alert("",a)})},j.prototype._continueRender=function(a){if("NOCOURSES"===a.substring(0,9)){const b=this.continueskipurl+a.substr(10);return this._dialog._request(b,{object:this,method:"_update"}),!1}return this._dialog.dialog.dialog("option","buttons",this.continuesaveButtons),!0},totaraDialog_handler.prototype._continueSave=function(b){const c=a("form",j._container).serialize();this._dialog._request(b+c,{object:this,method:"_update"})};const k=d.wwwroot+"/totara/plan/components/competency/",l=k+"confirm.php?sesskey="+d.sesskey+"&id="+f+"&update=",m=k+"update.php?sesskey="+d.sesskey+"&id="+f+"&update=",n=m+"id="+f+"&update=",o=k+"update.php?",p=new j;p.baseurl=k,p.continueskipurl=n;const q=[{key:"save",component:"totara_core"},{key:"cancel",component:"moodle"},{key:"continue",component:"moodle"},{key:"addcompetencys",component:"totara_plan"}];b.get_strings(q).done(function(a){const b=a[0],c=a[1],d=a[2];p.standardButtons[b]=function(){p._save(m)},p.standardButtons[c]=function(){p._cancel()},p.continueButtons[d]=function(){p._continue(l)},p.continueButtons[c]=function(){p._cancel()},p.continuesaveButtons[b]=function(){p._continueSave(o)},p.continuesaveButtons[c]=function(){p._cancel()},totaraDialogs.evidence=new totaraDialog("assigncompetencies","show-competency-dialog",{buttons:comp_update_allowed?p.continueButtons:p.standardButtons,title:"<h2>"+a[3]+"</h2>"},k+"find.php?id="+f,p),M.util.js_complete(i)})};M.util.js_pending(i),window.dialogsInited?j():(window.dialoginits=window.dialoginits||[],window.dialoginits.push(j))}}});